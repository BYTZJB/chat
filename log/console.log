2017-05-20 10:01:41.455 [info] <0.31.0> Application lager started on node 'yangwei@brucedeiMac.local'
2017-05-20 10:01:41.455 [info] <0.98.0>@chat_sup:init:26 ###############   Begin  ##############
2017-05-20 10:01:42.144 [info] <0.31.0> Application mnesia started on node 'yangwei@brucedeiMac.local'
2017-05-20 10:01:42.148 [info] <0.99.0>@mod_control_sup:init:25 ok 
2017-05-20 10:01:42.148 [info] <0.99.0>@control_sup:init:63 
2017-05-20 10:01:42.158 [info] <0.145.0>@id_generator:init:30 ########### id_generator
2017-05-20 10:01:42.190 [info] <0.146.0>@group_sup:init:70 [] 
2017-05-20 10:01:42.190 [info] <0.146.0>@group_sup:init:77 [] 
2017-05-20 10:01:42.190 [info] <0.146.0>@group_sup:init:79 ######## group_sup
2017-05-20 10:01:42.199 [info] <0.148.0>@client_sup:init:65 ######## client_sup
2017-05-20 10:01:42.209 [info] <0.31.0> Application chat started on node 'yangwei@brucedeiMac.local'
2017-05-20 10:02:02.760 [info] <0.150.0>@tcp_acceptor:process_Client_Socket:181 #Port<0.3742>
2017-05-20 10:02:02.805 [info] <0.150.0>@tcp_acceptor:process_Client_Socket:189 
2017-05-20 10:02:02.805 [info] <0.152.0>@tcp_agent:wait_socket:93 wait_socket: #Port<0.3742>
2017-05-20 10:02:21.108 [info] <0.152.0>@tcp_agent:handle_info:259 tcp closed, state: wait_auth
2017-05-20 10:02:21.108 [info] <0.152.0>@tcp_agent:terminate:287 {error,not_found}
2017-05-20 10:02:21.108 [info] <0.152.0>@tcp_agent:terminate:288 tcp_agent process is termianted
2017-05-20 10:03:22.725 [info] <0.150.0>@tcp_acceptor:process_Client_Socket:181 #Port<0.3753>
2017-05-20 10:03:22.725 [info] <0.150.0>@tcp_acceptor:process_Client_Socket:189 
2017-05-20 10:03:22.725 [info] <0.153.0>@tcp_agent:wait_socket:93 wait_socket: #Port<0.3753>
2017-05-20 10:05:50.382 [info] <0.153.0>@tcp_agent:handle_info:259 tcp closed, state: wait_auth
2017-05-20 10:05:50.382 [info] <0.153.0>@tcp_agent:terminate:287 {error,not_found}
2017-05-20 10:05:50.382 [info] <0.153.0>@tcp_agent:terminate:288 tcp_agent process is termianted
2017-05-20 10:07:50.332 [info] <0.150.0>@tcp_acceptor:process_Client_Socket:181 #Port<0.3754>
2017-05-20 10:07:50.333 [info] <0.150.0>@tcp_acceptor:process_Client_Socket:189 
2017-05-20 10:07:50.333 [info] <0.156.0>@tcp_agent:wait_socket:93 wait_socket: #Port<0.3754>
2017-05-20 10:08:16.843 [info] <0.156.0>@tcp_agent:handle_info:259 tcp closed, state: wait_auth
2017-05-20 10:08:16.843 [info] <0.156.0>@tcp_agent:terminate:287 {error,not_found}
2017-05-20 10:08:16.843 [info] <0.156.0>@tcp_agent:terminate:288 tcp_agent process is termianted
2017-05-20 10:17:11.345 [info] <0.31.0> Application lager started on node 'yangwei@brucedeiMac.local'
2017-05-20 10:17:11.345 [info] <0.98.0>@chat_sup:init:26 ###############   Begin  ##############
2017-05-20 10:17:11.880 [info] <0.31.0> Application mnesia started on node 'yangwei@brucedeiMac.local'
2017-05-20 10:17:11.884 [info] <0.99.0>@mod_control_sup:init:25 ok 
2017-05-20 10:17:11.884 [info] <0.99.0>@control_sup:init:63 
2017-05-20 10:17:11.920 [info] <0.145.0>@id_generator:init:30 ########### id_generator
2017-05-20 10:17:11.962 [info] <0.146.0>@group_sup:init:70 [] 
2017-05-20 10:17:11.962 [info] <0.146.0>@group_sup:init:77 [] 
2017-05-20 10:17:11.962 [info] <0.146.0>@group_sup:init:79 ######## group_sup
2017-05-20 10:17:11.972 [info] <0.148.0>@client_sup:init:65 ######## client_sup
2017-05-20 10:17:11.982 [info] <0.31.0> Application chat started on node 'yangwei@brucedeiMac.local'
2017-05-20 10:17:58.373 [info] <0.150.0>@tcp_acceptor:process_Client_Socket:181 #Port<0.3742>
2017-05-20 10:17:58.401 [info] <0.150.0>@tcp_acceptor:process_Client_Socket:189 
2017-05-20 10:17:58.401 [info] <0.152.0>@tcp_agent:wait_socket:93 wait_socket: #Port<0.3742>
2017-05-20 10:17:59.960 [info] <0.152.0>@tcp_agent:handle_info:214 *******************************************
2017-05-20 10:18:00.052 [info] <0.152.0>@tcp_agent:handle_info:218 <<"1">>
2017-05-20 10:18:00.052 [info] <0.152.0>@tcp_agent:handle_info:219 #{<<"cmd">> => <<"1">>,<<"password">> => <<"iyw">>,<<"username">> => <<"zst">>}
2017-05-20 10:18:00.052 [info] <0.152.0>@tcp_agent:handle_info:222 ####
2017-05-20 10:18:00.052 [info] <0.152.0>@tcp_agent:wait_auth:97 
2017-05-20 10:18:00.052 [info] <0.152.0>@tcp_agent:wait_auth:99 1
2017-05-20 10:18:00.072 [info] <0.152.0>@mod_mnesia:add_new_client:43 #############
2017-05-20 10:18:00.072 [info] <0.152.0>@mod_mnesia:add_new_client:49 {aborted,{bad_type,{client,1,"zst","iyw",[],[]}}}
2017-05-20 10:18:00.102 [info] <0.148.0>@client:start_link:45 ```````````````````````````````````````
2017-05-20 10:18:00.102 [info] <0.154.0>@client:init:67 ```````````````````````````````````````
2017-05-20 10:18:00.102 [info] <0.152.0>@tcp_agent:wait_auth:115 $$$$$$$$$$$$$$ end
2017-05-20 10:19:36.752 [info] <0.152.0>@tcp_agent:handle_info:259 tcp closed, state: wait_data
2017-05-20 10:19:36.752 [info] <0.152.0>@tcp_agent:terminate:287 {error,not_found}
2017-05-20 10:19:36.753 [info] <0.152.0>@tcp_agent:terminate:288 tcp_agent process is termianted
2017-05-20 10:51:52.947 [info] <0.31.0> Application lager started on node 'yangwei@brucedeiMac.local'
2017-05-20 10:51:52.947 [info] <0.98.0>@chat_sup:init:26 ###############   Begin  ##############
2017-05-20 10:51:53.854 [info] <0.31.0> Application mnesia started on node 'yangwei@brucedeiMac.local'
2017-05-20 10:51:53.879 [info] <0.99.0>@mod_control_sup:init:25 ok 
2017-05-20 10:51:53.879 [info] <0.99.0>@control_sup:init:63 
2017-05-20 10:51:54.160 [info] <0.145.0>@id_generator:init:30 ########### id_generator
2017-05-20 10:51:54.260 [info] <0.146.0>@group_sup:init:70 [] 
2017-05-20 10:51:54.260 [info] <0.146.0>@group_sup:init:77 [] 
2017-05-20 10:51:54.260 [info] <0.146.0>@group_sup:init:79 ######## group_sup
2017-05-20 10:51:54.302 [info] <0.148.0>@client_sup:init:65 ######## client_sup
2017-05-20 10:51:54.378 [info] <0.31.0> Application chat started on node 'yangwei@brucedeiMac.local'
2017-05-20 10:52:42.359 [info] <0.150.0>@tcp_acceptor:process_Client_Socket:181 #Port<0.3742>
2017-05-20 10:52:42.398 [info] <0.150.0>@tcp_acceptor:process_Client_Socket:189 
2017-05-20 10:52:42.398 [info] <0.152.0>@tcp_agent:wait_socket:93 wait_socket: #Port<0.3742>
2017-05-20 10:52:45.341 [info] <0.152.0>@tcp_agent:handle_info:214 *******************************************
2017-05-20 10:52:45.403 [info] <0.152.0>@tcp_agent:handle_info:218 <<"1">>
2017-05-20 10:52:45.403 [info] <0.152.0>@tcp_agent:handle_info:219 #{<<"cmd">> => <<"1">>,<<"password">> => <<"iyw">>,<<"username">> => <<"zst">>}
2017-05-20 10:52:45.403 [info] <0.152.0>@tcp_agent:handle_info:222 ####
2017-05-20 10:52:45.403 [info] <0.152.0>@tcp_agent:wait_auth:97 
2017-05-20 10:52:45.404 [info] <0.152.0>@tcp_agent:wait_auth:99 1
2017-05-20 10:52:45.412 [info] <0.152.0>@mod_mnesia:add_new_client:43 #############
2017-05-20 10:52:45.413 [info] <0.152.0>@mod_mnesia:add_new_client:49 {aborted,{bad_type,{client,1,"zst","iyw",[],[]}}}
2017-05-20 10:52:45.432 [info] <0.148.0>@client:start_link:45 ```````````````````````````````````````
2017-05-20 10:52:45.432 [info] <0.154.0>@client:init:67 ```````````````````````````````````````
2017-05-20 10:52:45.432 [info] <0.152.0>@tcp_agent:wait_auth:115 $$$$$$$$$$$$$$ end
2017-05-20 10:52:56.164 [info] <0.152.0>@tcp_agent:handle_info:214 *******************************************
2017-05-20 10:52:56.164 [info] <0.152.0>@tcp_agent:handle_info:218 <<"3">>
2017-05-20 10:52:56.164 [info] <0.152.0>@tcp_agent:handle_info:219 #{<<"cmd">> => <<"3">>,<<"data">> => <<"fadfad">>,<<"id">> => <<"1">>,<<"to_id">> => <<"2">>,<<"to_type">> => <<"1">>}
2017-05-20 10:56:52.761 [info] <0.31.0> Application lager started on node 'yangwei@brucedeiMac.local'
2017-05-20 10:56:52.761 [info] <0.98.0>@chat_sup:init:26 ###############   Begin  ##############
2017-05-20 10:56:53.362 [info] <0.31.0> Application mnesia started on node 'yangwei@brucedeiMac.local'
2017-05-20 10:56:53.377 [info] <0.99.0>@mod_control_sup:init:25 ok 
2017-05-20 10:56:53.377 [info] <0.99.0>@control_sup:init:63 
2017-05-20 10:56:53.392 [info] <0.145.0>@id_generator:init:30 ########### id_generator
2017-05-20 10:56:53.424 [info] <0.146.0>@group_sup:init:70 [] 
2017-05-20 10:56:53.424 [info] <0.146.0>@group_sup:init:77 [] 
2017-05-20 10:56:53.424 [info] <0.146.0>@group_sup:init:79 ######## group_sup
2017-05-20 10:56:53.611 [info] <0.148.0>@client_sup:init:65 ######## client_sup
2017-05-20 10:56:53.631 [info] <0.31.0> Application chat started on node 'yangwei@brucedeiMac.local'
2017-05-20 10:57:37.722 [info] <0.150.0>@tcp_acceptor:process_Client_Socket:181 #Port<0.3744>
2017-05-20 10:57:37.761 [info] <0.150.0>@tcp_acceptor:process_Client_Socket:189 
2017-05-20 10:57:37.761 [info] <0.156.0>@tcp_agent:wait_socket:93 wait_socket: #Port<0.3744>
2017-05-20 10:57:42.212 [info] <0.156.0>@tcp_agent:handle_info:214 *******************************************
2017-05-20 10:57:42.256 [info] <0.156.0>@tcp_agent:handle_info:218 <<"1">>
2017-05-20 10:57:42.256 [info] <0.156.0>@tcp_agent:handle_info:219 #{<<"cmd">> => <<"1">>,<<"password">> => <<"iyw">>,<<"username">> => <<"zst">>}
2017-05-20 10:57:42.256 [info] <0.156.0>@tcp_agent:handle_info:222 ####
2017-05-20 10:57:42.256 [info] <0.156.0>@tcp_agent:wait_auth:97 
2017-05-20 10:57:42.256 [info] <0.156.0>@tcp_agent:wait_auth:99 1
2017-05-20 10:57:42.256 [info] <0.156.0>@mod_mnesia:add_new_client:43 #############
2017-05-20 10:57:42.256 [info] <0.156.0>@mod_mnesia:add_new_client:49 {aborted,{bad_type,{client,1,"zst","iyw",[],[]}}}
2017-05-20 10:57:42.274 [info] <0.148.0>@client:start_link:45 ```````````````````````````````````````
2017-05-20 10:57:42.274 [info] <0.158.0>@client:init:67 ```````````````````````````````````````
2017-05-20 10:57:42.274 [info] <0.156.0>@tcp_agent:wait_auth:115 $$$$$$$$$$$$$$ end
2017-05-20 10:59:56.142 [info] <0.31.0> Application lager started on node 'yangwei@brucedeiMac.local'
2017-05-20 10:59:56.142 [info] <0.98.0>@chat_sup:init:26 ###############   Begin  ##############
2017-05-20 10:59:56.507 [info] <0.31.0> Application mnesia started on node 'yangwei@brucedeiMac.local'
2017-05-20 10:59:56.510 [info] <0.99.0>@mod_control_sup:init:25 ok 
2017-05-20 10:59:56.510 [info] <0.99.0>@control_sup:init:63 
2017-05-20 10:59:56.511 [info] <0.145.0>@id_generator:init:30 ########### id_generator
2017-05-20 10:59:56.516 [info] <0.146.0>@group_sup:init:70 [] 
2017-05-20 10:59:56.516 [info] <0.146.0>@group_sup:init:77 [] 
2017-05-20 10:59:56.516 [info] <0.146.0>@group_sup:init:79 ######## group_sup
2017-05-20 10:59:56.517 [info] <0.148.0>@client_sup:init:65 ######## client_sup
2017-05-20 10:59:56.518 [info] <0.31.0> Application chat started on node 'yangwei@brucedeiMac.local'
2017-05-20 11:00:25.995 [info] <0.150.0>@tcp_acceptor:process_Client_Socket:181 #Port<0.3744>
2017-05-20 11:00:25.998 [info] <0.150.0>@tcp_acceptor:process_Client_Socket:189 
2017-05-20 11:00:25.998 [info] <0.156.0>@tcp_agent:wait_socket:93 wait_socket: #Port<0.3744>
2017-05-20 11:00:27.079 [info] <0.156.0>@tcp_agent:handle_info:214 *******************************************
2017-05-20 11:00:27.082 [info] <0.156.0>@tcp_agent:handle_info:218 <<"1">>
2017-05-20 11:00:27.082 [info] <0.156.0>@tcp_agent:handle_info:219 #{<<"cmd">> => <<"1">>,<<"password">> => <<"iyw">>,<<"username">> => <<"zst">>}
2017-05-20 11:00:27.082 [info] <0.156.0>@tcp_agent:handle_info:222 ####
2017-05-20 11:00:27.082 [info] <0.156.0>@tcp_agent:wait_auth:97 
2017-05-20 11:00:27.083 [info] <0.156.0>@tcp_agent:wait_auth:99 1
2017-05-20 11:00:27.083 [info] <0.156.0>@mod_mnesia:add_new_client:43 {client,1,"zst","iyw",[],[]}
2017-05-20 11:00:27.083 [info] <0.156.0>@mod_mnesia:add_new_client:49 {aborted,{bad_type,{client,1,"zst","iyw",[],[]}}}
2017-05-20 11:00:27.084 [info] <0.148.0>@client:start_link:45 ```````````````````````````````````````
2017-05-20 11:00:27.084 [info] <0.158.0>@client:init:67 ```````````````````````````````````````
2017-05-20 11:00:27.084 [info] <0.156.0>@tcp_agent:wait_auth:115 $$$$$$$$$$$$$$ end
2017-05-20 11:04:56.972 [info] <0.31.0> Application mnesia exited with reason: stopped
2017-05-20 11:05:07.298 [info] <0.31.0> Application mnesia started on node 'yangwei@brucedeiMac.local'
2017-05-20 11:08:30.504 [info] <0.31.0> Application lager started on node 'yangwei@brucedeiMac.local'
2017-05-20 11:08:30.504 [info] <0.100.0>@chat_sup:init:26 ###############   Begin  ##############
2017-05-20 11:08:30.819 [info] <0.31.0> Application mnesia started on node 'yangwei@brucedeiMac.local'
2017-05-20 11:08:30.822 [info] <0.101.0>@mod_control_sup:init:25 ok 
2017-05-20 11:08:30.822 [info] <0.101.0>@control_sup:init:63 
2017-05-20 11:08:30.823 [info] <0.147.0>@id_generator:init:30 ########### id_generator
2017-05-20 11:08:30.825 [info] <0.148.0>@group_sup:init:70 [] 
2017-05-20 11:08:30.825 [info] <0.148.0>@group_sup:init:77 [] 
2017-05-20 11:08:30.825 [info] <0.148.0>@group_sup:init:79 ######## group_sup
2017-05-20 11:08:30.826 [info] <0.150.0>@client_sup:init:65 ######## client_sup
2017-05-20 11:08:30.827 [info] <0.31.0> Application chat started on node 'yangwei@brucedeiMac.local'
2017-05-20 11:08:38.737 [info] <0.64.0>@test_mnesia:add_new_client:182 {aborted,{bad_type,{client,100,"zst","iyw",[],[]}}}
2017-05-20 11:09:07.321 [info] <0.31.0> Application lager started on node 'yangwei@brucedeiMac.local'
2017-05-20 11:09:07.321 [info] <0.98.0>@chat_sup:init:26 ###############   Begin  ##############
2017-05-20 11:09:07.684 [info] <0.31.0> Application mnesia started on node 'yangwei@brucedeiMac.local'
2017-05-20 11:09:07.687 [info] <0.99.0>@mod_control_sup:init:25 ok 
2017-05-20 11:09:07.688 [info] <0.99.0>@control_sup:init:63 
2017-05-20 11:09:07.688 [info] <0.145.0>@id_generator:init:30 ########### id_generator
2017-05-20 11:09:07.693 [info] <0.146.0>@group_sup:init:70 [] 
2017-05-20 11:09:07.693 [info] <0.146.0>@group_sup:init:77 [] 
2017-05-20 11:09:07.693 [info] <0.146.0>@group_sup:init:79 ######## group_sup
2017-05-20 11:09:07.694 [info] <0.148.0>@client_sup:init:65 ######## client_sup
2017-05-20 11:09:07.695 [info] <0.31.0> Application chat started on node 'yangwei@brucedeiMac.local'
2017-05-20 11:09:19.238 [info] <0.62.0>@test_mnesia:add_new_client:182 {aborted,{bad_type,{client,100,"zst","iyw","lala","fasdfa"}}}
2017-05-20 11:25:55.693 [info] <0.31.0> Application lager started on node 'yangwei@brucedeiMac.local'
2017-05-20 11:25:55.693 [info] <0.98.0>@chat_sup:init:26 ###############   Begin  ##############
2017-05-20 11:25:56.081 [info] <0.31.0> Application mnesia started on node 'yangwei@brucedeiMac.local'
2017-05-20 11:25:56.084 [info] <0.99.0>@mod_control_sup:init:25 ok 
2017-05-20 11:25:56.084 [info] <0.99.0>@control_sup:init:63 
2017-05-20 11:25:56.085 [info] <0.145.0>@id_generator:init:30 ########### id_generator
2017-05-20 11:25:56.091 [info] <0.146.0>@group_sup:init:70 [] 
2017-05-20 11:25:56.091 [info] <0.146.0>@group_sup:init:77 [] 
2017-05-20 11:25:56.091 [info] <0.146.0>@group_sup:init:79 ######## group_sup
2017-05-20 11:25:56.092 [info] <0.148.0>@client_sup:init:65 ######## client_sup
2017-05-20 11:25:56.093 [info] <0.31.0> Application chat started on node 'yangwei@brucedeiMac.local'
2017-05-20 11:26:30.388 [info] <0.62.0>@test_mnesia:add_new_client:182 {aborted,{bad_type,{client,100,"zst","iyw","lala","fasdfa"}}}
2017-05-20 11:27:24.790 [info] <0.31.0> Application lager started on node 'yangwei@brucedeiMac.local'
2017-05-20 11:27:24.790 [info] <0.98.0>@chat_sup:init:26 ###############   Begin  ##############
2017-05-20 11:27:25.163 [info] <0.31.0> Application mnesia started on node 'yangwei@brucedeiMac.local'
2017-05-20 11:27:25.167 [info] <0.99.0>@mod_control_sup:init:25 ok 
2017-05-20 11:27:25.167 [info] <0.99.0>@control_sup:init:63 
2017-05-20 11:27:25.168 [info] <0.145.0>@id_generator:init:30 ########### id_generator
2017-05-20 11:27:25.173 [info] <0.146.0>@group_sup:init:70 [] 
2017-05-20 11:27:25.173 [info] <0.146.0>@group_sup:init:77 [] 
2017-05-20 11:27:25.173 [info] <0.146.0>@group_sup:init:79 ######## group_sup
2017-05-20 11:27:25.174 [info] <0.148.0>@client_sup:init:65 ######## client_sup
2017-05-20 11:27:25.176 [info] <0.31.0> Application chat started on node 'yangwei@brucedeiMac.local'
2017-05-20 11:27:36.960 [info] <0.62.0>@test_mnesia:add_shop_item:190 {atomic,ok}
2017-05-20 11:27:50.931 [info] <0.62.0>@test_mnesia:add_new_client:182 {aborted,{bad_type,{client,100,"zst","iyw","lala","fasdfa"}}}
2017-05-20 11:28:28.703 [info] <0.31.0> Application lager started on node 'yangwei@brucedeiMac.local'
2017-05-20 11:28:28.703 [info] <0.101.0>@chat_sup:init:26 ###############   Begin  ##############
2017-05-20 11:28:29.027 [info] <0.31.0> Application mnesia started on node 'yangwei@brucedeiMac.local'
2017-05-20 11:28:29.029 [info] <0.102.0>@mod_control_sup:init:25 ok 
2017-05-20 11:28:29.029 [info] <0.102.0>@control_sup:init:63 
2017-05-20 11:28:29.030 [info] <0.148.0>@id_generator:init:30 ########### id_generator
2017-05-20 11:28:29.036 [info] <0.149.0>@group_sup:init:70 [] 
2017-05-20 11:28:29.036 [info] <0.149.0>@group_sup:init:77 [] 
2017-05-20 11:28:29.036 [info] <0.149.0>@group_sup:init:79 ######## group_sup
2017-05-20 11:28:29.037 [info] <0.151.0>@client_sup:init:65 ######## client_sup
2017-05-20 11:28:29.039 [info] <0.31.0> Application chat started on node 'yangwei@brucedeiMac.local'
2017-05-20 11:28:36.564 [info] <0.65.0>@test_mnesia:add_new_client:182 {aborted,{bad_type,{client,"100","zst","iyw","lala","fasdfa"}}}
2017-05-20 11:35:55.310 [info] <0.31.0> Application lager started on node yangwei@brucedeiMac
2017-05-20 11:35:55.355 [info] <0.98.0>@chat_sup:init:26 ###############   Begin  ##############
2017-05-20 11:35:55.640 [info] <0.31.0> Application mnesia started on node yangwei@brucedeiMac
2017-05-20 11:35:57.641 [info] <0.99.0>@mod_control_sup:init:25 {timeout,[client,group,ids]} 
2017-05-20 11:35:57.676 [info] <0.99.0>@control_sup:init:63 
2017-05-20 11:35:57.687 [info] <0.121.0>@id_generator:init:30 ########### id_generator
2017-05-20 11:35:57.729 [info] <0.122.0>@group_sup:init:70 [] 
2017-05-20 11:35:57.729 [info] <0.122.0>@group_sup:init:77 [] 
2017-05-20 11:35:57.729 [info] <0.122.0>@group_sup:init:79 ######## group_sup
2017-05-20 11:35:57.739 [info] <0.124.0>@client_sup:init:65 ######## client_sup
2017-05-20 11:35:57.748 [info] <0.31.0> Application chat started on node yangwei@brucedeiMac
2017-05-20 11:36:51.768 [info] <0.62.0>@test_mnesia:add_new_client:182 {aborted,{bad_type,{client,"100","zst","iyw","lala","fasdfa"}}}
2017-05-20 11:41:10.459 [info] <0.126.0>@tcp_acceptor:process_Client_Socket:181 #Port<0.3682>
2017-05-20 11:41:10.486 [info] <0.126.0>@tcp_acceptor:process_Client_Socket:189 
2017-05-20 11:41:10.486 [info] <0.130.0>@tcp_agent:wait_socket:93 wait_socket: #Port<0.3682>
2017-05-20 11:41:11.493 [info] <0.130.0>@tcp_agent:handle_info:214 *******************************************
2017-05-20 11:41:11.538 [info] <0.130.0>@tcp_agent:handle_info:218 <<"1">>
2017-05-20 11:41:11.538 [info] <0.130.0>@tcp_agent:handle_info:219 #{<<"cmd">> => <<"1">>,<<"password">> => <<"iyw">>,<<"username">> => <<"zst">>}
2017-05-20 11:41:11.538 [info] <0.130.0>@tcp_agent:handle_info:222 ####
2017-05-20 11:41:11.538 [info] <0.130.0>@tcp_agent:wait_auth:97 
2017-05-20 11:41:11.539 [info] <0.130.0>@tcp_agent:wait_auth:99 1
2017-05-20 11:41:11.547 [info] <0.130.0>@mod_mnesia:add_new_client:43 {client,1,"zst","iyw",[],[]}
2017-05-20 11:41:11.547 [info] <0.130.0>@mod_mnesia:add_new_client:49 {aborted,{bad_type,{client,1,"zst","iyw",[],[]}}}
2017-05-20 11:41:11.566 [info] <0.124.0>@client:start_link:45 ```````````````````````````````````````
2017-05-20 11:41:11.566 [info] <0.132.0>@client:init:67 ```````````````````````````````````````
2017-05-20 11:41:11.566 [info] <0.130.0>@tcp_agent:wait_auth:115 $$$$$$$$$$$$$$ end
2017-05-20 11:46:30.483 [info] <0.62.0>@test_mnesia:add_new_client:182 {aborted,{bad_type,{client,"100","zst","iyw","lala","fasdfa"}}}
2017-05-20 11:46:51.241 [info] <0.62.0>@test_mnesia:add_shop_item:190 {aborted,{no_exists,shop}}
2017-05-20 11:47:54.023 [info] <0.31.0> Application lager started on node yangwei@brucedeiMac
2017-05-20 11:47:54.023 [info] <0.98.0>@chat_sup:init:26 ###############   Begin  ##############
2017-05-20 11:47:54.076 [info] <0.31.0> Application mnesia started on node yangwei@brucedeiMac
2017-05-20 11:47:56.077 [info] <0.99.0>@mod_control_sup:init:25 load tables:{timeout,[client,group,ids]} 
2017-05-20 11:47:56.084 [info] <0.99.0>@control_sup:init:63 
2017-05-20 11:47:56.085 [info] <0.121.0>@id_generator:init:30 ########### id_generator
2017-05-20 11:47:56.090 [info] <0.122.0>@group_sup:init:70 [] 
2017-05-20 11:47:56.090 [info] <0.122.0>@group_sup:init:77 [] 
2017-05-20 11:47:56.090 [info] <0.122.0>@group_sup:init:79 ######## group_sup
2017-05-20 11:47:56.090 [info] <0.124.0>@client_sup:init:65 ######## client_sup
2017-05-20 11:47:56.092 [info] <0.31.0> Application chat started on node yangwei@brucedeiMac
2017-05-20 11:48:05.327 [info] <0.62.0>@test_mnesia:add_new_client:182 {aborted,{bad_type,{client,1000,"zst","iyw",[],[]}}}
2017-05-20 11:55:55.290 [info] <0.31.0> Application lager started on node yangwei@brucedeiMac
2017-05-20 11:55:55.290 [info] <0.98.0>@chat_sup:init:26 ###############   Begin  ##############
2017-05-20 11:55:55.344 [info] <0.31.0> Application mnesia started on node yangwei@brucedeiMac
2017-05-20 11:55:57.345 [info] <0.99.0>@mod_control_sup:init:25 load tables:{timeout,[client,group,ids]} 
2017-05-20 11:55:57.352 [info] <0.99.0>@control_sup:init:63 
2017-05-20 11:55:57.353 [info] <0.121.0>@id_generator:init:30 ########### id_generator
2017-05-20 11:55:57.358 [info] <0.122.0>@group_sup:init:70 [] 
2017-05-20 11:55:57.358 [info] <0.122.0>@group_sup:init:77 [] 
2017-05-20 11:55:57.358 [info] <0.122.0>@group_sup:init:79 ######## group_sup
2017-05-20 11:55:57.359 [info] <0.124.0>@client_sup:init:65 ######## client_sup
2017-05-20 11:55:57.360 [info] <0.31.0> Application chat started on node yangwei@brucedeiMac
2017-05-20 11:58:27.763 [info] <0.31.0> Application lager started on node yangwei@brucedeiMac
2017-05-20 11:58:27.763 [info] <0.98.0>@chat_sup:init:26 ###############   Begin  ##############
2017-05-20 11:58:27.818 [info] <0.31.0> Application mnesia started on node yangwei@brucedeiMac
2017-05-20 11:58:29.818 [info] <0.99.0>@mod_control_sup:init:25 load tables:{timeout,[client,group,ids]} 
2017-05-20 11:58:29.827 [info] <0.99.0>@control_sup:init:63 
2017-05-20 11:58:29.828 [info] <0.121.0>@id_generator:init:30 ########### id_generator
2017-05-20 11:58:29.833 [info] <0.122.0>@group_sup:init:70 [] 
2017-05-20 11:58:29.833 [info] <0.122.0>@group_sup:init:77 [] 
2017-05-20 11:58:29.833 [info] <0.122.0>@group_sup:init:79 ######## group_sup
2017-05-20 11:58:29.833 [info] <0.124.0>@client_sup:init:65 ######## client_sup
2017-05-20 11:58:29.835 [info] <0.31.0> Application chat started on node yangwei@brucedeiMac
2017-05-20 11:59:14.394 [info] <0.31.0> Application lager started on node yangwei@brucedeiMac
2017-05-20 11:59:14.394 [info] <0.98.0>@chat_sup:init:26 ###############   Begin  ##############
2017-05-20 11:59:14.448 [info] <0.31.0> Application mnesia started on node yangwei@brucedeiMac
2017-05-20 11:59:16.449 [info] <0.99.0>@mod_control_sup:init:25 load tables:{timeout,[client,group,ids]} 
2017-05-20 11:59:16.449 [info] <0.99.0>@mod_control_sup:init:28 [client,group,ids]
2017-05-20 11:59:16.456 [info] <0.99.0>@control_sup:init:63 
2017-05-20 11:59:16.457 [info] <0.121.0>@id_generator:init:30 ########### id_generator
2017-05-20 11:59:16.462 [info] <0.122.0>@group_sup:init:70 [] 
2017-05-20 11:59:16.462 [info] <0.122.0>@group_sup:init:77 [] 
2017-05-20 11:59:16.462 [info] <0.122.0>@group_sup:init:79 ######## group_sup
2017-05-20 11:59:16.463 [info] <0.124.0>@client_sup:init:65 ######## client_sup
2017-05-20 11:59:16.464 [info] <0.31.0> Application chat started on node yangwei@brucedeiMac
2017-05-20 12:01:40.145 [info] <0.31.0> Application lager started on node yangwei@brucedeiMac
2017-05-20 12:01:40.145 [info] <0.98.0>@chat_sup:init:26 ###############   Begin  ##############
2017-05-20 12:01:40.201 [info] <0.31.0> Application mnesia started on node yangwei@brucedeiMac
2017-05-20 12:01:40.207 [info] <0.99.0>@mod_control_sup:init:24 load tables:ok 
2017-05-20 12:01:40.207 [info] <0.99.0>@control_sup:init:63 
2017-05-20 12:01:40.208 [info] <0.121.0>@id_generator:init:30 ########### id_generator
2017-05-20 12:01:40.214 [info] <0.122.0>@group_sup:init:70 [] 
2017-05-20 12:01:40.214 [info] <0.122.0>@group_sup:init:77 [] 
2017-05-20 12:01:40.214 [info] <0.122.0>@group_sup:init:79 ######## group_sup
2017-05-20 12:01:40.215 [info] <0.124.0>@client_sup:init:65 ######## client_sup
2017-05-20 12:01:40.216 [info] <0.31.0> Application chat started on node yangwei@brucedeiMac
2017-05-20 12:01:53.839 [info] <0.126.0>@tcp_acceptor:process_Client_Socket:181 #Port<0.3682>
2017-05-20 12:01:53.841 [info] <0.126.0>@tcp_acceptor:process_Client_Socket:189 
2017-05-20 12:01:53.841 [info] <0.128.0>@tcp_agent:wait_socket:93 wait_socket: #Port<0.3682>
2017-05-20 12:01:54.869 [info] <0.128.0>@tcp_agent:handle_info:214 *******************************************
2017-05-20 12:01:54.872 [info] <0.128.0>@tcp_agent:handle_info:218 <<"1">>
2017-05-20 12:01:54.872 [info] <0.128.0>@tcp_agent:handle_info:219 #{<<"cmd">> => <<"1">>,<<"password">> => <<"iyw">>,<<"username">> => <<"zst">>}
2017-05-20 12:01:54.872 [info] <0.128.0>@tcp_agent:handle_info:222 ####
2017-05-20 12:01:54.872 [info] <0.128.0>@tcp_agent:wait_auth:97 {register,"zst","iyw"}
2017-05-20 12:01:54.873 [info] <0.128.0>@tcp_agent:wait_auth:99 1
2017-05-20 12:01:54.873 [info] <0.128.0>@mod_mnesia:add_new_client:41 {client,1,"zst","iyw",[],[]}
2017-05-20 12:01:54.873 [info] <0.128.0>@mod_mnesia:add_new_client:47 {atomic,ok}
2017-05-20 12:01:54.874 [info] <0.124.0>@client:start_link:45 ```````````````````````````````````````
2017-05-20 12:01:54.874 [info] <0.130.0>@client:init:67 ```````````````````````````````````````
2017-05-20 12:01:54.874 [info] <0.128.0>@tcp_agent:wait_auth:115 $$$$$$$$$$$$$$ end
2017-05-20 12:03:37.310 [info] <0.126.0>@tcp_acceptor:process_Client_Socket:181 #Port<0.3701>
2017-05-20 12:03:37.310 [info] <0.126.0>@tcp_acceptor:process_Client_Socket:189 
2017-05-20 12:03:37.310 [info] <0.131.0>@tcp_agent:wait_socket:93 wait_socket: #Port<0.3701>
2017-05-20 12:03:39.116 [info] <0.131.0>@tcp_agent:handle_info:214 *******************************************
2017-05-20 12:03:39.116 [info] <0.131.0>@tcp_agent:handle_info:218 <<"1">>
2017-05-20 12:03:39.116 [info] <0.131.0>@tcp_agent:handle_info:219 #{<<"cmd">> => <<"1">>,<<"password">> => <<"ist">>,<<"username">> => <<"yw">>}
2017-05-20 12:03:39.116 [info] <0.131.0>@tcp_agent:handle_info:222 ####
2017-05-20 12:03:39.116 [info] <0.131.0>@tcp_agent:wait_auth:97 {register,"yw","ist"}
2017-05-20 12:03:39.117 [info] <0.131.0>@tcp_agent:wait_auth:99 2
2017-05-20 12:03:39.117 [info] <0.131.0>@mod_mnesia:add_new_client:41 {client,2,"yw","ist",[],[]}
2017-05-20 12:03:39.117 [info] <0.131.0>@mod_mnesia:add_new_client:47 {atomic,ok}
2017-05-20 12:03:39.117 [info] <0.124.0>@client:start_link:45 ```````````````````````````````````````
2017-05-20 12:03:39.117 [info] <0.132.0>@client:init:67 ```````````````````````````````````````
2017-05-20 12:03:39.117 [info] <0.131.0>@tcp_agent:wait_auth:115 $$$$$$$$$$$$$$ end
2017-05-20 14:54:57.879 [info] <0.31.0> Application lager started on node yangwei@brucedeiMac
2017-05-20 14:54:57.879 [info] <0.98.0>@chat_sup:init:26 ###############   Begin  ##############
2017-05-20 14:54:57.935 [info] <0.31.0> Application mnesia started on node yangwei@brucedeiMac
2017-05-20 14:54:57.943 [info] <0.99.0>@mod_control_sup:init:24 load tables:ok 
2017-05-20 14:54:57.943 [info] <0.99.0>@control_sup:init:63 
2017-05-20 14:54:57.944 [info] <0.121.0>@id_generator:init:30 ########### id_generator
2017-05-20 14:54:57.949 [info] <0.122.0>@group_sup:init:70 [] 
2017-05-20 14:54:57.949 [info] <0.122.0>@group_sup:init:77 [] 
2017-05-20 14:54:57.949 [info] <0.122.0>@group_sup:init:79 ######## group_sup
2017-05-20 14:54:57.950 [info] <0.124.0>@client_sup:init:65 ######## client_sup
2017-05-20 14:54:57.951 [info] <0.31.0> Application chat started on node yangwei@brucedeiMac
2017-05-20 15:12:39.073 [info] <0.31.0> Application lager started on node yangwei@brucedeiMac
2017-05-20 15:12:39.073 [info] <0.98.0>@chat_sup:init:26 ###############   Begin  ##############
2017-05-20 15:12:39.128 [info] <0.31.0> Application mnesia started on node yangwei@brucedeiMac
2017-05-20 15:12:39.136 [info] <0.99.0>@mod_control_sup:init:24 load tables:ok 
2017-05-20 15:12:39.136 [info] <0.99.0>@control_sup:init:63 
2017-05-20 15:12:39.137 [info] <0.121.0>@id_generator:init:30 ########### id_generator
2017-05-20 15:12:39.142 [info] <0.122.0>@group_sup:init:70 [] 
2017-05-20 15:12:39.142 [info] <0.122.0>@group_sup:init:77 [] 
2017-05-20 15:12:39.142 [info] <0.122.0>@group_sup:init:79 ######## group_sup
2017-05-20 15:12:39.143 [info] <0.124.0>@client_sup:init:65 ######## client_sup
2017-05-20 15:12:39.144 [info] <0.31.0> Application chat started on node yangwei@brucedeiMac
2017-05-20 15:12:51.614 [info] <0.126.0>@tcp_acceptor:process_Client_Socket:181 #Port<0.3682>
2017-05-20 15:12:51.617 [info] <0.126.0>@tcp_acceptor:process_Client_Socket:189 
2017-05-20 15:12:51.617 [info] <0.128.0>@tcp_agent:wait_socket:92 wait_socket: #Port<0.3682>
2017-05-20 15:12:56.490 [info] <0.128.0>@tcp_agent:handle_info:215 *******************************************
2017-05-20 15:12:56.532 [info] <0.128.0>@tcp_agent:handle_info:219 <<"1">>
2017-05-20 15:12:56.532 [info] <0.128.0>@tcp_agent:handle_info:220 #{<<"cmd">> => <<"1">>,<<"password">> => <<"iyw">>,<<"username">> => <<"zst">>}
2017-05-20 15:12:56.532 [info] <0.128.0>@tcp_agent:handle_info:223 ####
2017-05-20 15:12:56.532 [info] <0.128.0>@tcp_agent:wait_auth:96 {register,"zst","iyw"}
2017-05-20 15:12:56.532 [info] <0.128.0>@tcp_agent:wait_auth:98 1
2017-05-20 15:12:56.532 [info] <0.128.0>@mod_mnesia:add_new_client:41 {client,1,"zst","iyw",[],[]}
2017-05-20 15:12:56.532 [info] <0.128.0>@mod_mnesia:add_new_client:47 {atomic,ok}
2017-05-20 15:12:56.534 [info] <0.124.0>@client:start_link:45 ```````````````````````````````````````
2017-05-20 15:12:56.534 [info] <0.130.0>@client:init:67 ```````````````````````````````````````
2017-05-20 15:12:56.534 [info] <0.128.0>@tcp_agent:wait_auth:114 success register!
2017-05-20 15:12:56.534 [error] <0.130.0> gen_server <0.130.0> terminated with reason: {badmap,{state,undefined,undefined,undefined}} in client:handle_cast/2 line 104
2017-05-20 15:12:56.627 [error] <0.130.0> CRASH REPORT Process <0.130.0> with 0 neighbours exited with reason: {badmap,{state,undefined,undefined,undefined}} in client:handle_cast/2 line 104 in gen_server:terminate/7 line 812
2017-05-20 15:12:56.628 [info] <0.124.0>@client:start_link:45 ```````````````````````````````````````
2017-05-20 15:12:56.628 [info] <0.131.0>@client:init:67 ```````````````````````````````````````
2017-05-20 15:12:56.628 [error] <0.124.0> Supervisor client_sup had child 1 started with client:start_link() at <0.130.0> exit with reason {badmap,{state,undefined,undefined,undefined}} in client:handle_cast/2 line 104 in context child_terminated
2017-05-20 15:20:48.180 [info] <0.31.0> Application lager started on node yangwei@brucedeiMac
2017-05-20 15:20:48.180 [info] <0.98.0>@chat_sup:init:26 ###############   Begin  ##############
2017-05-20 15:20:48.233 [info] <0.31.0> Application mnesia started on node yangwei@brucedeiMac
2017-05-20 15:20:48.240 [info] <0.99.0>@mod_control_sup:init:24 load tables:ok 
2017-05-20 15:20:48.240 [info] <0.99.0>@control_sup:init:63 
2017-05-20 15:20:48.241 [info] <0.121.0>@id_generator:init:30 ########### id_generator
2017-05-20 15:20:48.246 [info] <0.122.0>@group_sup:init:70 [] 
2017-05-20 15:20:48.246 [info] <0.122.0>@group_sup:init:77 [] 
2017-05-20 15:20:48.246 [info] <0.122.0>@group_sup:init:79 ######## group_sup
2017-05-20 15:20:48.247 [info] <0.124.0>@client_sup:init:65 ######## client_sup
2017-05-20 15:20:48.248 [info] <0.31.0> Application chat started on node yangwei@brucedeiMac
2017-05-20 15:20:51.475 [info] <0.126.0>@tcp_acceptor:process_Client_Socket:181 #Port<0.3682>
2017-05-20 15:20:51.478 [info] <0.126.0>@tcp_acceptor:process_Client_Socket:189 
2017-05-20 15:20:51.478 [info] <0.128.0>@tcp_agent:wait_socket:92 wait_socket: #Port<0.3682>
2017-05-20 15:20:52.685 [info] <0.128.0>@tcp_agent:handle_info:215 *******************************************
2017-05-20 15:20:52.691 [info] <0.128.0>@tcp_agent:handle_info:219 <<"1">>
2017-05-20 15:20:52.691 [info] <0.128.0>@tcp_agent:handle_info:220 #{<<"cmd">> => <<"1">>,<<"password">> => <<"iyw">>,<<"username">> => <<"zst">>}
2017-05-20 15:20:52.691 [info] <0.128.0>@tcp_agent:handle_info:223 ####
2017-05-20 15:20:52.691 [info] <0.128.0>@tcp_agent:wait_auth:96 {register,"zst","iyw"}
2017-05-20 15:20:52.691 [info] <0.128.0>@tcp_agent:wait_auth:98 1
2017-05-20 15:20:52.691 [info] <0.128.0>@mod_mnesia:add_new_client:41 {client,1,"zst","iyw",[],[]}
2017-05-20 15:20:52.691 [info] <0.128.0>@mod_mnesia:add_new_client:47 {atomic,ok}
2017-05-20 15:20:52.693 [info] <0.124.0>@client:start_link:45 ```````````````````````````````````````
2017-05-20 15:20:52.693 [info] <0.130.0>@client:init:67 ```````````````````````````````````````
2017-05-20 15:20:52.693 [info] <0.128.0>@tcp_agent:wait_auth:114 success register!
2017-05-20 15:20:52.693 [info] <0.130.0>@client:handle_cast:104 update state
2017-05-20 15:20:52.693 [error] <0.130.0> gen_server <0.130.0> terminated with reason: {badmap,{state,undefined,undefined,undefined}} in client:handle_cast/2 line 105
2017-05-20 15:20:52.777 [error] <0.130.0> CRASH REPORT Process <0.130.0> with 0 neighbours exited with reason: {badmap,{state,undefined,undefined,undefined}} in client:handle_cast/2 line 105 in gen_server:terminate/7 line 812
2017-05-20 15:20:52.777 [info] <0.124.0>@client:start_link:45 ```````````````````````````````````````
2017-05-20 15:20:52.777 [info] <0.131.0>@client:init:67 ```````````````````````````````````````
2017-05-20 15:20:52.778 [error] <0.124.0> Supervisor client_sup had child 1 started with client:start_link() at <0.130.0> exit with reason {badmap,{state,undefined,undefined,undefined}} in client:handle_cast/2 line 105 in context child_terminated
2017-05-20 15:21:31.706 [info] <0.31.0> Application lager started on node yangwei@brucedeiMac
2017-05-20 15:21:31.706 [info] <0.98.0>@chat_sup:init:26 ###############   Begin  ##############
2017-05-20 15:21:31.759 [info] <0.31.0> Application mnesia started on node yangwei@brucedeiMac
2017-05-20 15:21:31.766 [info] <0.99.0>@mod_control_sup:init:24 load tables:ok 
2017-05-20 15:21:31.766 [info] <0.99.0>@control_sup:init:63 
2017-05-20 15:21:31.766 [info] <0.121.0>@id_generator:init:30 ########### id_generator
2017-05-20 15:21:31.772 [info] <0.122.0>@group_sup:init:70 [] 
2017-05-20 15:21:31.772 [info] <0.122.0>@group_sup:init:77 [] 
2017-05-20 15:21:31.772 [info] <0.122.0>@group_sup:init:79 ######## group_sup
2017-05-20 15:21:31.773 [info] <0.124.0>@client_sup:init:65 ######## client_sup
2017-05-20 15:21:31.774 [info] <0.31.0> Application chat started on node yangwei@brucedeiMac
2017-05-20 15:21:37.558 [info] <0.126.0>@tcp_acceptor:process_Client_Socket:181 #Port<0.3682>
2017-05-20 15:21:37.561 [info] <0.126.0>@tcp_acceptor:process_Client_Socket:189 
2017-05-20 15:21:37.561 [info] <0.128.0>@tcp_agent:wait_socket:92 wait_socket: #Port<0.3682>
2017-05-20 15:21:38.824 [info] <0.128.0>@tcp_agent:handle_info:215 *******************************************
2017-05-20 15:21:38.828 [info] <0.128.0>@tcp_agent:handle_info:219 <<"1">>
2017-05-20 15:21:38.828 [info] <0.128.0>@tcp_agent:handle_info:220 #{<<"cmd">> => <<"1">>,<<"password">> => <<"iyw">>,<<"username">> => <<"zst">>}
2017-05-20 15:21:38.828 [info] <0.128.0>@tcp_agent:handle_info:223 ####
2017-05-20 15:21:38.828 [info] <0.128.0>@tcp_agent:wait_auth:96 {register,"zst","iyw"}
2017-05-20 15:21:38.828 [info] <0.128.0>@tcp_agent:wait_auth:98 1
2017-05-20 15:21:38.828 [info] <0.128.0>@mod_mnesia:add_new_client:41 {client,1,"zst","iyw",[],[]}
2017-05-20 15:21:38.828 [info] <0.128.0>@mod_mnesia:add_new_client:47 {atomic,ok}
2017-05-20 15:21:38.829 [info] <0.124.0>@client:start_link:45 ```````````````````````````````````````
2017-05-20 15:21:38.829 [info] <0.130.0>@client:init:67 ```````````````````````````````````````
2017-05-20 15:21:38.830 [info] <0.128.0>@tcp_agent:wait_auth:114 success register!
2017-05-20 15:21:38.830 [info] <0.130.0>@client:handle_cast:104 update state
2017-05-20 15:22:05.854 [info] <0.126.0>@tcp_acceptor:process_Client_Socket:181 #Port<0.3701>
2017-05-20 15:22:05.854 [info] <0.126.0>@tcp_acceptor:process_Client_Socket:189 
2017-05-20 15:22:05.854 [info] <0.131.0>@tcp_agent:wait_socket:92 wait_socket: #Port<0.3701>
2017-05-20 15:22:07.401 [info] <0.131.0>@tcp_agent:handle_info:215 *******************************************
2017-05-20 15:22:07.401 [info] <0.131.0>@tcp_agent:handle_info:219 <<"1">>
2017-05-20 15:22:07.401 [info] <0.131.0>@tcp_agent:handle_info:220 #{<<"cmd">> => <<"1">>,<<"password">> => <<"ist">>,<<"username">> => <<"yw">>}
2017-05-20 15:22:07.401 [info] <0.131.0>@tcp_agent:handle_info:223 ####
2017-05-20 15:22:07.401 [info] <0.131.0>@tcp_agent:wait_auth:96 {register,"yw","ist"}
2017-05-20 15:22:07.401 [info] <0.131.0>@tcp_agent:wait_auth:98 2
2017-05-20 15:22:07.401 [info] <0.131.0>@mod_mnesia:add_new_client:41 {client,2,"yw","ist",[],[]}
2017-05-20 15:22:07.401 [info] <0.131.0>@mod_mnesia:add_new_client:47 {atomic,ok}
2017-05-20 15:22:07.401 [info] <0.124.0>@client:start_link:45 ```````````````````````````````````````
2017-05-20 15:22:07.401 [info] <0.132.0>@client:init:67 ```````````````````````````````````````
2017-05-20 15:22:07.401 [info] <0.131.0>@tcp_agent:wait_auth:114 success register!
2017-05-20 15:22:07.401 [info] <0.132.0>@client:handle_cast:104 update state
2017-05-20 15:22:51.391 [info] <0.128.0>@tcp_agent:handle_info:215 *******************************************
2017-05-20 15:22:51.391 [info] <0.128.0>@tcp_agent:handle_info:219 <<"3">>
2017-05-20 15:22:51.391 [info] <0.128.0>@tcp_agent:handle_info:220 #{<<"cmd">> => <<"3">>,<<"data">> => <<"wo xi huan ni">>,<<"id">> => <<"1">>,<<"to_id">> => <<"2">>,<<"to_type">> => <<"1">>}
2017-05-20 15:22:51.391 [info] <0.128.0>@tcp_agent:handle_info:245 wait
2017-05-20 15:22:51.391 [info] <0.128.0>@tcp_agent:handle_info:253 error function_clause
2017-05-20 15:22:51.391 [info] <0.128.0>@tcp_agent:terminate:289 {error,not_found}
2017-05-20 15:22:51.391 [info] <0.128.0>@tcp_agent:terminate:290 tcp_agent process is termianted
2017-05-20 15:22:51.391 [error] <0.128.0> gen_fsm <0.128.0> in state wait_data terminated with reason: bad return value: ok
2017-05-20 15:22:51.435 [error] <0.128.0> CRASH REPORT Process <0.128.0> with 0 neighbours exited with reason: bad return value: ok in gen_fsm:terminate/7 line 559
2017-05-20 15:22:51.435 [error] <0.125.0> Supervisor tcp_agent_sup had child #Port<0.3682> started with {tcp_agent,start_link,undefined} at <0.128.0> exit with reason bad return value: ok in context child_terminated
2017-05-20 15:28:01.662 [info] <0.31.0> Application lager started on node yangwei@brucedeiMac
2017-05-20 15:28:01.662 [info] <0.98.0>@chat_sup:init:26 ###############   Begin  ##############
2017-05-20 15:28:01.768 [info] <0.31.0> Application mnesia started on node yangwei@brucedeiMac
2017-05-20 15:28:01.775 [info] <0.99.0>@mod_control_sup:init:24 load tables:ok 
2017-05-20 15:28:01.776 [info] <0.99.0>@control_sup:init:63 
2017-05-20 15:28:01.795 [info] <0.121.0>@id_generator:init:30 ########### id_generator
2017-05-20 15:28:01.829 [info] <0.122.0>@group_sup:init:70 [] 
2017-05-20 15:28:01.829 [info] <0.122.0>@group_sup:init:77 [] 
2017-05-20 15:28:01.829 [info] <0.122.0>@group_sup:init:79 ######## group_sup
2017-05-20 15:28:01.839 [info] <0.124.0>@client_sup:init:65 ######## client_sup
2017-05-20 15:28:01.841 [info] <0.31.0> Application chat started on node yangwei@brucedeiMac
2017-05-20 15:28:12.527 [info] <0.126.0>@tcp_acceptor:process_Client_Socket:181 #Port<0.3682>
2017-05-20 15:28:12.530 [info] <0.126.0>@tcp_acceptor:process_Client_Socket:189 
2017-05-20 15:28:12.530 [info] <0.128.0>@tcp_agent:wait_socket:92 wait_socket: #Port<0.3682>
2017-05-20 15:28:13.553 [info] <0.128.0>@tcp_agent:handle_info:215 *******************************************
2017-05-20 15:28:13.593 [info] <0.128.0>@tcp_agent:handle_info:219 <<"1">>
2017-05-20 15:28:13.593 [info] <0.128.0>@tcp_agent:handle_info:220 #{<<"cmd">> => <<"1">>,<<"password">> => <<"iyw">>,<<"username">> => <<"zst">>}
2017-05-20 15:28:13.593 [info] <0.128.0>@tcp_agent:handle_info:223 ####
2017-05-20 15:28:13.594 [info] <0.128.0>@tcp_agent:wait_auth:96 {register,"zst","iyw"}
2017-05-20 15:28:13.594 [info] <0.128.0>@tcp_agent:wait_auth:98 1
2017-05-20 15:28:13.594 [info] <0.128.0>@mod_mnesia:add_new_client:41 {client,1,"zst","iyw",[],[]}
2017-05-20 15:28:13.594 [info] <0.128.0>@mod_mnesia:add_new_client:47 {atomic,ok}
2017-05-20 15:28:13.613 [info] <0.124.0>@client:start_link:45 ```````````````````````````````````````
2017-05-20 15:28:13.613 [info] <0.130.0>@client:init:67 ```````````````````````````````````````
2017-05-20 15:28:13.613 [info] <0.128.0>@tcp_agent:wait_auth:114 success register!
2017-05-20 15:28:13.613 [info] <0.130.0>@client:handle_cast:104 update state
2017-05-20 15:28:21.264 [info] <0.126.0>@tcp_acceptor:process_Client_Socket:181 #Port<0.3701>
2017-05-20 15:28:21.265 [info] <0.126.0>@tcp_acceptor:process_Client_Socket:189 
2017-05-20 15:28:21.265 [info] <0.131.0>@tcp_agent:wait_socket:92 wait_socket: #Port<0.3701>
2017-05-20 15:28:22.238 [info] <0.131.0>@tcp_agent:handle_info:215 *******************************************
2017-05-20 15:28:22.238 [info] <0.131.0>@tcp_agent:handle_info:219 <<"1">>
2017-05-20 15:28:22.238 [info] <0.131.0>@tcp_agent:handle_info:220 #{<<"cmd">> => <<"1">>,<<"password">> => <<"ist">>,<<"username">> => <<"yw">>}
2017-05-20 15:28:22.238 [info] <0.131.0>@tcp_agent:handle_info:223 ####
2017-05-20 15:28:22.239 [info] <0.131.0>@tcp_agent:wait_auth:96 {register,"yw","ist"}
2017-05-20 15:28:22.239 [info] <0.131.0>@tcp_agent:wait_auth:98 2
2017-05-20 15:28:22.239 [info] <0.131.0>@mod_mnesia:add_new_client:41 {client,2,"yw","ist",[],[]}
2017-05-20 15:28:22.239 [info] <0.131.0>@mod_mnesia:add_new_client:47 {atomic,ok}
2017-05-20 15:28:22.239 [info] <0.124.0>@client:start_link:45 ```````````````````````````````````````
2017-05-20 15:28:22.239 [info] <0.132.0>@client:init:67 ```````````````````````````````````````
2017-05-20 15:28:22.239 [info] <0.131.0>@tcp_agent:wait_auth:114 success register!
2017-05-20 15:28:22.239 [info] <0.132.0>@client:handle_cast:104 update state
2017-05-20 15:28:35.615 [info] <0.128.0>@tcp_agent:handle_info:215 *******************************************
2017-05-20 15:28:35.615 [info] <0.128.0>@tcp_agent:handle_info:219 <<"3">>
2017-05-20 15:28:35.615 [info] <0.128.0>@tcp_agent:handle_info:220 #{<<"cmd">> => <<"3">>,<<"data">> => <<"wo xi huan ni">>,<<"id">> => <<"1">>,<<"to_id">> => <<"2">>,<<"to_type">> => <<"1">>}
2017-05-20 15:28:35.615 [info] <0.128.0>@tcp_agent:handle_info:245 {chat,"1","1","2","wo xi huan ni"}
2017-05-20 15:28:35.615 [info] <0.128.0>@tcp_agent:handle_info:246 {state,#Port<0.3682>,<0.130.0>}
2017-05-20 15:28:35.615 [info] <0.128.0>@tcp_agent:handle_info:254 error function_clause
2017-05-20 15:28:35.615 [info] <0.128.0>@tcp_agent:terminate:290 {error,not_found}
2017-05-20 15:28:35.615 [info] <0.128.0>@tcp_agent:terminate:291 tcp_agent process is termianted
2017-05-20 15:28:35.615 [error] <0.128.0> gen_fsm <0.128.0> in state wait_data terminated with reason: bad return value: ok
2017-05-20 15:28:35.667 [error] <0.128.0> CRASH REPORT Process <0.128.0> with 0 neighbours exited with reason: bad return value: ok in gen_fsm:terminate/7 line 559
2017-05-20 15:28:35.667 [error] <0.125.0> Supervisor tcp_agent_sup had child #Port<0.3682> started with {tcp_agent,start_link,undefined} at <0.128.0> exit with reason bad return value: ok in context child_terminated
2017-05-20 15:30:29.546 [info] <0.31.0> Application lager started on node yangwei@brucedeiMac
2017-05-20 15:30:29.546 [info] <0.98.0>@chat_sup:init:26 ###############   Begin  ##############
2017-05-20 15:30:29.599 [info] <0.31.0> Application mnesia started on node yangwei@brucedeiMac
2017-05-20 15:30:29.606 [info] <0.99.0>@mod_control_sup:init:24 load tables:ok 
2017-05-20 15:30:29.606 [info] <0.99.0>@control_sup:init:63 
2017-05-20 15:30:29.607 [info] <0.121.0>@id_generator:init:30 ########### id_generator
2017-05-20 15:30:29.612 [info] <0.122.0>@group_sup:init:70 [] 
2017-05-20 15:30:29.612 [info] <0.122.0>@group_sup:init:77 [] 
2017-05-20 15:30:29.612 [info] <0.122.0>@group_sup:init:79 ######## group_sup
2017-05-20 15:30:29.613 [info] <0.124.0>@client_sup:init:65 ######## client_sup
2017-05-20 15:30:29.614 [info] <0.31.0> Application chat started on node yangwei@brucedeiMac
2017-05-20 15:30:36.778 [info] <0.126.0>@tcp_acceptor:process_Client_Socket:181 #Port<0.3682>
2017-05-20 15:30:36.781 [info] <0.126.0>@tcp_acceptor:process_Client_Socket:189 
2017-05-20 15:30:36.781 [info] <0.128.0>@tcp_agent:wait_socket:92 wait_socket: #Port<0.3682>
2017-05-20 15:30:45.013 [info] <0.126.0>@tcp_acceptor:process_Client_Socket:181 #Port<0.3693>
2017-05-20 15:30:45.014 [info] <0.126.0>@tcp_acceptor:process_Client_Socket:189 
2017-05-20 15:30:45.014 [info] <0.129.0>@tcp_agent:wait_socket:92 wait_socket: #Port<0.3693>
2017-05-20 15:30:46.674 [info] <0.128.0>@tcp_agent:handle_info:215 *******************************************
2017-05-20 15:30:46.677 [info] <0.128.0>@tcp_agent:handle_info:219 <<"1">>
2017-05-20 15:30:46.677 [info] <0.128.0>@tcp_agent:handle_info:220 #{<<"cmd">> => <<"1">>,<<"password">> => <<"iyw">>,<<"username">> => <<"zst">>}
2017-05-20 15:30:46.677 [info] <0.128.0>@tcp_agent:handle_info:223 ####
2017-05-20 15:30:46.677 [info] <0.128.0>@tcp_agent:wait_auth:96 {register,"zst","iyw"}
2017-05-20 15:30:46.678 [info] <0.128.0>@tcp_agent:wait_auth:98 1
2017-05-20 15:30:46.678 [info] <0.128.0>@mod_mnesia:add_new_client:41 {client,1,"zst","iyw",[],[]}
2017-05-20 15:30:46.678 [info] <0.128.0>@mod_mnesia:add_new_client:47 {atomic,ok}
2017-05-20 15:30:46.679 [info] <0.124.0>@client:start_link:45 ```````````````````````````````````````
2017-05-20 15:30:46.679 [info] <0.131.0>@client:init:67 ```````````````````````````````````````
2017-05-20 15:30:46.679 [info] <0.128.0>@tcp_agent:wait_auth:114 success register!
2017-05-20 15:30:46.679 [info] <0.131.0>@client:handle_cast:104 update state
2017-05-20 15:30:48.103 [info] <0.129.0>@tcp_agent:handle_info:215 *******************************************
2017-05-20 15:30:48.103 [info] <0.129.0>@tcp_agent:handle_info:219 <<"1">>
2017-05-20 15:30:48.103 [info] <0.129.0>@tcp_agent:handle_info:220 #{<<"cmd">> => <<"1">>,<<"password">> => <<"ist">>,<<"username">> => <<"yw">>}
2017-05-20 15:30:48.103 [info] <0.129.0>@tcp_agent:handle_info:223 ####
2017-05-20 15:30:48.103 [info] <0.129.0>@tcp_agent:wait_auth:96 {register,"yw","ist"}
2017-05-20 15:30:48.103 [info] <0.129.0>@tcp_agent:wait_auth:98 2
2017-05-20 15:30:48.103 [info] <0.129.0>@mod_mnesia:add_new_client:41 {client,2,"yw","ist",[],[]}
2017-05-20 15:30:48.103 [info] <0.129.0>@mod_mnesia:add_new_client:47 {atomic,ok}
2017-05-20 15:30:48.103 [info] <0.124.0>@client:start_link:45 ```````````````````````````````````````
2017-05-20 15:30:48.103 [info] <0.132.0>@client:init:67 ```````````````````````````````````````
2017-05-20 15:30:48.103 [info] <0.129.0>@tcp_agent:wait_auth:114 success register!
2017-05-20 15:30:48.103 [info] <0.132.0>@client:handle_cast:104 update state
2017-05-20 15:31:06.610 [info] <0.128.0>@tcp_agent:handle_info:215 *******************************************
2017-05-20 15:31:06.610 [info] <0.128.0>@tcp_agent:handle_info:219 <<"3">>
2017-05-20 15:31:06.610 [info] <0.128.0>@tcp_agent:handle_info:220 #{<<"cmd">> => <<"3">>,<<"data">> => <<"wo xi huan ni">>,<<"id">> => <<"1">>,<<"to_id">> => <<"2">>,<<"to_type">> => <<"1">>}
2017-05-20 15:31:06.610 [info] <0.128.0>@tcp_agent:handle_info:245 {chat,"1","1","2","wo xi huan ni"}
2017-05-20 15:31:06.610 [info] <0.128.0>@tcp_agent:handle_info:246 {state,#Port<0.3682>,<0.131.0>}
2017-05-20 15:31:06.610 [info] <0.128.0>@tcp_agent:wait_data:135 chat begin
2017-05-20 15:31:06.610 [info] <0.131.0>@client:handle_info:123 send message to other client
2017-05-20 15:31:06.610 [error] <0.131.0> gen_server <0.131.0> terminated with reason: no match of right hand value error in client:handle_info/2 line 125
2017-05-20 15:31:06.612 [error] <0.131.0> CRASH REPORT Process <0.131.0> with 0 neighbours exited with reason: no match of right hand value error in client:handle_info/2 line 125 in gen_server:terminate/7 line 812
2017-05-20 15:31:06.612 [info] <0.124.0>@client:start_link:45 ```````````````````````````````````````
2017-05-20 15:31:06.612 [error] <0.124.0> Supervisor client_sup had child 1 started with client:start_link() at <0.131.0> exit with reason no match of right hand value error in client:handle_info/2 line 125 in context child_terminated
2017-05-20 15:31:06.612 [info] <0.133.0>@client:init:67 ```````````````````````````````````````
2017-05-20 15:34:57.752 [info] <0.31.0> Application lager started on node yangwei@brucedeiMac
2017-05-20 15:34:57.752 [info] <0.98.0>@chat_sup:init:26 ###############   Begin  ##############
2017-05-20 15:34:57.860 [info] <0.31.0> Application mnesia started on node yangwei@brucedeiMac
2017-05-20 15:34:57.867 [info] <0.99.0>@mod_control_sup:init:24 load tables:ok 
2017-05-20 15:34:57.867 [info] <0.99.0>@control_sup:init:63 
2017-05-20 15:34:57.874 [info] <0.121.0>@id_generator:init:30 ########### id_generator
2017-05-20 15:34:57.909 [info] <0.122.0>@group_sup:init:70 [] 
2017-05-20 15:34:57.909 [info] <0.122.0>@group_sup:init:77 [] 
2017-05-20 15:34:57.909 [info] <0.122.0>@group_sup:init:79 ######## group_sup
2017-05-20 15:34:57.918 [info] <0.124.0>@client_sup:init:65 ######## client_sup
2017-05-20 15:34:57.920 [info] <0.31.0> Application chat started on node yangwei@brucedeiMac
2017-05-20 15:35:16.196 [info] <0.126.0>@tcp_acceptor:process_Client_Socket:181 #Port<0.3682>
2017-05-20 15:35:16.223 [info] <0.126.0>@tcp_acceptor:process_Client_Socket:189 
2017-05-20 15:35:16.224 [info] <0.128.0>@tcp_agent:wait_socket:92 wait_socket: #Port<0.3682>
2017-05-20 15:35:25.212 [info] <0.126.0>@tcp_acceptor:process_Client_Socket:181 #Port<0.3693>
2017-05-20 15:35:25.212 [info] <0.126.0>@tcp_acceptor:process_Client_Socket:189 
2017-05-20 15:35:25.212 [info] <0.129.0>@tcp_agent:wait_socket:92 wait_socket: #Port<0.3693>
2017-05-20 15:35:30.786 [info] <0.128.0>@tcp_agent:handle_info:215 *******************************************
2017-05-20 15:35:30.828 [info] <0.128.0>@tcp_agent:handle_info:219 <<"1">>
2017-05-20 15:35:30.828 [info] <0.128.0>@tcp_agent:handle_info:220 #{<<"cmd">> => <<"1">>,<<"password">> => <<"iyw">>,<<"username">> => <<"zst">>}
2017-05-20 15:35:30.828 [info] <0.128.0>@tcp_agent:handle_info:223 ####
2017-05-20 15:35:30.829 [info] <0.128.0>@tcp_agent:wait_auth:96 {register,"zst","iyw"}
2017-05-20 15:35:30.829 [info] <0.128.0>@tcp_agent:wait_auth:98 1
2017-05-20 15:35:30.829 [info] <0.128.0>@mod_mnesia:add_new_client:41 {client,1,"zst","iyw",[],[]}
2017-05-20 15:35:30.829 [info] <0.128.0>@mod_mnesia:add_new_client:47 {atomic,ok}
2017-05-20 15:35:30.839 [info] <0.124.0>@client:start_link:45 ```````````````````````````````````````
2017-05-20 15:35:30.839 [info] <0.131.0>@client:init:67 ```````````````````````````````````````
2017-05-20 15:35:30.840 [info] <0.128.0>@tcp_agent:wait_auth:114 success register!
2017-05-20 15:35:30.840 [info] <0.131.0>@client:handle_cast:104 update state
2017-05-20 15:35:33.070 [info] <0.129.0>@tcp_agent:handle_info:215 *******************************************
2017-05-20 15:35:33.070 [info] <0.129.0>@tcp_agent:handle_info:219 <<"1">>
2017-05-20 15:35:33.070 [info] <0.129.0>@tcp_agent:handle_info:220 #{<<"cmd">> => <<"1">>,<<"password">> => <<"ist">>,<<"username">> => <<"yw">>}
2017-05-20 15:35:33.070 [info] <0.129.0>@tcp_agent:handle_info:223 ####
2017-05-20 15:35:33.070 [info] <0.129.0>@tcp_agent:wait_auth:96 {register,"yw","ist"}
2017-05-20 15:35:33.070 [info] <0.129.0>@tcp_agent:wait_auth:98 2
2017-05-20 15:35:33.071 [info] <0.129.0>@mod_mnesia:add_new_client:41 {client,2,"yw","ist",[],[]}
2017-05-20 15:35:33.071 [info] <0.129.0>@mod_mnesia:add_new_client:47 {atomic,ok}
2017-05-20 15:35:33.071 [info] <0.124.0>@client:start_link:45 ```````````````````````````````````````
2017-05-20 15:35:33.071 [info] <0.132.0>@client:init:67 ```````````````````````````````````````
2017-05-20 15:35:33.071 [info] <0.129.0>@tcp_agent:wait_auth:114 success register!
2017-05-20 15:35:33.071 [info] <0.132.0>@client:handle_cast:104 update state
2017-05-20 15:35:42.566 [info] <0.128.0>@tcp_agent:handle_info:215 *******************************************
2017-05-20 15:35:42.566 [info] <0.128.0>@tcp_agent:handle_info:219 <<"3">>
2017-05-20 15:35:42.566 [info] <0.128.0>@tcp_agent:handle_info:220 #{<<"cmd">> => <<"3">>,<<"data">> => <<"wo xi huan ni">>,<<"id">> => <<"1">>,<<"to_id">> => <<"2">>,<<"to_type">> => <<"1">>}
2017-05-20 15:35:42.566 [info] <0.128.0>@tcp_agent:handle_info:245 {chat,"1","1","2","wo xi huan ni"}
2017-05-20 15:35:42.566 [info] <0.128.0>@tcp_agent:handle_info:246 {state,#Port<0.3682>,<0.131.0>}
2017-05-20 15:35:42.566 [info] <0.128.0>@tcp_agent:wait_data:135 chat begin
2017-05-20 15:35:42.566 [info] <0.131.0>@client:handle_info:123 send message to other client
2017-05-20 15:35:42.566 [info] <0.131.0>@client:handle_info:125 "1"
2017-05-20 15:35:42.566 [info] <0.131.0>@client:handle_info:126 []
2017-05-20 15:35:42.566 [info] <0.131.0>@client:handle_info:127 {client_receive_chat,"1","wo xi huan ni"}
2017-05-20 15:35:42.566 [error] <0.131.0> gen_server <0.131.0> terminated with reason: no match of right hand value error in client:handle_info/2 line 128
2017-05-20 15:35:42.602 [error] <0.131.0> CRASH REPORT Process <0.131.0> with 0 neighbours exited with reason: no match of right hand value error in client:handle_info/2 line 128 in gen_server:terminate/7 line 812
2017-05-20 15:35:42.602 [info] <0.124.0>@client:start_link:45 ```````````````````````````````````````
2017-05-20 15:35:42.602 [error] <0.124.0> Supervisor client_sup had child 1 started with client:start_link() at <0.131.0> exit with reason no match of right hand value error in client:handle_info/2 line 128 in context child_terminated
2017-05-20 15:35:42.602 [info] <0.133.0>@client:init:67 ```````````````````````````````````````
2017-05-20 15:36:00.432 [info] <0.129.0>@tcp_agent:handle_info:215 *******************************************
2017-05-20 15:36:00.432 [info] <0.129.0>@tcp_agent:handle_info:219 <<"3">>
2017-05-20 15:36:00.432 [info] <0.129.0>@tcp_agent:handle_info:220 #{<<"cmd">> => <<"3">>,<<"data">> => <<"wo xi huan ni">>,<<"id">> => <<"2">>,<<"to_id">> => <<"1">>,<<"to_type">> => <<"1">>}
2017-05-20 15:36:00.432 [info] <0.129.0>@tcp_agent:handle_info:245 {chat,"2","1","1","wo xi huan ni"}
2017-05-20 15:36:00.432 [info] <0.129.0>@tcp_agent:handle_info:246 {state,#Port<0.3693>,<0.132.0>}
2017-05-20 15:36:00.432 [info] <0.129.0>@tcp_agent:wait_data:135 chat begin
2017-05-20 15:36:00.432 [info] <0.132.0>@client:handle_info:123 send message to other client
2017-05-20 15:36:00.432 [info] <0.132.0>@client:handle_info:125 "1"
2017-05-20 15:36:00.432 [info] <0.132.0>@client:handle_info:126 []
2017-05-20 15:36:00.432 [info] <0.132.0>@client:handle_info:127 {client_receive_chat,"2","wo xi huan ni"}
2017-05-20 15:36:00.432 [error] <0.132.0> gen_server <0.132.0> terminated with reason: no match of right hand value error in client:handle_info/2 line 128
2017-05-20 15:36:00.432 [info] <0.124.0>@client:start_link:45 ```````````````````````````````````````
2017-05-20 15:36:00.432 [error] <0.132.0> CRASH REPORT Process <0.132.0> with 0 neighbours exited with reason: no match of right hand value error in client:handle_info/2 line 128 in gen_server:terminate/7 line 812
2017-05-20 15:36:00.432 [info] <0.134.0>@client:init:67 ```````````````````````````````````````
2017-05-20 15:36:00.432 [error] <0.124.0> Supervisor client_sup had child 2 started with client:start_link() at <0.132.0> exit with reason no match of right hand value error in client:handle_info/2 line 128 in context child_terminated
2017-05-20 15:36:26.521 [info] <0.31.0> Application lager started on node yangwei@brucedeiMac
2017-05-20 15:36:26.521 [info] <0.98.0>@chat_sup:init:26 ###############   Begin  ##############
2017-05-20 15:36:26.628 [info] <0.31.0> Application mnesia started on node yangwei@brucedeiMac
2017-05-20 15:36:26.636 [info] <0.99.0>@mod_control_sup:init:24 load tables:ok 
2017-05-20 15:36:26.636 [info] <0.99.0>@control_sup:init:63 
2017-05-20 15:36:26.643 [info] <0.121.0>@id_generator:init:30 ########### id_generator
2017-05-20 15:36:26.678 [info] <0.122.0>@group_sup:init:70 [] 
2017-05-20 15:36:26.678 [info] <0.122.0>@group_sup:init:77 [] 
2017-05-20 15:36:26.678 [info] <0.122.0>@group_sup:init:79 ######## group_sup
2017-05-20 15:36:26.687 [info] <0.124.0>@client_sup:init:65 ######## client_sup
2017-05-20 15:36:26.698 [info] <0.31.0> Application chat started on node yangwei@brucedeiMac
2017-05-20 15:36:28.834 [info] <0.126.0>@tcp_acceptor:process_Client_Socket:181 #Port<0.3682>
2017-05-20 15:36:28.837 [info] <0.126.0>@tcp_acceptor:process_Client_Socket:189 
2017-05-20 15:36:28.837 [info] <0.128.0>@tcp_agent:wait_socket:92 wait_socket: #Port<0.3682>
2017-05-20 15:36:30.043 [info] <0.128.0>@tcp_agent:handle_info:215 *******************************************
2017-05-20 15:36:30.047 [info] <0.128.0>@tcp_agent:handle_info:219 <<"1">>
2017-05-20 15:36:30.047 [info] <0.128.0>@tcp_agent:handle_info:220 #{<<"cmd">> => <<"1">>,<<"password">> => <<"iyw">>,<<"username">> => <<"zst">>}
2017-05-20 15:36:30.047 [info] <0.128.0>@tcp_agent:handle_info:223 ####
2017-05-20 15:36:30.047 [info] <0.128.0>@tcp_agent:wait_auth:96 {register,"zst","iyw"}
2017-05-20 15:36:30.047 [info] <0.128.0>@tcp_agent:wait_auth:98 1
2017-05-20 15:36:30.047 [info] <0.128.0>@mod_mnesia:add_new_client:41 {client,1,"zst","iyw",[],[]}
2017-05-20 15:36:30.048 [info] <0.128.0>@mod_mnesia:add_new_client:47 {atomic,ok}
2017-05-20 15:36:30.049 [info] <0.124.0>@client:start_link:45 ```````````````````````````````````````
2017-05-20 15:36:30.049 [info] <0.130.0>@client:init:67 ```````````````````````````````````````
2017-05-20 15:36:30.049 [info] <0.128.0>@tcp_agent:wait_auth:114 success register!
2017-05-20 15:36:30.049 [info] <0.130.0>@client:handle_cast:104 update state
2017-05-20 15:36:41.108 [info] <0.126.0>@tcp_acceptor:process_Client_Socket:181 #Port<0.3701>
2017-05-20 15:36:41.108 [info] <0.126.0>@tcp_acceptor:process_Client_Socket:189 
2017-05-20 15:36:41.108 [info] <0.131.0>@tcp_agent:wait_socket:92 wait_socket: #Port<0.3701>
2017-05-20 15:36:42.160 [info] <0.131.0>@tcp_agent:handle_info:215 *******************************************
2017-05-20 15:36:42.160 [info] <0.131.0>@tcp_agent:handle_info:219 <<"1">>
2017-05-20 15:36:42.161 [info] <0.131.0>@tcp_agent:handle_info:220 #{<<"cmd">> => <<"1">>,<<"password">> => <<"ist">>,<<"username">> => <<"yw">>}
2017-05-20 15:36:42.161 [info] <0.131.0>@tcp_agent:handle_info:223 ####
2017-05-20 15:36:42.161 [info] <0.131.0>@tcp_agent:wait_auth:96 {register,"yw","ist"}
2017-05-20 15:36:42.161 [info] <0.131.0>@tcp_agent:wait_auth:98 2
2017-05-20 15:36:42.161 [info] <0.131.0>@mod_mnesia:add_new_client:41 {client,2,"yw","ist",[],[]}
2017-05-20 15:36:42.161 [info] <0.131.0>@mod_mnesia:add_new_client:47 {atomic,ok}
2017-05-20 15:36:42.161 [info] <0.124.0>@client:start_link:45 ```````````````````````````````````````
2017-05-20 15:36:42.161 [info] <0.132.0>@client:init:67 ```````````````````````````````````````
2017-05-20 15:36:42.161 [info] <0.131.0>@tcp_agent:wait_auth:114 success register!
2017-05-20 15:36:42.161 [info] <0.132.0>@client:handle_cast:104 update state
2017-05-20 15:37:18.162 [info] <0.128.0>@tcp_agent:handle_info:215 *******************************************
2017-05-20 15:37:18.163 [info] <0.128.0>@tcp_agent:handle_info:219 <<"3">>
2017-05-20 15:37:18.163 [info] <0.128.0>@tcp_agent:handle_info:220 #{<<"cmd">> => <<"3">>,<<"data">> => <<"wo xi huan ni">>,<<"id">> => <<"1">>,<<"to_id">> => <<"2">>,<<"to_type">> => <<"1">>}
2017-05-20 15:37:18.163 [info] <0.128.0>@tcp_agent:handle_info:245 {chat,"1","1","2","wo xi huan ni"}
2017-05-20 15:37:18.163 [info] <0.128.0>@tcp_agent:handle_info:246 {state,#Port<0.3682>,<0.130.0>}
2017-05-20 15:37:18.163 [info] <0.128.0>@tcp_agent:wait_data:135 chat begin
2017-05-20 15:37:18.163 [info] <0.130.0>@client:handle_info:123 send message to other client
2017-05-20 15:37:18.163 [info] <0.130.0>@client:handle_info:125 "1"
2017-05-20 15:37:18.163 [info] <0.130.0>@client:handle_info:126 []
2017-05-20 15:37:18.163 [info] <0.130.0>@client:handle_info:127 {client_receive_chat,"1","wo xi huan ni"}
2017-05-20 15:37:18.163 [error] <0.130.0> gen_server <0.130.0> terminated with reason: no match of right hand value error in client:handle_info/2 line 128
2017-05-20 15:37:18.166 [info] <0.124.0>@client:start_link:45 ```````````````````````````````````````
2017-05-20 15:37:18.166 [error] <0.130.0> CRASH REPORT Process <0.130.0> with 0 neighbours exited with reason: no match of right hand value error in client:handle_info/2 line 128 in gen_server:terminate/7 line 812
2017-05-20 15:37:18.166 [error] <0.124.0> Supervisor client_sup had child 1 started with client:start_link() at <0.130.0> exit with reason no match of right hand value error in client:handle_info/2 line 128 in context child_terminated
2017-05-20 15:37:18.166 [info] <0.133.0>@client:init:67 ```````````````````````````````````````
2017-05-20 15:39:19.727 [info] <0.31.0> Application lager started on node yangwei@brucedeiMac
2017-05-20 15:39:19.727 [info] <0.98.0>@chat_sup:init:26 ###############   Begin  ##############
2017-05-20 15:39:19.832 [info] <0.31.0> Application mnesia started on node yangwei@brucedeiMac
2017-05-20 15:39:19.840 [info] <0.99.0>@mod_control_sup:init:24 load tables:ok 
2017-05-20 15:39:19.840 [info] <0.99.0>@control_sup:init:63 
2017-05-20 15:39:19.848 [info] <0.121.0>@id_generator:init:30 ########### id_generator
2017-05-20 15:39:19.883 [info] <0.122.0>@group_sup:init:70 [] 
2017-05-20 15:39:19.883 [info] <0.122.0>@group_sup:init:77 [] 
2017-05-20 15:39:19.883 [info] <0.122.0>@group_sup:init:79 ######## group_sup
2017-05-20 15:39:19.893 [info] <0.124.0>@client_sup:init:65 ######## client_sup
2017-05-20 15:39:19.903 [info] <0.31.0> Application chat started on node yangwei@brucedeiMac
2017-05-20 15:39:25.903 [info] <0.126.0>@tcp_acceptor:process_Client_Socket:181 #Port<0.3682>
2017-05-20 15:39:25.906 [info] <0.126.0>@tcp_acceptor:process_Client_Socket:189 
2017-05-20 15:39:25.906 [info] <0.128.0>@tcp_agent:wait_socket:92 wait_socket: #Port<0.3682>
2017-05-20 15:39:27.578 [info] <0.128.0>@tcp_agent:handle_info:215 *******************************************
2017-05-20 15:39:27.602 [info] <0.128.0>@tcp_agent:handle_info:219 <<"1">>
2017-05-20 15:39:27.602 [info] <0.128.0>@tcp_agent:handle_info:220 #{<<"cmd">> => <<"1">>,<<"password">> => <<"iyw">>,<<"username">> => <<"zst">>}
2017-05-20 15:39:27.602 [info] <0.128.0>@tcp_agent:handle_info:223 ####
2017-05-20 15:39:27.602 [info] <0.128.0>@tcp_agent:wait_auth:96 {register,"zst","iyw"}
2017-05-20 15:39:27.603 [info] <0.128.0>@tcp_agent:wait_auth:98 1
2017-05-20 15:39:27.603 [info] <0.128.0>@mod_mnesia:add_new_client:41 {client,1,"zst","iyw",[],[]}
2017-05-20 15:39:27.603 [info] <0.128.0>@mod_mnesia:add_new_client:47 {atomic,ok}
2017-05-20 15:39:27.620 [info] <0.124.0>@client:start_link:45 ```````````````````````````````````````
2017-05-20 15:39:27.620 [info] <0.130.0>@client:init:67 ```````````````````````````````````````
2017-05-20 15:39:27.620 [info] <0.128.0>@tcp_agent:wait_auth:114 success register!
2017-05-20 15:39:27.620 [info] <0.130.0>@client:handle_cast:104 update state
2017-05-20 15:39:33.177 [info] <0.126.0>@tcp_acceptor:process_Client_Socket:181 #Port<0.3701>
2017-05-20 15:39:33.177 [info] <0.126.0>@tcp_acceptor:process_Client_Socket:189 
2017-05-20 15:39:33.177 [info] <0.131.0>@tcp_agent:wait_socket:92 wait_socket: #Port<0.3701>
2017-05-20 15:39:39.279 [info] <0.128.0>@tcp_agent:handle_info:215 *******************************************
2017-05-20 15:39:39.279 [info] <0.128.0>@tcp_agent:handle_info:219 <<"3">>
2017-05-20 15:39:39.279 [info] <0.128.0>@tcp_agent:handle_info:220 #{<<"cmd">> => <<"3">>,<<"data">> => <<"wo xi huan ni">>,<<"id">> => <<"1">>,<<"to_id">> => <<"2">>,<<"to_type">> => <<"1">>}
2017-05-20 15:39:39.279 [info] <0.128.0>@tcp_agent:handle_info:245 {chat,1,"1","2","wo xi huan ni"}
2017-05-20 15:39:39.279 [info] <0.128.0>@tcp_agent:handle_info:246 {state,#Port<0.3682>,<0.130.0>}
2017-05-20 15:39:39.279 [info] <0.128.0>@tcp_agent:wait_data:135 chat begin
2017-05-20 15:39:39.279 [info] <0.130.0>@client:handle_info:123 send message to other client
2017-05-20 15:39:39.279 [info] <0.130.0>@client:handle_info:125 "1"
2017-05-20 15:39:39.279 [info] <0.130.0>@client:handle_info:126 []
2017-05-20 15:39:39.279 [info] <0.130.0>@client:handle_info:127 {client_receive_chat,1,"wo xi huan ni"}
2017-05-20 15:39:39.279 [error] <0.130.0> gen_server <0.130.0> terminated with reason: no match of right hand value error in client:handle_info/2 line 128
2017-05-20 15:39:39.565 [error] <0.130.0> CRASH REPORT Process <0.130.0> with 0 neighbours exited with reason: no match of right hand value error in client:handle_info/2 line 128 in gen_server:terminate/7 line 812
2017-05-20 15:39:39.565 [info] <0.124.0>@client:start_link:45 ```````````````````````````````````````
2017-05-20 15:39:39.565 [info] <0.132.0>@client:init:67 ```````````````````````````````````````
2017-05-20 15:39:39.565 [error] <0.124.0> Supervisor client_sup had child 1 started with client:start_link() at <0.130.0> exit with reason no match of right hand value error in client:handle_info/2 line 128 in context child_terminated
2017-05-20 15:40:11.809 [info] <0.31.0> Application lager started on node yangwei@brucedeiMac
2017-05-20 15:40:11.809 [info] <0.98.0>@chat_sup:init:26 ###############   Begin  ##############
2017-05-20 15:40:11.864 [info] <0.31.0> Application mnesia started on node yangwei@brucedeiMac
2017-05-20 15:40:11.871 [info] <0.99.0>@mod_control_sup:init:24 load tables:ok 
2017-05-20 15:40:11.871 [info] <0.99.0>@control_sup:init:63 
2017-05-20 15:40:11.871 [info] <0.121.0>@id_generator:init:30 ########### id_generator
2017-05-20 15:40:11.877 [info] <0.122.0>@group_sup:init:70 [] 
2017-05-20 15:40:11.877 [info] <0.122.0>@group_sup:init:77 [] 
2017-05-20 15:40:11.877 [info] <0.122.0>@group_sup:init:79 ######## group_sup
2017-05-20 15:40:11.878 [info] <0.124.0>@client_sup:init:65 ######## client_sup
2017-05-20 15:40:11.879 [info] <0.31.0> Application chat started on node yangwei@brucedeiMac
2017-05-20 15:40:17.075 [info] <0.126.0>@tcp_acceptor:process_Client_Socket:181 #Port<0.3682>
2017-05-20 15:40:17.078 [info] <0.126.0>@tcp_acceptor:process_Client_Socket:189 
2017-05-20 15:40:17.078 [info] <0.128.0>@tcp_agent:wait_socket:92 wait_socket: #Port<0.3682>
2017-05-20 15:40:18.240 [info] <0.128.0>@tcp_agent:handle_info:215 *******************************************
2017-05-20 15:40:18.244 [info] <0.128.0>@tcp_agent:handle_info:219 <<"1">>
2017-05-20 15:40:18.244 [info] <0.128.0>@tcp_agent:handle_info:220 #{<<"cmd">> => <<"1">>,<<"password">> => <<"iyw">>,<<"username">> => <<"zst">>}
2017-05-20 15:40:18.244 [info] <0.128.0>@tcp_agent:handle_info:223 ####
2017-05-20 15:40:18.244 [info] <0.128.0>@tcp_agent:wait_auth:96 {register,"zst","iyw"}
2017-05-20 15:40:18.244 [info] <0.128.0>@tcp_agent:wait_auth:98 1
2017-05-20 15:40:18.244 [info] <0.128.0>@mod_mnesia:add_new_client:41 {client,1,"zst","iyw",[],[]}
2017-05-20 15:40:18.244 [info] <0.128.0>@mod_mnesia:add_new_client:47 {atomic,ok}
2017-05-20 15:40:18.246 [info] <0.124.0>@client:start_link:45 ```````````````````````````````````````
2017-05-20 15:40:18.246 [info] <0.130.0>@client:init:67 ```````````````````````````````````````
2017-05-20 15:40:18.246 [info] <0.128.0>@tcp_agent:wait_auth:114 success register!
2017-05-20 15:40:18.246 [info] <0.130.0>@client:handle_cast:104 update state
2017-05-20 15:40:25.580 [info] <0.126.0>@tcp_acceptor:process_Client_Socket:181 #Port<0.3701>
2017-05-20 15:40:25.581 [info] <0.126.0>@tcp_acceptor:process_Client_Socket:189 
2017-05-20 15:40:25.581 [info] <0.131.0>@tcp_agent:wait_socket:92 wait_socket: #Port<0.3701>
2017-05-20 15:40:26.588 [info] <0.131.0>@tcp_agent:handle_info:215 *******************************************
2017-05-20 15:40:26.588 [info] <0.131.0>@tcp_agent:handle_info:219 <<"1">>
2017-05-20 15:40:26.588 [info] <0.131.0>@tcp_agent:handle_info:220 #{<<"cmd">> => <<"1">>,<<"password">> => <<"ist">>,<<"username">> => <<"yw">>}
2017-05-20 15:40:26.588 [info] <0.131.0>@tcp_agent:handle_info:223 ####
2017-05-20 15:40:26.588 [info] <0.131.0>@tcp_agent:wait_auth:96 {register,"yw","ist"}
2017-05-20 15:40:26.588 [info] <0.131.0>@tcp_agent:wait_auth:98 2
2017-05-20 15:40:26.588 [info] <0.131.0>@mod_mnesia:add_new_client:41 {client,2,"yw","ist",[],[]}
2017-05-20 15:40:26.589 [info] <0.131.0>@mod_mnesia:add_new_client:47 {atomic,ok}
2017-05-20 15:40:26.589 [info] <0.124.0>@client:start_link:45 ```````````````````````````````````````
2017-05-20 15:40:26.589 [info] <0.132.0>@client:init:67 ```````````````````````````````````````
2017-05-20 15:40:26.589 [info] <0.131.0>@tcp_agent:wait_auth:114 success register!
2017-05-20 15:40:26.589 [info] <0.132.0>@client:handle_cast:104 update state
2017-05-20 15:40:34.014 [info] <0.128.0>@tcp_agent:handle_info:215 *******************************************
2017-05-20 15:40:34.014 [info] <0.128.0>@tcp_agent:handle_info:219 <<"3">>
2017-05-20 15:40:34.014 [info] <0.128.0>@tcp_agent:handle_info:220 #{<<"cmd">> => <<"3">>,<<"data">> => <<"wo xihuan ni">>,<<"id">> => <<"1">>,<<"to_id">> => <<"2">>,<<"to_type">> => <<"1">>}
2017-05-20 15:40:34.014 [info] <0.128.0>@tcp_agent:handle_info:245 {chat,1,1,2,"wo xihuan ni"}
2017-05-20 15:40:34.014 [info] <0.128.0>@tcp_agent:handle_info:246 {state,#Port<0.3682>,<0.130.0>}
2017-05-20 15:40:34.014 [info] <0.128.0>@tcp_agent:wait_data:135 chat begin
2017-05-20 15:40:34.014 [info] <0.130.0>@client:handle_info:123 send message to other client
2017-05-20 15:40:34.014 [info] <0.130.0>@client:handle_info:125 1
2017-05-20 15:40:34.014 [info] <0.130.0>@client:handle_info:126 []
2017-05-20 15:40:34.014 [info] <0.130.0>@client:handle_info:127 {client_receive_chat,1,"wo xihuan ni"}
2017-05-20 15:40:34.014 [error] <0.130.0> gen_server <0.130.0> terminated with reason: bad argument in client:handle_info/2 line 137
2017-05-20 15:40:34.016 [error] <0.130.0> CRASH REPORT Process <0.130.0> with 0 neighbours exited with reason: bad argument in client:handle_info/2 line 137
2017-05-20 15:40:34.016 [info] <0.124.0>@client:start_link:45 ```````````````````````````````````````
2017-05-20 15:40:34.016 [error] <0.124.0> Supervisor client_sup had child 1 started with client:start_link() at <0.130.0> exit with reason bad argument in client:handle_info/2 line 137 in context child_terminated
2017-05-20 15:40:34.016 [info] <0.133.0>@client:init:67 ```````````````````````````````````````
2017-05-20 15:43:17.333 [info] <0.31.0> Application lager started on node yangwei@brucedeiMac
2017-05-20 15:43:17.333 [info] <0.98.0>@chat_sup:init:26 ###############   Begin  ##############
2017-05-20 15:43:17.388 [info] <0.31.0> Application mnesia started on node yangwei@brucedeiMac
2017-05-20 15:43:17.394 [info] <0.99.0>@mod_control_sup:init:24 load tables:ok 
2017-05-20 15:43:17.394 [info] <0.99.0>@control_sup:init:63 
2017-05-20 15:43:17.395 [info] <0.121.0>@id_generator:init:30 ########### id_generator
2017-05-20 15:43:17.400 [info] <0.122.0>@group_sup:init:70 [] 
2017-05-20 15:43:17.400 [info] <0.122.0>@group_sup:init:77 [] 
2017-05-20 15:43:17.400 [info] <0.122.0>@group_sup:init:79 ######## group_sup
2017-05-20 15:43:17.401 [info] <0.124.0>@client_sup:init:65 ######## client_sup
2017-05-20 15:43:17.403 [info] <0.31.0> Application chat started on node yangwei@brucedeiMac
2017-05-20 15:43:32.185 [info] <0.126.0>@tcp_acceptor:process_Client_Socket:181 #Port<0.3682>
2017-05-20 15:43:32.188 [info] <0.126.0>@tcp_acceptor:process_Client_Socket:189 
2017-05-20 15:43:32.188 [info] <0.128.0>@tcp_agent:wait_socket:92 wait_socket: #Port<0.3682>
2017-05-20 15:43:33.112 [info] <0.128.0>@tcp_agent:handle_info:216 *******************************************
2017-05-20 15:43:33.116 [info] <0.128.0>@tcp_agent:handle_info:220 <<"1">>
2017-05-20 15:43:33.116 [info] <0.128.0>@tcp_agent:handle_info:221 #{<<"cmd">> => <<"1">>,<<"password">> => <<"iyw">>,<<"username">> => <<"zst">>}
2017-05-20 15:43:33.116 [info] <0.128.0>@tcp_agent:handle_info:224 ####
2017-05-20 15:43:33.116 [info] <0.128.0>@tcp_agent:wait_auth:96 {register,"zst","iyw"}
2017-05-20 15:43:33.117 [info] <0.128.0>@tcp_agent:wait_auth:98 1
2017-05-20 15:43:33.117 [info] <0.128.0>@tcp_agent:wait_auth:108 true
2017-05-20 15:43:33.117 [info] <0.128.0>@mod_mnesia:add_new_client:41 {client,1,"zst","iyw",[],[]}
2017-05-20 15:43:33.117 [info] <0.128.0>@mod_mnesia:add_new_client:47 {atomic,ok}
2017-05-20 15:43:33.118 [info] <0.124.0>@client:start_link:45 ```````````````````````````````````````
2017-05-20 15:43:33.118 [info] <0.130.0>@client:init:67 ```````````````````````````````````````
2017-05-20 15:43:33.119 [info] <0.128.0>@tcp_agent:wait_auth:115 success register!
2017-05-20 15:43:33.119 [info] <0.130.0>@client:handle_cast:104 update state
2017-05-20 15:43:40.262 [info] <0.126.0>@tcp_acceptor:process_Client_Socket:181 #Port<0.3701>
2017-05-20 15:43:40.262 [info] <0.126.0>@tcp_acceptor:process_Client_Socket:189 
2017-05-20 15:43:40.262 [info] <0.131.0>@tcp_agent:wait_socket:92 wait_socket: #Port<0.3701>
2017-05-20 15:43:41.359 [info] <0.131.0>@tcp_agent:handle_info:216 *******************************************
2017-05-20 15:43:41.359 [info] <0.131.0>@tcp_agent:handle_info:220 <<"1">>
2017-05-20 15:43:41.359 [info] <0.131.0>@tcp_agent:handle_info:221 #{<<"cmd">> => <<"1">>,<<"password">> => <<"ist">>,<<"username">> => <<"yw">>}
2017-05-20 15:43:41.359 [info] <0.131.0>@tcp_agent:handle_info:224 ####
2017-05-20 15:43:41.359 [info] <0.131.0>@tcp_agent:wait_auth:96 {register,"yw","ist"}
2017-05-20 15:43:41.360 [info] <0.131.0>@tcp_agent:wait_auth:98 2
2017-05-20 15:43:41.360 [info] <0.131.0>@tcp_agent:wait_auth:108 true
2017-05-20 15:43:41.360 [info] <0.131.0>@mod_mnesia:add_new_client:41 {client,2,"yw","ist",[],[]}
2017-05-20 15:43:41.360 [info] <0.131.0>@mod_mnesia:add_new_client:47 {atomic,ok}
2017-05-20 15:43:41.360 [info] <0.124.0>@client:start_link:45 ```````````````````````````````````````
2017-05-20 15:43:41.360 [info] <0.132.0>@client:init:67 ```````````````````````````````````````
2017-05-20 15:43:41.360 [info] <0.131.0>@tcp_agent:wait_auth:115 success register!
2017-05-20 15:43:41.360 [info] <0.132.0>@client:handle_cast:104 update state
2017-05-20 15:43:48.650 [info] <0.128.0>@tcp_agent:handle_info:216 *******************************************
2017-05-20 15:43:48.650 [info] <0.128.0>@tcp_agent:handle_info:220 <<"3">>
2017-05-20 15:43:48.650 [info] <0.128.0>@tcp_agent:handle_info:221 #{<<"cmd">> => <<"3">>,<<"data">> => <<"wo xihuan ni">>,<<"id">> => <<"1">>,<<"to_id">> => <<"2">>,<<"to_type">> => <<"1">>}
2017-05-20 15:43:48.650 [info] <0.128.0>@tcp_agent:handle_info:246 {chat,1,1,2,"wo xihuan ni"}
2017-05-20 15:43:48.650 [info] <0.128.0>@tcp_agent:handle_info:247 {state,#Port<0.3682>,<0.130.0>}
2017-05-20 15:43:48.650 [info] <0.128.0>@tcp_agent:wait_data:136 chat begin
2017-05-20 15:43:48.650 [info] <0.130.0>@client:handle_info:123 send message to other client
2017-05-20 15:43:48.650 [info] <0.130.0>@client:handle_info:125 1
2017-05-20 15:43:48.650 [info] <0.130.0>@client:handle_info:126 []
2017-05-20 15:43:48.650 [info] <0.130.0>@client:handle_info:127 {client_receive_chat,1,"wo xihuan ni"}
2017-05-20 15:43:48.650 [error] <0.130.0> gen_server <0.130.0> terminated with reason: bad argument in client:handle_info/2 line 137
2017-05-20 15:43:48.652 [info] <0.124.0>@client:start_link:45 ```````````````````````````````````````
2017-05-20 15:43:48.652 [info] <0.133.0>@client:init:67 ```````````````````````````````````````
2017-05-20 15:43:48.652 [error] <0.130.0> CRASH REPORT Process <0.130.0> with 0 neighbours exited with reason: bad argument in client:handle_info/2 line 137
2017-05-20 15:43:48.652 [error] <0.124.0> Supervisor client_sup had child 1 started with client:start_link() at <0.130.0> exit with reason bad argument in client:handle_info/2 line 137 in context child_terminated
2017-05-20 15:49:51.740 [info] <0.31.0> Application lager started on node yangwei@brucedeiMac
2017-05-20 15:49:51.740 [info] <0.98.0>@chat_sup:init:26 ###############   Begin  ##############
2017-05-20 15:49:51.840 [info] <0.31.0> Application mnesia started on node yangwei@brucedeiMac
2017-05-20 15:49:51.848 [info] <0.99.0>@mod_control_sup:init:24 load tables:ok 
2017-05-20 15:49:51.848 [info] <0.99.0>@control_sup:init:63 
2017-05-20 15:49:51.857 [info] <0.121.0>@id_generator:init:30 ########### id_generator
2017-05-20 15:49:51.891 [info] <0.122.0>@group_sup:init:70 [] 
2017-05-20 15:49:51.891 [info] <0.122.0>@group_sup:init:77 [] 
2017-05-20 15:49:51.891 [info] <0.122.0>@group_sup:init:79 ######## group_sup
2017-05-20 15:49:51.901 [info] <0.124.0>@client_sup:init:65 ######## client_sup
2017-05-20 15:49:51.911 [info] <0.31.0> Application chat started on node yangwei@brucedeiMac
2017-05-20 15:49:57.597 [info] <0.126.0>@tcp_acceptor:process_Client_Socket:181 #Port<0.3682>
2017-05-20 15:49:57.600 [info] <0.126.0>@tcp_acceptor:process_Client_Socket:189 
2017-05-20 15:49:57.600 [info] <0.128.0>@tcp_agent:wait_socket:92 wait_socket: #Port<0.3682>
2017-05-20 15:50:10.850 [info] <0.126.0>@tcp_acceptor:process_Client_Socket:181 #Port<0.3693>
2017-05-20 15:50:10.850 [info] <0.126.0>@tcp_acceptor:process_Client_Socket:189 
2017-05-20 15:50:10.850 [info] <0.129.0>@tcp_agent:wait_socket:92 wait_socket: #Port<0.3693>
2017-05-20 15:50:12.105 [info] <0.129.0>@tcp_agent:handle_info:217 *******************************************
2017-05-20 15:50:12.398 [info] <0.129.0>@tcp_agent:handle_info:221 <<"1">>
2017-05-20 15:50:12.398 [info] <0.129.0>@tcp_agent:handle_info:222 #{<<"cmd">> => <<"1">>,<<"password">> => <<"ist">>,<<"username">> => <<"yw">>}
2017-05-20 15:50:12.398 [info] <0.129.0>@tcp_agent:handle_info:225 ####
2017-05-20 15:50:12.398 [info] <0.129.0>@tcp_agent:wait_auth:96 {register,"yw","ist"}
2017-05-20 15:50:12.398 [info] <0.129.0>@tcp_agent:wait_auth:98 1
2017-05-20 15:50:12.398 [info] <0.129.0>@tcp_agent:wait_auth:109 true []
2017-05-20 15:50:12.398 [info] <0.129.0>@mod_mnesia:add_new_client:41 {client,1,"yw","ist",[],[]}
2017-05-20 15:50:12.399 [info] <0.129.0>@mod_mnesia:add_new_client:47 {atomic,ok}
2017-05-20 15:50:12.427 [info] <0.124.0>@client:start_link:45 ```````````````````````````````````````
2017-05-20 15:50:12.427 [info] <0.131.0>@client:init:67 ```````````````````````````````````````
2017-05-20 15:50:12.427 [info] <0.129.0>@tcp_agent:wait_auth:116 success register!
2017-05-20 15:50:12.428 [info] <0.131.0>@client:handle_cast:104 update state
2017-05-20 15:50:14.704 [info] <0.128.0>@tcp_agent:handle_info:217 *******************************************
2017-05-20 15:50:14.704 [info] <0.128.0>@tcp_agent:handle_info:221 <<"1">>
2017-05-20 15:50:14.704 [info] <0.128.0>@tcp_agent:handle_info:222 #{<<"cmd">> => <<"1">>,<<"password">> => <<"iyw">>,<<"username">> => <<"zst">>}
2017-05-20 15:50:14.704 [info] <0.128.0>@tcp_agent:handle_info:225 ####
2017-05-20 15:50:14.704 [info] <0.128.0>@tcp_agent:wait_auth:96 {register,"zst","iyw"}
2017-05-20 15:50:14.705 [info] <0.128.0>@tcp_agent:wait_auth:98 2
2017-05-20 15:50:14.705 [info] <0.128.0>@tcp_agent:wait_auth:109 true []
2017-05-20 15:50:14.705 [info] <0.128.0>@mod_mnesia:add_new_client:41 {client,2,"zst","iyw",[],[]}
2017-05-20 15:50:14.705 [info] <0.128.0>@mod_mnesia:add_new_client:47 {atomic,ok}
2017-05-20 15:50:14.705 [info] <0.124.0>@client:start_link:45 ```````````````````````````````````````
2017-05-20 15:50:14.705 [info] <0.132.0>@client:init:67 ```````````````````````````````````````
2017-05-20 15:50:14.705 [info] <0.128.0>@tcp_agent:wait_auth:116 success register!
2017-05-20 15:50:14.705 [info] <0.132.0>@client:handle_cast:104 update state
2017-05-20 15:50:20.217 [info] <0.128.0>@tcp_agent:handle_info:217 *******************************************
2017-05-20 15:50:20.217 [info] <0.128.0>@tcp_agent:handle_info:221 <<"3">>
2017-05-20 15:50:20.217 [info] <0.128.0>@tcp_agent:handle_info:222 #{<<"cmd">> => <<"3">>,<<"data">> => <<"wo xihuan ni">>,<<"id">> => <<"1">>,<<"to_id">> => <<"2">>,<<"to_type">> => <<"1">>}
2017-05-20 15:50:20.217 [info] <0.128.0>@tcp_agent:handle_info:247 {chat,1,1,2,"wo xihuan ni"}
2017-05-20 15:50:20.217 [info] <0.128.0>@tcp_agent:handle_info:248 {state,#Port<0.3682>,<0.132.0>}
2017-05-20 15:50:20.217 [info] <0.128.0>@tcp_agent:wait_data:137 chat begin
2017-05-20 15:50:20.217 [info] <0.132.0>@client:handle_info:123 send message to other client
2017-05-20 15:50:20.217 [info] <0.132.0>@client:handle_info:125 1
2017-05-20 15:50:20.217 [info] <0.132.0>@client:handle_info:126 []
2017-05-20 15:50:20.217 [info] <0.132.0>@client:handle_info:127 {client_receive_chat,1,"wo xihuan ni"}
2017-05-20 15:50:20.217 [error] <0.132.0> gen_server <0.132.0> terminated with reason: bad argument in client:handle_info/2 line 137
2017-05-20 15:50:20.262 [error] <0.132.0> CRASH REPORT Process <0.132.0> with 0 neighbours exited with reason: bad argument in client:handle_info/2 line 137
2017-05-20 15:50:20.262 [info] <0.124.0>@client:start_link:45 ```````````````````````````````````````
2017-05-20 15:50:20.262 [error] <0.124.0> Supervisor client_sup had child 2 started with client:start_link() at <0.132.0> exit with reason bad argument in client:handle_info/2 line 137 in context child_terminated
2017-05-20 15:50:20.262 [info] <0.133.0>@client:init:67 ```````````````````````````````````````
2017-05-20 15:52:28.161 [info] <0.31.0> Application lager started on node yangwei@brucedeiMac
2017-05-20 15:52:28.161 [info] <0.98.0>@chat_sup:init:26 ###############   Begin  ##############
2017-05-20 15:52:28.269 [info] <0.31.0> Application mnesia started on node yangwei@brucedeiMac
2017-05-20 15:52:28.276 [info] <0.99.0>@mod_control_sup:init:24 load tables:ok 
2017-05-20 15:52:28.276 [info] <0.99.0>@control_sup:init:63 
2017-05-20 15:52:28.283 [info] <0.121.0>@id_generator:init:30 ########### id_generator
2017-05-20 15:52:28.307 [info] <0.122.0>@group_sup:init:70 [] 
2017-05-20 15:52:28.307 [info] <0.122.0>@group_sup:init:77 [] 
2017-05-20 15:52:28.307 [info] <0.122.0>@group_sup:init:79 ######## group_sup
2017-05-20 15:52:28.317 [info] <0.124.0>@client_sup:init:65 ######## client_sup
2017-05-20 15:52:28.319 [info] <0.31.0> Application chat started on node yangwei@brucedeiMac
2017-05-20 15:52:32.549 [info] <0.126.0>@tcp_acceptor:process_Client_Socket:181 #Port<0.3682>
2017-05-20 15:52:32.577 [info] <0.126.0>@tcp_acceptor:process_Client_Socket:189 
2017-05-20 15:52:32.577 [info] <0.128.0>@tcp_agent:wait_socket:92 wait_socket: #Port<0.3682>
2017-05-20 15:52:33.582 [info] <0.128.0>@tcp_agent:handle_info:217 *******************************************
2017-05-20 15:52:33.636 [info] <0.128.0>@tcp_agent:handle_info:221 <<"1">>
2017-05-20 15:52:33.636 [info] <0.128.0>@tcp_agent:handle_info:222 #{<<"cmd">> => <<"1">>,<<"password">> => <<"iyw">>,<<"username">> => <<"zst">>}
2017-05-20 15:52:33.636 [info] <0.128.0>@tcp_agent:handle_info:225 ####
2017-05-20 15:52:33.636 [info] <0.128.0>@tcp_agent:wait_auth:96 {register,"zst","iyw"}
2017-05-20 15:52:33.637 [info] <0.128.0>@tcp_agent:wait_auth:98 1
2017-05-20 15:52:33.637 [info] <0.128.0>@tcp_agent:wait_auth:109 true [{1,<0.128.0>}]
2017-05-20 15:52:33.637 [info] <0.128.0>@mod_mnesia:add_new_client:41 {client,1,"zst","iyw",[],[]}
2017-05-20 15:52:33.637 [info] <0.128.0>@mod_mnesia:add_new_client:47 {atomic,ok}
2017-05-20 15:52:33.665 [info] <0.124.0>@client:start_link:45 ```````````````````````````````````````
2017-05-20 15:52:33.665 [info] <0.130.0>@client:init:67 ```````````````````````````````````````
2017-05-20 15:52:33.665 [info] <0.128.0>@tcp_agent:wait_auth:116 success register!
2017-05-20 15:52:33.665 [info] <0.130.0>@client:handle_cast:104 update state
2017-05-20 15:52:36.367 [info] <0.126.0>@tcp_acceptor:process_Client_Socket:181 #Port<0.3701>
2017-05-20 15:52:36.368 [info] <0.126.0>@tcp_acceptor:process_Client_Socket:189 
2017-05-20 15:52:36.368 [info] <0.131.0>@tcp_agent:wait_socket:92 wait_socket: #Port<0.3701>
2017-05-20 15:52:39.129 [info] <0.131.0>@tcp_agent:handle_info:217 *******************************************
2017-05-20 15:52:39.129 [info] <0.131.0>@tcp_agent:handle_info:221 <<"1">>
2017-05-20 15:52:39.129 [info] <0.131.0>@tcp_agent:handle_info:222 #{<<"cmd">> => <<"1">>,<<"password">> => <<"ist">>,<<"username">> => <<"yw">>}
2017-05-20 15:52:39.129 [info] <0.131.0>@tcp_agent:handle_info:225 ####
2017-05-20 15:52:39.129 [info] <0.131.0>@tcp_agent:wait_auth:96 {register,"yw","ist"}
2017-05-20 15:52:39.129 [info] <0.131.0>@tcp_agent:wait_auth:98 2
2017-05-20 15:52:39.129 [info] <0.131.0>@tcp_agent:wait_auth:109 true [{2,<0.131.0>}]
2017-05-20 15:52:39.129 [info] <0.131.0>@mod_mnesia:add_new_client:41 {client,2,"yw","ist",[],[]}
2017-05-20 15:52:39.129 [info] <0.131.0>@mod_mnesia:add_new_client:47 {atomic,ok}
2017-05-20 15:52:39.129 [info] <0.124.0>@client:start_link:45 ```````````````````````````````````````
2017-05-20 15:52:39.129 [info] <0.132.0>@client:init:67 ```````````````````````````````````````
2017-05-20 15:52:39.129 [info] <0.131.0>@tcp_agent:wait_auth:116 success register!
2017-05-20 15:52:39.129 [info] <0.132.0>@client:handle_cast:104 update state
2017-05-20 15:52:48.636 [info] <0.128.0>@tcp_agent:handle_info:217 *******************************************
2017-05-20 15:52:48.636 [info] <0.128.0>@tcp_agent:handle_info:221 <<"3">>
2017-05-20 15:52:48.636 [info] <0.128.0>@tcp_agent:handle_info:222 #{<<"cmd">> => <<"3">>,<<"data">> => <<"wo xihuan ni">>,<<"id">> => <<"1">>,<<"to_id">> => <<"2">>,<<"to_type">> => <<"1">>}
2017-05-20 15:52:48.636 [info] <0.128.0>@tcp_agent:handle_info:247 {chat,1,1,2,"wo xihuan ni"}
2017-05-20 15:52:48.636 [info] <0.128.0>@tcp_agent:handle_info:248 {state,#Port<0.3682>,<0.130.0>}
2017-05-20 15:52:48.636 [info] <0.128.0>@tcp_agent:wait_data:137 chat begin
2017-05-20 15:52:48.636 [info] <0.130.0>@client:handle_info:123 send message to other client
2017-05-20 15:52:48.636 [info] <0.130.0>@client:handle_info:125 1
2017-05-20 15:52:48.636 [info] <0.130.0>@client:handle_info:126 [{2,<0.131.0>}]
2017-05-20 15:52:48.636 [info] <0.130.0>@client:handle_info:127 {client_receive_chat,1,"wo xihuan ni"}
2017-05-20 15:52:48.636 [error] <0.130.0> gen_server <0.130.0> terminated with reason: bad argument in client:handle_info/2 line 137
2017-05-20 15:52:48.689 [error] <0.130.0> CRASH REPORT Process <0.130.0> with 0 neighbours exited with reason: bad argument in client:handle_info/2 line 137
2017-05-20 15:52:48.689 [info] <0.124.0>@client:start_link:45 ```````````````````````````````````````
2017-05-20 15:52:48.689 [error] <0.124.0> Supervisor client_sup had child 1 started with client:start_link() at <0.130.0> exit with reason bad argument in client:handle_info/2 line 137 in context child_terminated
2017-05-20 15:52:48.689 [info] <0.133.0>@client:init:67 ```````````````````````````````````````
2017-05-20 15:54:55.610 [info] <0.31.0> Application lager started on node yangwei@brucedeiMac
2017-05-20 15:54:55.610 [info] <0.98.0>@chat_sup:init:26 ###############   Begin  ##############
2017-05-20 15:54:55.739 [info] <0.31.0> Application mnesia started on node yangwei@brucedeiMac
2017-05-20 15:54:55.746 [info] <0.99.0>@mod_control_sup:init:24 load tables:ok 
2017-05-20 15:54:55.746 [info] <0.99.0>@control_sup:init:63 
2017-05-20 15:54:55.766 [info] <0.121.0>@id_generator:init:30 ########### id_generator
2017-05-20 15:54:55.801 [info] <0.122.0>@group_sup:init:70 [] 
2017-05-20 15:54:55.801 [info] <0.122.0>@group_sup:init:77 [] 
2017-05-20 15:54:55.801 [info] <0.122.0>@group_sup:init:79 ######## group_sup
2017-05-20 15:54:55.810 [info] <0.124.0>@client_sup:init:65 ######## client_sup
2017-05-20 15:54:55.814 [info] <0.31.0> Application chat started on node yangwei@brucedeiMac
2017-05-20 15:54:58.909 [info] <0.126.0>@tcp_acceptor:process_Client_Socket:181 #Port<0.3682>
2017-05-20 15:54:58.937 [info] <0.126.0>@tcp_acceptor:process_Client_Socket:189 
2017-05-20 15:54:58.937 [info] <0.128.0>@tcp_agent:wait_socket:92 wait_socket: #Port<0.3682>
2017-05-20 15:55:01.556 [info] <0.126.0>@tcp_acceptor:process_Client_Socket:181 #Port<0.3693>
2017-05-20 15:55:01.556 [info] <0.126.0>@tcp_acceptor:process_Client_Socket:189 
2017-05-20 15:55:01.556 [info] <0.129.0>@tcp_agent:wait_socket:92 wait_socket: #Port<0.3693>
2017-05-20 15:55:03.508 [info] <0.128.0>@tcp_agent:handle_info:217 *******************************************
2017-05-20 15:55:03.553 [info] <0.128.0>@tcp_agent:handle_info:221 <<"1">>
2017-05-20 15:55:03.553 [info] <0.128.0>@tcp_agent:handle_info:222 #{<<"cmd">> => <<"1">>,<<"password">> => <<"iyw">>,<<"username">> => <<"zst">>}
2017-05-20 15:55:03.553 [info] <0.128.0>@tcp_agent:handle_info:225 ####
2017-05-20 15:55:03.553 [info] <0.128.0>@tcp_agent:wait_auth:96 {register,"zst","iyw"}
2017-05-20 15:55:03.553 [info] <0.128.0>@tcp_agent:wait_auth:98 1
2017-05-20 15:55:03.553 [info] <0.128.0>@tcp_agent:wait_auth:109 true [{1,<0.128.0>}]
2017-05-20 15:55:03.553 [info] <0.128.0>@mod_mnesia:add_new_client:41 {client,1,"zst","iyw",[],[]}
2017-05-20 15:55:03.554 [info] <0.128.0>@mod_mnesia:add_new_client:47 {atomic,ok}
2017-05-20 15:55:03.564 [info] <0.124.0>@client:start_link:45 ```````````````````````````````````````
2017-05-20 15:55:03.564 [info] <0.131.0>@client:init:67 ```````````````````````````````````````
2017-05-20 15:55:03.564 [info] <0.128.0>@tcp_agent:wait_auth:116 success register!
2017-05-20 15:55:03.564 [info] <0.131.0>@client:handle_cast:104 update state
2017-05-20 15:55:08.368 [info] <0.128.0>@tcp_agent:handle_info:217 *******************************************
2017-05-20 15:55:08.368 [info] <0.128.0>@tcp_agent:handle_info:221 <<"3">>
2017-05-20 15:55:08.369 [info] <0.128.0>@tcp_agent:handle_info:222 #{<<"cmd">> => <<"3">>,<<"data">> => <<"wo xihuan ni">>,<<"id">> => <<"1">>,<<"to_id">> => <<"2">>,<<"to_type">> => <<"1">>}
2017-05-20 15:55:08.369 [info] <0.128.0>@tcp_agent:handle_info:247 {chat,1,1,2,"wo xihuan ni"}
2017-05-20 15:55:08.369 [info] <0.128.0>@tcp_agent:handle_info:248 {state,#Port<0.3682>,<0.131.0>}
2017-05-20 15:55:08.369 [info] <0.128.0>@tcp_agent:wait_data:137 chat begin
2017-05-20 15:55:08.369 [info] <0.131.0>@client:handle_info:123 send message to other client
2017-05-20 15:55:08.369 [info] <0.131.0>@client:handle_info:125 1
2017-05-20 15:55:08.369 [info] <0.131.0>@client:handle_info:126 []
2017-05-20 15:55:08.369 [info] <0.131.0>@client:handle_info:127 {client_receive_chat,1,"wo xihuan ni"}
2017-05-20 15:55:08.369 [error] <0.131.0> gen_server <0.131.0> terminated with reason: no match of right hand value [] in client:handle_info/2 line 131
2017-05-20 15:55:08.404 [info] <0.124.0>@client:start_link:45 ```````````````````````````````````````
2017-05-20 15:55:08.404 [error] <0.131.0> CRASH REPORT Process <0.131.0> with 0 neighbours exited with reason: no match of right hand value [] in client:handle_info/2 line 131 in gen_server:terminate/7 line 812
2017-05-20 15:55:08.404 [info] <0.132.0>@client:init:67 ```````````````````````````````````````
2017-05-20 15:55:08.404 [error] <0.124.0> Supervisor client_sup had child 1 started with client:start_link() at <0.131.0> exit with reason no match of right hand value [] in client:handle_info/2 line 131 in context child_terminated
2017-05-20 15:55:10.247 [info] <0.129.0>@tcp_agent:handle_info:217 *******************************************
2017-05-20 15:55:10.248 [info] <0.129.0>@tcp_agent:handle_info:221 <<"1">>
2017-05-20 15:55:10.248 [info] <0.129.0>@tcp_agent:handle_info:222 #{<<"cmd">> => <<"1">>,<<"password">> => <<"ist">>,<<"username">> => <<"yw">>}
2017-05-20 15:55:10.248 [info] <0.129.0>@tcp_agent:handle_info:225 ####
2017-05-20 15:55:10.248 [info] <0.129.0>@tcp_agent:wait_auth:96 {register,"yw","ist"}
2017-05-20 15:55:10.248 [info] <0.129.0>@tcp_agent:wait_auth:98 2
2017-05-20 15:55:10.248 [info] <0.129.0>@tcp_agent:wait_auth:109 true [{2,<0.129.0>}]
2017-05-20 15:55:10.248 [info] <0.129.0>@mod_mnesia:add_new_client:41 {client,2,"yw","ist",[],[]}
2017-05-20 15:55:10.248 [info] <0.129.0>@mod_mnesia:add_new_client:47 {atomic,ok}
2017-05-20 15:55:10.248 [info] <0.124.0>@client:start_link:45 ```````````````````````````````````````
2017-05-20 15:55:10.248 [info] <0.133.0>@client:init:67 ```````````````````````````````````````
2017-05-20 15:55:10.248 [info] <0.129.0>@tcp_agent:wait_auth:116 success register!
2017-05-20 15:55:10.248 [info] <0.133.0>@client:handle_cast:104 update state
2017-05-20 15:55:23.782 [info] <0.129.0>@tcp_agent:handle_info:217 *******************************************
2017-05-20 15:55:23.782 [info] <0.129.0>@tcp_agent:handle_info:221 <<"3">>
2017-05-20 15:55:23.782 [info] <0.129.0>@tcp_agent:handle_info:222 #{<<"cmd">> => <<"3">>,<<"data">> => <<"wo xihuan ni">>,<<"id">> => <<"2">>,<<"to_id">> => <<"1">>,<<"to_type">> => <<"1">>}
2017-05-20 15:55:23.782 [info] <0.129.0>@tcp_agent:handle_info:247 {chat,2,1,1,"wo xihuan ni"}
2017-05-20 15:55:23.782 [info] <0.129.0>@tcp_agent:handle_info:248 {state,#Port<0.3693>,<0.133.0>}
2017-05-20 15:55:23.782 [info] <0.129.0>@tcp_agent:wait_data:137 chat begin
2017-05-20 15:55:23.782 [info] <0.133.0>@client:handle_info:123 send message to other client
2017-05-20 15:55:23.782 [info] <0.133.0>@client:handle_info:125 1
2017-05-20 15:55:23.782 [info] <0.133.0>@client:handle_info:126 [{1,<0.128.0>}]
2017-05-20 15:55:23.782 [info] <0.133.0>@client:handle_info:127 {client_receive_chat,2,"wo xihuan ni"}
2017-05-20 15:55:23.782 [info] <0.128.0>@tcp_agent:handle_info:273 #Port<0.3682> 
2017-05-20 15:55:23.782 [info] <0.128.0>@tcp_agent:handle_info:274 "wo xihuan ni" 
2017-05-20 15:55:23.782 [info] <0.128.0>@tcp_agent:handle_info:275 tcp_agent receive unexpected info: {client_receive_chat,2,"wo xihuan ni"}
2017-05-20 15:55:23.782 [info] <0.128.0>@tcp_agent:terminate:292 {error,not_found}
2017-05-20 15:55:23.782 [info] <0.128.0>@tcp_agent:terminate:293 tcp_agent process is termianted
2017-05-20 15:55:23.782 [error] <0.128.0> gen_fsm <0.128.0> in state wait_data terminated with reason: "error tcp message"
2017-05-20 15:55:23.783 [error] <0.128.0> CRASH REPORT Process <0.128.0> with 0 neighbours exited with reason: "error tcp message" in gen_fsm:terminate/7 line 559
2017-05-20 15:55:23.783 [error] <0.125.0> Supervisor tcp_agent_sup had child #Port<0.3682> started with {tcp_agent,start_link,undefined} at <0.128.0> exit with reason "error tcp message" in context child_terminated
2017-05-20 15:59:35.719 [info] <0.31.0> Application lager started on node yangwei@brucedeiMac
2017-05-20 15:59:35.719 [info] <0.98.0>@chat_sup:init:26 ###############   Begin  ##############
2017-05-20 15:59:35.834 [info] <0.31.0> Application mnesia started on node yangwei@brucedeiMac
2017-05-20 15:59:35.842 [info] <0.99.0>@mod_control_sup:init:24 load tables:ok 
2017-05-20 15:59:35.842 [info] <0.99.0>@control_sup:init:63 
2017-05-20 15:59:35.852 [info] <0.121.0>@id_generator:init:30 ########### id_generator
2017-05-20 15:59:35.879 [info] <0.122.0>@group_sup:init:70 [] 
2017-05-20 15:59:35.879 [info] <0.122.0>@group_sup:init:77 [] 
2017-05-20 15:59:35.879 [info] <0.122.0>@group_sup:init:79 ######## group_sup
2017-05-20 15:59:35.887 [info] <0.124.0>@client_sup:init:65 ######## client_sup
2017-05-20 15:59:35.890 [info] <0.31.0> Application chat started on node yangwei@brucedeiMac
2017-05-20 15:59:41.754 [info] <0.126.0>@tcp_acceptor:process_Client_Socket:181 #Port<0.3682>
2017-05-20 15:59:41.812 [info] <0.126.0>@tcp_acceptor:process_Client_Socket:189 
2017-05-20 15:59:41.812 [info] <0.128.0>@tcp_agent:wait_socket:92 wait_socket: #Port<0.3682>
2017-05-20 15:59:42.805 [info] <0.128.0>@tcp_agent:handle_info:217 *******************************************
2017-05-20 15:59:42.829 [info] <0.128.0>@tcp_agent:handle_info:221 <<"1">>
2017-05-20 15:59:42.829 [info] <0.128.0>@tcp_agent:handle_info:222 #{<<"cmd">> => <<"1">>,<<"password">> => <<"iyw">>,<<"username">> => <<"zst">>}
2017-05-20 15:59:42.829 [info] <0.128.0>@tcp_agent:handle_info:225 ####
2017-05-20 15:59:42.829 [info] <0.128.0>@tcp_agent:wait_auth:96 {register,"zst","iyw"}
2017-05-20 15:59:42.829 [info] <0.128.0>@tcp_agent:wait_auth:98 1
2017-05-20 15:59:42.829 [info] <0.128.0>@tcp_agent:wait_auth:109 true [{1,<0.128.0>}]
2017-05-20 15:59:42.829 [info] <0.128.0>@mod_mnesia:add_new_client:41 {client,1,"zst","iyw",[],[]}
2017-05-20 15:59:42.830 [info] <0.128.0>@mod_mnesia:add_new_client:47 {atomic,ok}
2017-05-20 15:59:42.851 [info] <0.124.0>@client:start_link:45 ```````````````````````````````````````
2017-05-20 15:59:42.851 [info] <0.130.0>@client:init:67 ```````````````````````````````````````
2017-05-20 15:59:42.851 [info] <0.128.0>@tcp_agent:wait_auth:116 success register!
2017-05-20 15:59:42.851 [info] <0.130.0>@client:handle_cast:104 update state
2017-05-20 15:59:48.645 [info] <0.128.0>@tcp_agent:handle_info:217 *******************************************
2017-05-20 15:59:48.645 [info] <0.128.0>@tcp_agent:handle_info:221 <<"3">>
2017-05-20 15:59:48.645 [info] <0.128.0>@tcp_agent:handle_info:222 #{<<"cmd">> => <<"3">>,<<"data">> => <<"wo xihuan ni">>,<<"id">> => <<"1">>,<<"to_id">> => <<"2">>,<<"to_type">> => <<"1">>}
2017-05-20 15:59:48.645 [info] <0.128.0>@tcp_agent:handle_info:247 {chat,1,1,2,"wo xihuan ni"}
2017-05-20 15:59:48.645 [info] <0.128.0>@tcp_agent:handle_info:248 {state,#Port<0.3682>,<0.130.0>}
2017-05-20 15:59:48.645 [info] <0.128.0>@tcp_agent:wait_data:137 chat begin
2017-05-20 15:59:48.645 [info] <0.130.0>@client:handle_info:123 send message to other client
2017-05-20 15:59:48.645 [info] <0.130.0>@client:handle_info:125 1
2017-05-20 15:59:48.645 [info] <0.130.0>@client:handle_info:126 []
2017-05-20 15:59:48.645 [info] <0.130.0>@client:handle_info:127 {client_receive_chat,1,"wo xihuan ni"}
2017-05-20 15:59:48.645 [error] <0.130.0> gen_server <0.130.0> terminated with reason: no match of right hand value [] in client:handle_info/2 line 131
2017-05-20 15:59:48.702 [info] <0.124.0>@client:start_link:45 ```````````````````````````````````````
2017-05-20 15:59:48.702 [error] <0.130.0> CRASH REPORT Process <0.130.0> with 0 neighbours exited with reason: no match of right hand value [] in client:handle_info/2 line 131 in gen_server:terminate/7 line 812
2017-05-20 15:59:48.702 [info] <0.131.0>@client:init:67 ```````````````````````````````````````
2017-05-20 15:59:48.702 [error] <0.124.0> Supervisor client_sup had child 1 started with client:start_link() at <0.130.0> exit with reason no match of right hand value [] in client:handle_info/2 line 131 in context child_terminated
2017-05-20 16:03:51.122 [info] <0.31.0> Application lager started on node yangwei@brucedeiMac
2017-05-20 16:03:51.122 [info] <0.98.0>@chat_sup:init:26 ###############   Begin  ##############
2017-05-20 16:03:51.177 [info] <0.31.0> Application mnesia started on node yangwei@brucedeiMac
2017-05-20 16:03:51.183 [info] <0.99.0>@mod_control_sup:init:24 load tables:ok 
2017-05-20 16:03:51.183 [info] <0.99.0>@control_sup:init:63 
2017-05-20 16:03:51.184 [info] <0.121.0>@id_generator:init:30 ########### id_generator
2017-05-20 16:03:51.189 [info] <0.122.0>@group_sup:init:70 [] 
2017-05-20 16:03:51.189 [info] <0.122.0>@group_sup:init:77 [] 
2017-05-20 16:03:51.189 [info] <0.122.0>@group_sup:init:79 ######## group_sup
2017-05-20 16:03:51.190 [info] <0.124.0>@client_sup:init:65 ######## client_sup
2017-05-20 16:03:51.191 [info] <0.31.0> Application chat started on node yangwei@brucedeiMac
2017-05-20 16:03:58.830 [info] <0.126.0>@tcp_acceptor:process_Client_Socket:181 #Port<0.3682>
2017-05-20 16:03:58.833 [info] <0.126.0>@tcp_acceptor:process_Client_Socket:189 
2017-05-20 16:03:58.833 [info] <0.128.0>@tcp_agent:wait_socket:92 wait_socket: #Port<0.3682>
2017-05-20 16:04:01.924 [info] <0.126.0>@tcp_acceptor:process_Client_Socket:181 #Port<0.3693>
2017-05-20 16:04:01.925 [info] <0.126.0>@tcp_acceptor:process_Client_Socket:189 
2017-05-20 16:04:01.925 [info] <0.129.0>@tcp_agent:wait_socket:92 wait_socket: #Port<0.3693>
2017-05-20 16:04:06.003 [info] <0.128.0>@tcp_agent:handle_info:217 *******************************************
2017-05-20 16:04:06.007 [info] <0.128.0>@tcp_agent:handle_info:221 <<"1">>
2017-05-20 16:04:06.007 [info] <0.128.0>@tcp_agent:handle_info:222 #{<<"cmd">> => <<"1">>,<<"password">> => <<"iyw">>,<<"username">> => <<"zst">>}
2017-05-20 16:04:06.007 [info] <0.128.0>@tcp_agent:handle_info:225 ####
2017-05-20 16:04:06.007 [info] <0.128.0>@tcp_agent:wait_auth:96 {register,"zst","iyw"}
2017-05-20 16:04:06.007 [info] <0.128.0>@tcp_agent:wait_auth:98 1
2017-05-20 16:04:06.007 [info] <0.128.0>@tcp_agent:wait_auth:109 true [{1,<0.128.0>}]
2017-05-20 16:04:06.007 [info] <0.128.0>@mod_mnesia:add_new_client:41 {client,1,"zst","iyw",[],[]}
2017-05-20 16:04:06.007 [info] <0.128.0>@mod_mnesia:add_new_client:47 {atomic,ok}
2017-05-20 16:04:06.008 [info] <0.124.0>@client:start_link:45 ```````````````````````````````````````
2017-05-20 16:04:06.009 [info] <0.131.0>@client:init:67 ```````````````````````````````````````
2017-05-20 16:04:06.009 [info] <0.128.0>@tcp_agent:wait_auth:116 success register!
2017-05-20 16:04:06.009 [info] <0.131.0>@client:handle_cast:104 update state
2017-05-20 16:04:08.231 [info] <0.129.0>@tcp_agent:handle_info:217 *******************************************
2017-05-20 16:04:08.231 [info] <0.129.0>@tcp_agent:handle_info:221 <<"1">>
2017-05-20 16:04:08.231 [info] <0.129.0>@tcp_agent:handle_info:222 #{<<"cmd">> => <<"1">>,<<"password">> => <<"ist">>,<<"username">> => <<"yw">>}
2017-05-20 16:04:08.231 [info] <0.129.0>@tcp_agent:handle_info:225 ####
2017-05-20 16:04:08.231 [info] <0.129.0>@tcp_agent:wait_auth:96 {register,"yw","ist"}
2017-05-20 16:04:08.231 [info] <0.129.0>@tcp_agent:wait_auth:98 2
2017-05-20 16:04:08.231 [info] <0.129.0>@tcp_agent:wait_auth:109 true [{2,<0.129.0>}]
2017-05-20 16:04:08.231 [info] <0.129.0>@mod_mnesia:add_new_client:41 {client,2,"yw","ist",[],[]}
2017-05-20 16:04:08.231 [info] <0.129.0>@mod_mnesia:add_new_client:47 {atomic,ok}
2017-05-20 16:04:08.231 [info] <0.124.0>@client:start_link:45 ```````````````````````````````````````
2017-05-20 16:04:08.231 [info] <0.132.0>@client:init:67 ```````````````````````````````````````
2017-05-20 16:04:08.231 [info] <0.129.0>@tcp_agent:wait_auth:116 success register!
2017-05-20 16:04:08.231 [info] <0.132.0>@client:handle_cast:104 update state
2017-05-20 16:04:17.895 [info] <0.128.0>@tcp_agent:handle_info:217 *******************************************
2017-05-20 16:04:17.895 [info] <0.128.0>@tcp_agent:handle_info:221 <<"3">>
2017-05-20 16:04:17.895 [info] <0.128.0>@tcp_agent:handle_info:222 #{<<"cmd">> => <<"3">>,<<"data">> => <<"wo xihuan ni">>,<<"id">> => <<"1">>,<<"to_id">> => <<"2">>,<<"to_type">> => <<"1">>}
2017-05-20 16:04:17.895 [info] <0.128.0>@tcp_agent:handle_info:247 {chat,1,1,2,"wo xihuan ni"}
2017-05-20 16:04:17.895 [info] <0.128.0>@tcp_agent:handle_info:248 {state,#Port<0.3682>,<0.131.0>}
2017-05-20 16:04:17.895 [info] <0.128.0>@tcp_agent:wait_data:137 chat begin
2017-05-20 16:04:17.895 [info] <0.131.0>@client:handle_info:123 send message to other client
2017-05-20 16:04:17.895 [info] <0.131.0>@client:handle_info:125 1
2017-05-20 16:04:17.895 [info] <0.131.0>@client:handle_info:126 [{2,<0.129.0>}]
2017-05-20 16:04:17.895 [info] <0.131.0>@client:handle_info:127 {client_receive_chat,1,"wo xihuan ni"}
2017-05-20 16:04:17.895 [info] <0.129.0>@tcp_agent:handle_info:273 #Port<0.3693> 
2017-05-20 16:04:17.895 [info] <0.129.0>@tcp_agent:handle_info:274 "wo xihuan ni" 
2017-05-20 16:04:17.895 [info] <0.129.0>@tcp_agent:handle_info:275 tcp_agent receive unexpected info: {client_receive_chat,1,"wo xihuan ni"}
2017-05-20 16:04:17.895 [info] <0.129.0>@tcp_agent:terminate:292 {error,not_found}
2017-05-20 16:04:17.895 [info] <0.129.0>@tcp_agent:terminate:293 tcp_agent process is termianted
2017-05-20 16:04:17.895 [error] <0.129.0> gen_fsm <0.129.0> in state wait_data terminated with reason: "error tcp message"
2017-05-20 16:04:17.897 [error] <0.129.0> CRASH REPORT Process <0.129.0> with 0 neighbours exited with reason: "error tcp message" in gen_fsm:terminate/7 line 559
2017-05-20 16:04:17.898 [error] <0.125.0> Supervisor tcp_agent_sup had child #Port<0.3693> started with {tcp_agent,start_link,undefined} at <0.129.0> exit with reason "error tcp message" in context child_terminated
2017-05-20 16:12:05.883 [info] <0.31.0> Application lager started on node yangwei@brucedeiMac
2017-05-20 16:12:05.883 [info] <0.98.0>@chat_sup:init:26 ###############   Begin  ##############
2017-05-20 16:12:05.937 [info] <0.31.0> Application mnesia started on node yangwei@brucedeiMac
2017-05-20 16:12:05.944 [info] <0.99.0>@mod_control_sup:init:24 load tables:ok 
2017-05-20 16:12:05.944 [info] <0.99.0>@control_sup:init:63 
2017-05-20 16:12:05.945 [info] <0.121.0>@id_generator:init:30 ########### id_generator
2017-05-20 16:12:05.951 [info] <0.122.0>@group_sup:init:70 [] 
2017-05-20 16:12:05.951 [info] <0.122.0>@group_sup:init:77 [] 
2017-05-20 16:12:05.951 [info] <0.122.0>@group_sup:init:79 ######## group_sup
2017-05-20 16:12:05.952 [info] <0.124.0>@client_sup:init:65 ######## client_sup
2017-05-20 16:12:05.953 [info] <0.31.0> Application chat started on node yangwei@brucedeiMac
2017-05-20 16:12:21.092 [info] <0.126.0>@tcp_acceptor:process_Client_Socket:181 #Port<0.3682>
2017-05-20 16:12:21.095 [info] <0.126.0>@tcp_acceptor:process_Client_Socket:189 
2017-05-20 16:12:21.095 [info] <0.128.0>@tcp_agent:wait_socket:92 wait_socket: #Port<0.3682>
2017-05-20 16:12:24.024 [info] <0.128.0>@tcp_agent:handle_info:215 *******************************************
2017-05-20 16:12:24.028 [info] <0.128.0>@tcp_agent:handle_info:219 <<"1">>
2017-05-20 16:12:24.028 [info] <0.128.0>@tcp_agent:handle_info:220 #{<<"cmd">> => <<"1">>,<<"password">> => <<"iyw">>,<<"username">> => <<"zst">>}
2017-05-20 16:12:24.028 [info] <0.128.0>@tcp_agent:handle_info:223 ####
2017-05-20 16:12:24.028 [info] <0.128.0>@tcp_agent:wait_auth:96 {register,"zst","iyw"}
2017-05-20 16:12:24.028 [info] <0.128.0>@tcp_agent:wait_auth:98 1
2017-05-20 16:12:24.028 [info] <0.128.0>@mod_mnesia:add_new_client:41 {client,1,"zst","iyw",[],[]}
2017-05-20 16:12:24.028 [info] <0.128.0>@mod_mnesia:add_new_client:47 {atomic,ok}
2017-05-20 16:12:24.030 [info] <0.124.0>@client:start_link:45 ```````````````````````````````````````
2017-05-20 16:12:24.030 [info] <0.130.0>@client:init:67 ```````````````````````````````````````
2017-05-20 16:12:24.030 [info] <0.128.0>@tcp_agent:wait_auth:114 success register!
2017-05-20 16:12:24.030 [info] <0.130.0>@client:handle_cast:104 update state
2017-05-20 16:12:31.713 [info] <0.126.0>@tcp_acceptor:process_Client_Socket:181 #Port<0.3701>
2017-05-20 16:12:31.713 [info] <0.126.0>@tcp_acceptor:process_Client_Socket:189 
2017-05-20 16:12:31.713 [info] <0.131.0>@tcp_agent:wait_socket:92 wait_socket: #Port<0.3701>
2017-05-20 16:12:32.788 [info] <0.131.0>@tcp_agent:handle_info:215 *******************************************
2017-05-20 16:12:32.788 [info] <0.131.0>@tcp_agent:handle_info:219 <<"1">>
2017-05-20 16:12:32.788 [info] <0.131.0>@tcp_agent:handle_info:220 #{<<"cmd">> => <<"1">>,<<"password">> => <<"ist">>,<<"username">> => <<"yw">>}
2017-05-20 16:12:32.788 [info] <0.131.0>@tcp_agent:handle_info:223 ####
2017-05-20 16:12:32.788 [info] <0.131.0>@tcp_agent:wait_auth:96 {register,"yw","ist"}
2017-05-20 16:12:32.789 [info] <0.131.0>@tcp_agent:wait_auth:98 2
2017-05-20 16:12:32.789 [info] <0.131.0>@mod_mnesia:add_new_client:41 {client,2,"yw","ist",[],[]}
2017-05-20 16:12:32.789 [info] <0.131.0>@mod_mnesia:add_new_client:47 {atomic,ok}
2017-05-20 16:12:32.789 [info] <0.124.0>@client:start_link:45 ```````````````````````````````````````
2017-05-20 16:12:32.789 [info] <0.132.0>@client:init:67 ```````````````````````````````````````
2017-05-20 16:12:32.789 [info] <0.131.0>@tcp_agent:wait_auth:114 success register!
2017-05-20 16:12:32.789 [info] <0.132.0>@client:handle_cast:104 update state
2017-05-20 16:12:42.745 [info] <0.128.0>@tcp_agent:handle_info:215 *******************************************
2017-05-20 16:12:42.745 [info] <0.128.0>@tcp_agent:handle_info:219 <<"3">>
2017-05-20 16:12:42.745 [info] <0.128.0>@tcp_agent:handle_info:220 #{<<"cmd">> => <<"3">>,<<"data">> => <<"wo xihuan ni">>,<<"id">> => <<"1">>,<<"to_id">> => <<"2">>,<<"to_type">> => <<"1">>}
2017-05-20 16:12:42.745 [info] <0.128.0>@tcp_agent:handle_info:245 {chat,1,1,2,"wo xihuan ni"}
2017-05-20 16:12:42.745 [info] <0.128.0>@tcp_agent:handle_info:246 {state,#Port<0.3682>,<0.130.0>}
2017-05-20 16:12:42.745 [info] <0.128.0>@tcp_agent:wait_data:135 chat begin
2017-05-20 16:12:42.745 [info] <0.130.0>@client:handle_info:123 send message to other client
2017-05-20 16:12:42.745 [info] <0.130.0>@client:handle_info:125 1
2017-05-20 16:12:42.745 [info] <0.130.0>@client:handle_info:126 [{2,<0.132.0>}]
2017-05-20 16:12:42.745 [info] <0.130.0>@client:handle_info:127 {client_receive_chat,1,"wo xihuan ni"}
2017-05-20 16:12:42.745 [error] <0.132.0> gen_server <0.132.0> terminated with reason: no function clause matching client:handle_info({client_receive_chat,1,"wo xihuan ni"}, {state,<0.131.0>,2,#Port<0.3701>}) line 122
2017-05-20 16:12:42.747 [error] <0.132.0> CRASH REPORT Process <0.132.0> with 0 neighbours exited with reason: no function clause matching client:handle_info({client_receive_chat,1,"wo xihuan ni"}, {state,<0.131.0>,2,#Port<0.3701>}) line 122 in gen_server:terminate/7 line 812
2017-05-20 16:12:42.747 [info] <0.124.0>@client:start_link:45 ```````````````````````````````````````
2017-05-20 16:12:42.747 [info] <0.133.0>@client:init:67 ```````````````````````````````````````
2017-05-20 16:12:42.747 [error] <0.124.0> Supervisor client_sup had child 2 started with client:start_link() at <0.132.0> exit with reason no function clause matching client:handle_info({client_receive_chat,1,"wo xihuan ni"}, {state,<0.131.0>,2,#Port<0.3701>}) line 122 in context child_terminated
2017-05-20 16:19:58.391 [info] <0.31.0> Application lager started on node yangwei@brucedeiMac
2017-05-20 16:19:58.391 [info] <0.98.0>@chat_sup:init:26 ###############   Begin  ##############
2017-05-20 16:19:58.443 [info] <0.31.0> Application mnesia started on node yangwei@brucedeiMac
2017-05-20 16:19:58.450 [info] <0.99.0>@mod_control_sup:init:24 load tables:ok 
2017-05-20 16:19:58.450 [info] <0.99.0>@control_sup:init:63 
2017-05-20 16:19:58.450 [info] <0.121.0>@id_generator:init:30 ########### id_generator
2017-05-20 16:19:58.457 [info] <0.122.0>@group_sup:init:70 [] 
2017-05-20 16:19:58.457 [info] <0.122.0>@group_sup:init:77 [] 
2017-05-20 16:19:58.457 [info] <0.122.0>@group_sup:init:79 ######## group_sup
2017-05-20 16:19:58.458 [info] <0.124.0>@client_sup:init:65 ######## client_sup
2017-05-20 16:19:58.460 [info] <0.31.0> Application chat started on node yangwei@brucedeiMac
2017-05-20 16:20:02.301 [info] <0.126.0>@tcp_acceptor:process_Client_Socket:181 #Port<0.3682>
2017-05-20 16:20:02.304 [info] <0.126.0>@tcp_acceptor:process_Client_Socket:189 
2017-05-20 16:20:02.304 [info] <0.128.0>@tcp_agent:wait_socket:92 wait_socket: #Port<0.3682>
2017-05-20 16:20:03.377 [info] <0.128.0>@tcp_agent:handle_info:215 *******************************************
2017-05-20 16:20:03.380 [info] <0.128.0>@tcp_agent:handle_info:219 <<"1">>
2017-05-20 16:20:03.380 [info] <0.128.0>@tcp_agent:handle_info:220 #{<<"cmd">> => <<"1">>,<<"password">> => <<"iyw">>,<<"username">> => <<"zst">>}
2017-05-20 16:20:03.380 [info] <0.128.0>@tcp_agent:handle_info:223 ####
2017-05-20 16:20:03.380 [info] <0.128.0>@tcp_agent:wait_auth:96 {register,"zst","iyw"}
2017-05-20 16:20:03.381 [info] <0.128.0>@tcp_agent:wait_auth:98 1
2017-05-20 16:20:03.381 [info] <0.128.0>@mod_mnesia:add_new_client:41 {client,1,"zst","iyw",[],[]}
2017-05-20 16:20:03.381 [info] <0.128.0>@mod_mnesia:add_new_client:47 {atomic,ok}
2017-05-20 16:20:03.382 [info] <0.124.0>@client:start_link:45 ```````````````````````````````````````
2017-05-20 16:20:03.382 [info] <0.130.0>@client:init:67 ```````````````````````````````````````
2017-05-20 16:20:03.382 [info] <0.128.0>@tcp_agent:wait_auth:114 success register!
2017-05-20 16:20:03.382 [info] <0.130.0>@client:handle_cast:104 update state
2017-05-20 16:20:11.774 [info] <0.126.0>@tcp_acceptor:process_Client_Socket:181 #Port<0.3701>
2017-05-20 16:20:11.774 [info] <0.126.0>@tcp_acceptor:process_Client_Socket:189 
2017-05-20 16:20:11.774 [info] <0.131.0>@tcp_agent:wait_socket:92 wait_socket: #Port<0.3701>
2017-05-20 16:20:13.400 [info] <0.131.0>@tcp_agent:handle_info:215 *******************************************
2017-05-20 16:20:13.401 [info] <0.131.0>@tcp_agent:handle_info:219 <<"1">>
2017-05-20 16:20:13.401 [info] <0.131.0>@tcp_agent:handle_info:220 #{<<"cmd">> => <<"1">>,<<"password">> => <<"ist">>,<<"username">> => <<"yw">>}
2017-05-20 16:20:13.401 [info] <0.131.0>@tcp_agent:handle_info:223 ####
2017-05-20 16:20:13.401 [info] <0.131.0>@tcp_agent:wait_auth:96 {register,"yw","ist"}
2017-05-20 16:20:13.401 [info] <0.131.0>@tcp_agent:wait_auth:98 2
2017-05-20 16:20:13.401 [info] <0.131.0>@mod_mnesia:add_new_client:41 {client,2,"yw","ist",[],[]}
2017-05-20 16:20:13.401 [info] <0.131.0>@mod_mnesia:add_new_client:47 {atomic,ok}
2017-05-20 16:20:13.401 [info] <0.124.0>@client:start_link:45 ```````````````````````````````````````
2017-05-20 16:20:13.401 [info] <0.132.0>@client:init:67 ```````````````````````````````````````
2017-05-20 16:20:13.401 [info] <0.131.0>@tcp_agent:wait_auth:114 success register!
2017-05-20 16:20:13.401 [info] <0.132.0>@client:handle_cast:104 update state
2017-05-20 16:20:23.222 [info] <0.128.0>@tcp_agent:handle_info:215 *******************************************
2017-05-20 16:20:23.222 [info] <0.128.0>@tcp_agent:handle_info:219 <<"3">>
2017-05-20 16:20:23.222 [info] <0.128.0>@tcp_agent:handle_info:220 #{<<"cmd">> => <<"3">>,<<"data">> => <<"wo xihuan ni">>,<<"id">> => <<"1">>,<<"to_id">> => <<"2">>,<<"to_type">> => <<"1">>}
2017-05-20 16:20:23.223 [info] <0.128.0>@tcp_agent:handle_info:245 {chat,1,1,2,"wo xihuan ni"}
2017-05-20 16:20:23.223 [info] <0.128.0>@tcp_agent:handle_info:246 {state,#Port<0.3682>,<0.130.0>}
2017-05-20 16:20:23.223 [info] <0.128.0>@tcp_agent:wait_data:135 chat begin
2017-05-20 16:20:23.223 [info] <0.130.0>@client:handle_info:123 send message to other client
2017-05-20 16:20:23.223 [info] <0.130.0>@client:handle_info:125 1
2017-05-20 16:20:23.223 [info] <0.130.0>@client:handle_info:126 [{2,<0.132.0>}]
2017-05-20 16:20:23.223 [info] <0.130.0>@client:handle_info:127 {client_receive_chat,1,"wo xihuan ni"}
2017-05-20 16:20:23.223 [info] <0.130.0>@client:handle_info:139 <0.132.0>
2017-05-20 16:20:23.223 [info] <0.130.0>@client:handle_info:140 {client_receive_chat,1,"wo xihuan ni"}
2017-05-20 16:20:23.223 [error] <0.132.0> gen_server <0.132.0> terminated with reason: no function clause matching client:handle_info({client_receive_chat,1,"wo xihuan ni"}, {state,<0.131.0>,2,#Port<0.3701>}) line 122
2017-05-20 16:20:23.225 [error] <0.132.0> CRASH REPORT Process <0.132.0> with 0 neighbours exited with reason: no function clause matching client:handle_info({client_receive_chat,1,"wo xihuan ni"}, {state,<0.131.0>,2,#Port<0.3701>}) line 122 in gen_server:terminate/7 line 812
2017-05-20 16:20:23.225 [info] <0.124.0>@client:start_link:45 ```````````````````````````````````````
2017-05-20 16:20:23.225 [info] <0.133.0>@client:init:67 ```````````````````````````````````````
2017-05-20 16:20:23.225 [error] <0.124.0> Supervisor client_sup had child 2 started with client:start_link() at <0.132.0> exit with reason no function clause matching client:handle_info({client_receive_chat,1,"wo xihuan ni"}, {state,<0.131.0>,2,#Port<0.3701>}) line 122 in context child_terminated
2017-05-20 16:21:41.172 [info] <0.31.0> Application lager started on node yangwei@brucedeiMac
2017-05-20 16:21:41.172 [info] <0.98.0>@chat_sup:init:26 ###############   Begin  ##############
2017-05-20 16:21:41.225 [info] <0.31.0> Application mnesia started on node yangwei@brucedeiMac
2017-05-20 16:21:41.232 [info] <0.99.0>@mod_control_sup:init:24 load tables:ok 
2017-05-20 16:21:41.232 [info] <0.99.0>@control_sup:init:63 
2017-05-20 16:21:41.232 [info] <0.121.0>@id_generator:init:30 ########### id_generator
2017-05-20 16:21:41.238 [info] <0.122.0>@group_sup:init:70 [] 
2017-05-20 16:21:41.238 [info] <0.122.0>@group_sup:init:77 [] 
2017-05-20 16:21:41.238 [info] <0.122.0>@group_sup:init:79 ######## group_sup
2017-05-20 16:21:41.239 [info] <0.124.0>@client_sup:init:65 ######## client_sup
2017-05-20 16:21:41.240 [info] <0.31.0> Application chat started on node yangwei@brucedeiMac
2017-05-20 16:21:53.987 [info] <0.126.0>@tcp_acceptor:process_Client_Socket:181 #Port<0.3682>
2017-05-20 16:21:53.990 [info] <0.126.0>@tcp_acceptor:process_Client_Socket:189 
2017-05-20 16:21:53.990 [info] <0.128.0>@tcp_agent:wait_socket:92 wait_socket: #Port<0.3682>
2017-05-20 16:21:55.556 [info] <0.128.0>@tcp_agent:handle_info:215 *******************************************
2017-05-20 16:21:55.560 [info] <0.128.0>@tcp_agent:handle_info:219 <<"1">>
2017-05-20 16:21:55.560 [info] <0.128.0>@tcp_agent:handle_info:220 #{<<"cmd">> => <<"1">>,<<"password">> => <<"iyw">>,<<"username">> => <<"zst">>}
2017-05-20 16:21:55.560 [info] <0.128.0>@tcp_agent:handle_info:223 ####
2017-05-20 16:21:55.560 [info] <0.128.0>@tcp_agent:wait_auth:96 {register,"zst","iyw"}
2017-05-20 16:21:55.560 [info] <0.128.0>@tcp_agent:wait_auth:98 1
2017-05-20 16:21:55.560 [info] <0.128.0>@mod_mnesia:add_new_client:41 {client,1,"zst","iyw",[],[]}
2017-05-20 16:21:55.561 [info] <0.128.0>@mod_mnesia:add_new_client:47 {atomic,ok}
2017-05-20 16:21:55.562 [info] <0.124.0>@client:start_link:45 ```````````````````````````````````````
2017-05-20 16:21:55.562 [info] <0.130.0>@client:init:67 ```````````````````````````````````````
2017-05-20 16:21:55.562 [info] <0.128.0>@tcp_agent:wait_auth:114 success register!
2017-05-20 16:21:55.562 [info] <0.130.0>@client:handle_cast:104 update state
2017-05-20 16:21:58.634 [info] <0.126.0>@tcp_acceptor:process_Client_Socket:181 #Port<0.3701>
2017-05-20 16:21:58.634 [info] <0.126.0>@tcp_acceptor:process_Client_Socket:189 
2017-05-20 16:21:58.634 [info] <0.131.0>@tcp_agent:wait_socket:92 wait_socket: #Port<0.3701>
2017-05-20 16:21:59.810 [info] <0.131.0>@tcp_agent:handle_info:215 *******************************************
2017-05-20 16:21:59.810 [info] <0.131.0>@tcp_agent:handle_info:219 <<"1">>
2017-05-20 16:21:59.810 [info] <0.131.0>@tcp_agent:handle_info:220 #{<<"cmd">> => <<"1">>,<<"password">> => <<"ist">>,<<"username">> => <<"yw">>}
2017-05-20 16:21:59.810 [info] <0.131.0>@tcp_agent:handle_info:223 ####
2017-05-20 16:21:59.810 [info] <0.131.0>@tcp_agent:wait_auth:96 {register,"yw","ist"}
2017-05-20 16:21:59.811 [info] <0.131.0>@tcp_agent:wait_auth:98 2
2017-05-20 16:21:59.811 [info] <0.131.0>@mod_mnesia:add_new_client:41 {client,2,"yw","ist",[],[]}
2017-05-20 16:21:59.811 [info] <0.131.0>@mod_mnesia:add_new_client:47 {atomic,ok}
2017-05-20 16:21:59.811 [info] <0.124.0>@client:start_link:45 ```````````````````````````````````````
2017-05-20 16:21:59.811 [info] <0.132.0>@client:init:67 ```````````````````````````````````````
2017-05-20 16:21:59.811 [info] <0.131.0>@tcp_agent:wait_auth:114 success register!
2017-05-20 16:21:59.811 [info] <0.132.0>@client:handle_cast:104 update state
2017-05-20 16:29:01.780 [info] <0.128.0>@tcp_agent:handle_info:215 *******************************************
2017-05-20 16:29:01.780 [info] <0.128.0>@tcp_agent:handle_info:219 <<"3">>
2017-05-20 16:29:01.780 [info] <0.128.0>@tcp_agent:handle_info:220 #{<<"cmd">> => <<"3">>,<<"data">> => <<"wo xihuan ni">>,<<"id">> => <<"1">>,<<"to_id">> => <<"2">>,<<"to_type">> => <<"1">>}
2017-05-20 16:29:01.780 [info] <0.128.0>@tcp_agent:handle_info:245 {chat,1,1,2,"wo xihuan ni"}
2017-05-20 16:29:01.780 [info] <0.128.0>@tcp_agent:handle_info:246 {state,#Port<0.3682>,<0.130.0>}
2017-05-20 16:29:01.780 [info] <0.128.0>@tcp_agent:wait_data:135 chat begin
2017-05-20 16:29:01.780 [info] <0.130.0>@client:handle_info:123 send message to other client
2017-05-20 16:29:01.780 [info] <0.130.0>@client:handle_info:125 1
2017-05-20 16:29:01.780 [info] <0.130.0>@client:handle_info:126 [{2,<0.132.0>}]
2017-05-20 16:29:01.780 [info] <0.130.0>@client:handle_info:127 {client_receive_chat,1,"wo xihuan ni"}
2017-05-20 16:29:01.780 [info] <0.130.0>@client:handle_info:139 <0.132.0>
2017-05-20 16:29:01.780 [info] <0.130.0>@client:handle_info:140 {client_receive_chat,1,"wo xihuan ni"}
2017-05-20 16:29:01.780 [error] <0.132.0> gen_server <0.132.0> terminated with reason: no function clause matching client:handle_info({client_receive_chat,1,"wo xihuan ni"}, {state,<0.131.0>,2,#Port<0.3701>}) line 122
2017-05-20 16:29:01.782 [info] <0.124.0>@client:start_link:45 ```````````````````````````````````````
2017-05-20 16:29:01.782 [error] <0.132.0> CRASH REPORT Process <0.132.0> with 0 neighbours exited with reason: no function clause matching client:handle_info({client_receive_chat,1,"wo xihuan ni"}, {state,<0.131.0>,2,#Port<0.3701>}) line 122 in gen_server:terminate/7 line 812
2017-05-20 16:29:01.782 [info] <0.170.0>@client:init:67 ```````````````````````````````````````
2017-05-20 16:29:01.782 [error] <0.124.0> Supervisor client_sup had child 2 started with client:start_link() at <0.132.0> exit with reason no function clause matching client:handle_info({client_receive_chat,1,"wo xihuan ni"}, {state,<0.131.0>,2,#Port<0.3701>}) line 122 in context child_terminated
2017-05-20 16:32:45.721 [info] <0.31.0> Application lager started on node yangwei@brucedeiMac
2017-05-20 16:32:45.721 [info] <0.98.0>@chat_sup:init:26 ###############   Begin  ##############
2017-05-20 16:32:45.775 [info] <0.31.0> Application mnesia started on node yangwei@brucedeiMac
2017-05-20 16:32:45.782 [info] <0.99.0>@mod_control_sup:init:24 load tables:ok 
2017-05-20 16:32:45.782 [info] <0.99.0>@control_sup:init:63 
2017-05-20 16:32:45.783 [info] <0.121.0>@id_generator:init:30 ########### id_generator
2017-05-20 16:32:45.788 [info] <0.122.0>@group_sup:init:70 [] 
2017-05-20 16:32:45.788 [info] <0.122.0>@group_sup:init:77 [] 
2017-05-20 16:32:45.788 [info] <0.122.0>@group_sup:init:79 ######## group_sup
2017-05-20 16:32:45.789 [info] <0.124.0>@client_sup:init:65 ######## client_sup
2017-05-20 16:32:45.790 [info] <0.31.0> Application chat started on node yangwei@brucedeiMac
2017-05-20 16:32:48.912 [info] <0.126.0>@tcp_acceptor:process_Client_Socket:181 #Port<0.3682>
2017-05-20 16:32:48.915 [info] <0.126.0>@tcp_acceptor:process_Client_Socket:189 
2017-05-20 16:32:48.915 [info] <0.128.0>@tcp_agent:wait_socket:92 wait_socket: #Port<0.3682>
2017-05-20 16:32:50.188 [info] <0.128.0>@tcp_agent:handle_info:215 *******************************************
2017-05-20 16:32:50.192 [info] <0.128.0>@tcp_agent:handle_info:219 <<"1">>
2017-05-20 16:32:50.192 [info] <0.128.0>@tcp_agent:handle_info:220 #{<<"cmd">> => <<"1">>,<<"password">> => <<"iyw">>,<<"username">> => <<"zst">>}
2017-05-20 16:32:50.192 [info] <0.128.0>@tcp_agent:handle_info:223 ####
2017-05-20 16:32:50.192 [info] <0.128.0>@tcp_agent:wait_auth:96 {register,"zst","iyw"}
2017-05-20 16:32:50.192 [info] <0.128.0>@tcp_agent:wait_auth:98 1
2017-05-20 16:32:50.192 [info] <0.128.0>@mod_mnesia:add_new_client:41 {client,1,"zst","iyw",[],[]}
2017-05-20 16:32:50.192 [info] <0.128.0>@mod_mnesia:add_new_client:47 {atomic,ok}
2017-05-20 16:32:50.193 [info] <0.124.0>@client:start_link:45 ```````````````````````````````````````
2017-05-20 16:32:50.193 [info] <0.130.0>@client:init:67 ```````````````````````````````````````
2017-05-20 16:32:50.194 [info] <0.128.0>@tcp_agent:wait_auth:114 success register!
2017-05-20 16:32:50.194 [info] <0.130.0>@client:handle_cast:104 update state
2017-05-20 16:32:55.687 [info] <0.126.0>@tcp_acceptor:process_Client_Socket:181 #Port<0.3701>
2017-05-20 16:32:55.687 [info] <0.126.0>@tcp_acceptor:process_Client_Socket:189 
2017-05-20 16:32:55.687 [info] <0.131.0>@tcp_agent:wait_socket:92 wait_socket: #Port<0.3701>
2017-05-20 16:32:56.644 [info] <0.131.0>@tcp_agent:handle_info:215 *******************************************
2017-05-20 16:32:56.644 [info] <0.131.0>@tcp_agent:handle_info:219 <<"1">>
2017-05-20 16:32:56.644 [info] <0.131.0>@tcp_agent:handle_info:220 #{<<"cmd">> => <<"1">>,<<"password">> => <<"ist">>,<<"username">> => <<"yw">>}
2017-05-20 16:32:56.644 [info] <0.131.0>@tcp_agent:handle_info:223 ####
2017-05-20 16:32:56.644 [info] <0.131.0>@tcp_agent:wait_auth:96 {register,"yw","ist"}
2017-05-20 16:32:56.645 [info] <0.131.0>@tcp_agent:wait_auth:98 2
2017-05-20 16:32:56.645 [info] <0.131.0>@mod_mnesia:add_new_client:41 {client,2,"yw","ist",[],[]}
2017-05-20 16:32:56.645 [info] <0.131.0>@mod_mnesia:add_new_client:47 {atomic,ok}
2017-05-20 16:32:56.645 [info] <0.124.0>@client:start_link:45 ```````````````````````````````````````
2017-05-20 16:32:56.645 [info] <0.132.0>@client:init:67 ```````````````````````````````````````
2017-05-20 16:32:56.645 [info] <0.131.0>@tcp_agent:wait_auth:114 success register!
2017-05-20 16:32:56.645 [info] <0.132.0>@client:handle_cast:104 update state
2017-05-20 16:33:02.132 [info] <0.128.0>@tcp_agent:handle_info:215 *******************************************
2017-05-20 16:33:02.132 [info] <0.128.0>@tcp_agent:handle_info:219 <<"3">>
2017-05-20 16:33:02.132 [info] <0.128.0>@tcp_agent:handle_info:220 #{<<"cmd">> => <<"3">>,<<"data">> => <<"wo xihuan ni">>,<<"id">> => <<"1">>,<<"to_id">> => <<"2">>,<<"to_type">> => <<"1">>}
2017-05-20 16:33:02.132 [info] <0.128.0>@tcp_agent:handle_info:245 {chat,1,1,2,"wo xihuan ni"}
2017-05-20 16:33:02.132 [info] <0.128.0>@tcp_agent:handle_info:246 {state,#Port<0.3682>,<0.130.0>}
2017-05-20 16:33:02.132 [info] <0.128.0>@tcp_agent:wait_data:135 chat begin
2017-05-20 16:33:02.132 [info] <0.130.0>@client:handle_info:123 send message to other client
2017-05-20 16:33:02.132 [info] <0.130.0>@client:handle_info:125 1
2017-05-20 16:33:02.132 [info] <0.130.0>@client:handle_info:126 [{2,<0.132.0>}]
2017-05-20 16:33:02.132 [info] <0.130.0>@client:handle_info:127 {client_receive_chat,1,"wo xihuan ni"}
2017-05-20 16:33:02.132 [info] <0.130.0>@client:handle_info:139 <0.132.0>
2017-05-20 16:33:02.132 [info] <0.130.0>@client:handle_info:140 {client_receive_chat,1,"wo xihuan ni"}
2017-05-20 16:33:02.132 [info] <0.132.0>@client:handle_info:146 receive message and send to client
2017-05-20 16:33:02.164 [error] emulator Bad value on output port 'tcp_inet'

2017-05-20 16:33:02.164 [error] <0.132.0> gen_server <0.132.0> terminated with reason: bad return value: {norely,{state,<0.131.0>,2,#Port<0.3701>}}
2017-05-20 16:33:02.166 [error] <0.132.0> CRASH REPORT Process <0.132.0> with 0 neighbours exited with reason: bad return value: {norely,{state,<0.131.0>,2,#Port<0.3701>}} in gen_server:terminate/7 line 812
2017-05-20 16:33:02.166 [info] <0.124.0>@client:start_link:45 ```````````````````````````````````````
2017-05-20 16:33:02.166 [error] <0.124.0> Supervisor client_sup had child 2 started with client:start_link() at <0.132.0> exit with reason bad return value: {norely,{state,<0.131.0>,2,#Port<0.3701>}} in context child_terminated
2017-05-20 16:33:02.166 [info] <0.133.0>@client:init:67 ```````````````````````````````````````
2017-05-20 16:41:38.440 [info] <0.31.0> Application lager started on node yangwei@brucedeiMac
2017-05-20 16:41:38.440 [info] <0.98.0>@chat_sup:init:26 ###############   Begin  ##############
2017-05-20 16:41:38.547 [info] <0.31.0> Application mnesia started on node yangwei@brucedeiMac
2017-05-20 16:41:38.556 [info] <0.99.0>@mod_control_sup:init:24 load tables:ok 
2017-05-20 16:41:38.556 [info] <0.99.0>@control_sup:init:63 
2017-05-20 16:41:38.559 [info] <0.121.0>@id_generator:init:30 ########### id_generator
2017-05-20 16:41:38.597 [info] <0.122.0>@group_sup:init:70 [] 
2017-05-20 16:41:38.597 [info] <0.122.0>@group_sup:init:77 [] 
2017-05-20 16:41:38.597 [info] <0.122.0>@group_sup:init:79 ######## group_sup
2017-05-20 16:41:38.606 [info] <0.124.0>@client_sup:init:65 ######## client_sup
2017-05-20 16:41:38.609 [info] <0.31.0> Application chat started on node yangwei@brucedeiMac
2017-05-20 16:41:54.617 [info] <0.126.0>@tcp_acceptor:process_Client_Socket:181 #Port<0.3682>
2017-05-20 16:41:54.656 [info] <0.126.0>@tcp_acceptor:process_Client_Socket:189 
2017-05-20 16:41:54.656 [info] <0.128.0>@tcp_agent:wait_socket:92 wait_socket: #Port<0.3682>
2017-05-20 16:41:56.508 [info] <0.128.0>@tcp_agent:handle_info:215 *******************************************
2017-05-20 16:41:56.549 [info] <0.128.0>@tcp_agent:handle_info:219 <<"1">>
2017-05-20 16:41:56.549 [info] <0.128.0>@tcp_agent:handle_info:220 #{<<"cmd">> => <<"1">>,<<"password">> => <<"iyw">>,<<"username">> => <<"zst">>}
2017-05-20 16:41:56.549 [info] <0.128.0>@tcp_agent:handle_info:223 ####
2017-05-20 16:41:56.549 [info] <0.128.0>@tcp_agent:wait_auth:96 {register,"zst","iyw"}
2017-05-20 16:41:56.550 [info] <0.128.0>@tcp_agent:wait_auth:98 1
2017-05-20 16:41:56.550 [info] <0.128.0>@mod_mnesia:add_new_client:41 {client,1,"zst","iyw",[],[]}
2017-05-20 16:41:56.550 [info] <0.128.0>@mod_mnesia:add_new_client:47 {atomic,ok}
2017-05-20 16:41:56.558 [info] <0.124.0>@client:start_link:45 ```````````````````````````````````````
2017-05-20 16:41:56.558 [info] <0.130.0>@client:init:67 ```````````````````````````````````````
2017-05-20 16:41:56.558 [info] <0.128.0>@tcp_agent:wait_auth:114 success register!
2017-05-20 16:41:56.558 [info] <0.130.0>@client:handle_cast:104 update state
2017-05-20 16:41:59.304 [info] <0.126.0>@tcp_acceptor:process_Client_Socket:181 #Port<0.3701>
2017-05-20 16:41:59.304 [info] <0.126.0>@tcp_acceptor:process_Client_Socket:189 
2017-05-20 16:41:59.305 [info] <0.131.0>@tcp_agent:wait_socket:92 wait_socket: #Port<0.3701>
2017-05-20 16:42:00.066 [info] <0.131.0>@tcp_agent:handle_info:215 *******************************************
2017-05-20 16:42:00.066 [info] <0.131.0>@tcp_agent:handle_info:219 <<"1">>
2017-05-20 16:42:00.066 [info] <0.131.0>@tcp_agent:handle_info:220 #{<<"cmd">> => <<"1">>,<<"password">> => <<"ist">>,<<"username">> => <<"yw">>}
2017-05-20 16:42:00.066 [info] <0.131.0>@tcp_agent:handle_info:223 ####
2017-05-20 16:42:00.066 [info] <0.131.0>@tcp_agent:wait_auth:96 {register,"yw","ist"}
2017-05-20 16:42:00.067 [info] <0.131.0>@tcp_agent:wait_auth:98 2
2017-05-20 16:42:00.067 [info] <0.131.0>@mod_mnesia:add_new_client:41 {client,2,"yw","ist",[],[]}
2017-05-20 16:42:00.067 [info] <0.131.0>@mod_mnesia:add_new_client:47 {atomic,ok}
2017-05-20 16:42:00.067 [info] <0.124.0>@client:start_link:45 ```````````````````````````````````````
2017-05-20 16:42:00.067 [info] <0.132.0>@client:init:67 ```````````````````````````````````````
2017-05-20 16:42:00.067 [info] <0.131.0>@tcp_agent:wait_auth:114 success register!
2017-05-20 16:42:00.067 [info] <0.132.0>@client:handle_cast:104 update state
2017-05-20 16:42:05.852 [info] <0.128.0>@tcp_agent:handle_info:215 *******************************************
2017-05-20 16:42:05.852 [info] <0.128.0>@tcp_agent:handle_info:219 <<"3">>
2017-05-20 16:42:05.852 [info] <0.128.0>@tcp_agent:handle_info:220 #{<<"cmd">> => <<"3">>,<<"data">> => <<"wo xihuan ni">>,<<"id">> => <<"1">>,<<"to_id">> => <<"2">>,<<"to_type">> => <<"1">>}
2017-05-20 16:42:05.852 [info] <0.128.0>@tcp_agent:handle_info:245 {chat,1,1,2,"wo xihuan ni"}
2017-05-20 16:42:05.852 [info] <0.128.0>@tcp_agent:handle_info:246 {state,#Port<0.3682>,<0.130.0>}
2017-05-20 16:42:05.852 [info] <0.128.0>@tcp_agent:wait_data:135 chat begin
2017-05-20 16:42:05.852 [info] <0.130.0>@client:handle_info:123 send message to other client
2017-05-20 16:42:05.852 [info] <0.130.0>@client:handle_info:125 1
2017-05-20 16:42:05.852 [info] <0.130.0>@client:handle_info:126 [{2,<0.132.0>}]
2017-05-20 16:42:05.852 [info] <0.130.0>@client:handle_info:127 {client_receive_chat,1,"wo xihuan ni"}
2017-05-20 16:42:05.852 [info] <0.130.0>@client:handle_info:139 <0.132.0>
2017-05-20 16:42:05.852 [info] <0.130.0>@client:handle_info:140 {client_receive_chat,1,"wo xihuan ni"}
2017-05-20 16:42:05.852 [info] <0.132.0>@client:handle_info:146 receive message and send to socket
2017-05-20 16:42:05.852 [info] <0.132.0>@client:handle_info:148 [49,35828,58,119,111,32,120,105,104,117,97,110,32,110,105]
2017-05-20 16:42:05.852 [error] <0.132.0> gen_server <0.132.0> terminated with reason: bad return value: {norely,{state,<0.131.0>,2,#Port<0.3701>}}
2017-05-20 16:42:05.852 [error] emulator Bad value on output port 'tcp_inet'

2017-05-20 16:42:05.854 [error] <0.132.0> CRASH REPORT Process <0.132.0> with 0 neighbours exited with reason: bad return value: {norely,{state,<0.131.0>,2,#Port<0.3701>}} in gen_server:terminate/7 line 812
2017-05-20 16:42:05.854 [info] <0.124.0>@client:start_link:45 ```````````````````````````````````````
2017-05-20 16:42:05.855 [error] <0.124.0> Supervisor client_sup had child 2 started with client:start_link() at <0.132.0> exit with reason bad return value: {norely,{state,<0.131.0>,2,#Port<0.3701>}} in context child_terminated
2017-05-20 16:42:05.855 [info] <0.133.0>@client:init:67 ```````````````````````````````````````
2017-05-20 16:43:25.743 [info] <0.31.0> Application lager started on node yangwei@brucedeiMac
2017-05-20 16:43:25.743 [info] <0.98.0>@chat_sup:init:26 ###############   Begin  ##############
2017-05-20 16:43:25.869 [info] <0.31.0> Application mnesia started on node yangwei@brucedeiMac
2017-05-20 16:43:25.877 [info] <0.99.0>@mod_control_sup:init:24 load tables:ok 
2017-05-20 16:43:25.877 [info] <0.99.0>@control_sup:init:63 
2017-05-20 16:43:25.878 [info] <0.121.0>@id_generator:init:30 ########### id_generator
2017-05-20 16:43:25.900 [info] <0.122.0>@group_sup:init:70 [] 
2017-05-20 16:43:25.900 [info] <0.122.0>@group_sup:init:77 [] 
2017-05-20 16:43:25.900 [info] <0.122.0>@group_sup:init:79 ######## group_sup
2017-05-20 16:43:25.910 [info] <0.124.0>@client_sup:init:65 ######## client_sup
2017-05-20 16:43:25.920 [info] <0.31.0> Application chat started on node yangwei@brucedeiMac
2017-05-20 16:43:38.309 [info] <0.126.0>@tcp_acceptor:process_Client_Socket:181 #Port<0.3682>
2017-05-20 16:43:38.337 [info] <0.126.0>@tcp_acceptor:process_Client_Socket:189 
2017-05-20 16:43:38.337 [info] <0.128.0>@tcp_agent:wait_socket:92 wait_socket: #Port<0.3682>
2017-05-20 16:43:39.356 [info] <0.128.0>@tcp_agent:handle_info:215 *******************************************
2017-05-20 16:43:39.387 [info] <0.128.0>@tcp_agent:handle_info:219 <<"1">>
2017-05-20 16:43:39.387 [info] <0.128.0>@tcp_agent:handle_info:220 #{<<"cmd">> => <<"1">>,<<"password">> => <<"iyw">>,<<"username">> => <<"zst">>}
2017-05-20 16:43:39.387 [info] <0.128.0>@tcp_agent:handle_info:223 ####
2017-05-20 16:43:39.387 [info] <0.128.0>@tcp_agent:wait_auth:96 {register,"zst","iyw"}
2017-05-20 16:43:39.387 [info] <0.128.0>@tcp_agent:wait_auth:98 1
2017-05-20 16:43:39.387 [info] <0.128.0>@mod_mnesia:add_new_client:41 {client,1,"zst","iyw",[],[]}
2017-05-20 16:43:39.388 [info] <0.128.0>@mod_mnesia:add_new_client:47 {atomic,ok}
2017-05-20 16:43:39.395 [info] <0.124.0>@client:start_link:45 ```````````````````````````````````````
2017-05-20 16:43:39.395 [info] <0.130.0>@client:init:67 ```````````````````````````````````````
2017-05-20 16:43:39.395 [info] <0.128.0>@tcp_agent:wait_auth:114 success register!
2017-05-20 16:43:39.395 [info] <0.130.0>@client:handle_cast:104 update state
2017-05-20 16:43:41.432 [info] <0.126.0>@tcp_acceptor:process_Client_Socket:181 #Port<0.3701>
2017-05-20 16:43:41.432 [info] <0.126.0>@tcp_acceptor:process_Client_Socket:189 
2017-05-20 16:43:41.432 [info] <0.131.0>@tcp_agent:wait_socket:92 wait_socket: #Port<0.3701>
2017-05-20 16:43:43.156 [info] <0.131.0>@tcp_agent:handle_info:215 *******************************************
2017-05-20 16:43:43.156 [info] <0.131.0>@tcp_agent:handle_info:219 <<"1">>
2017-05-20 16:43:43.156 [info] <0.131.0>@tcp_agent:handle_info:220 #{<<"cmd">> => <<"1">>,<<"password">> => <<"ist">>,<<"username">> => <<"yw">>}
2017-05-20 16:43:43.156 [info] <0.131.0>@tcp_agent:handle_info:223 ####
2017-05-20 16:43:43.156 [info] <0.131.0>@tcp_agent:wait_auth:96 {register,"yw","ist"}
2017-05-20 16:43:43.156 [info] <0.131.0>@tcp_agent:wait_auth:98 2
2017-05-20 16:43:43.156 [info] <0.131.0>@mod_mnesia:add_new_client:41 {client,2,"yw","ist",[],[]}
2017-05-20 16:43:43.156 [info] <0.131.0>@mod_mnesia:add_new_client:47 {atomic,ok}
2017-05-20 16:43:43.156 [info] <0.124.0>@client:start_link:45 ```````````````````````````````````````
2017-05-20 16:43:43.156 [info] <0.132.0>@client:init:67 ```````````````````````````````````````
2017-05-20 16:43:43.156 [info] <0.131.0>@tcp_agent:wait_auth:114 success register!
2017-05-20 16:43:43.156 [info] <0.132.0>@client:handle_cast:104 update state
2017-05-20 16:43:53.052 [info] <0.128.0>@tcp_agent:handle_info:215 *******************************************
2017-05-20 16:43:53.052 [info] <0.128.0>@tcp_agent:handle_info:219 <<"3">>
2017-05-20 16:43:53.052 [info] <0.128.0>@tcp_agent:handle_info:220 #{<<"cmd">> => <<"3">>,<<"data">> => <<" wo xihuan ni">>,<<"id">> => <<"1">>,<<"to_id">> => <<"2">>,<<"to_type">> => <<"1">>}
2017-05-20 16:43:53.052 [info] <0.128.0>@tcp_agent:handle_info:245 {chat,1,1,2," wo xihuan ni"}
2017-05-20 16:43:53.052 [info] <0.128.0>@tcp_agent:handle_info:246 {state,#Port<0.3682>,<0.130.0>}
2017-05-20 16:43:53.052 [info] <0.128.0>@tcp_agent:wait_data:135 chat begin
2017-05-20 16:43:53.052 [info] <0.130.0>@client:handle_info:123 send message to other client
2017-05-20 16:43:53.052 [info] <0.130.0>@client:handle_info:125 1
2017-05-20 16:43:53.052 [info] <0.130.0>@client:handle_info:126 [{2,<0.132.0>}]
2017-05-20 16:43:53.052 [info] <0.130.0>@client:handle_info:127 {client_receive_chat,1," wo xihuan ni"}
2017-05-20 16:43:53.052 [info] <0.130.0>@client:handle_info:139 <0.132.0>
2017-05-20 16:43:53.052 [info] <0.130.0>@client:handle_info:140 {client_receive_chat,1," wo xihuan ni"}
2017-05-20 16:43:53.052 [info] <0.132.0>@client:handle_info:146 receive message and send to socket
2017-05-20 16:43:53.052 [info] <0.132.0>@client:handle_info:148 [49,35828,58,32,119,111,32,120,105,104,117,97,110,32,110,105]
2017-05-20 16:43:53.052 [error] emulator Bad value on output port 'tcp_inet'

2017-05-20 16:48:51.464 [info] <0.31.0> Application lager started on node yangwei@brucedeiMac
2017-05-20 16:48:51.464 [info] <0.98.0>@chat_sup:init:26 ###############   Begin  ##############
2017-05-20 16:48:51.589 [info] <0.31.0> Application mnesia started on node yangwei@brucedeiMac
2017-05-20 16:48:51.597 [info] <0.99.0>@mod_control_sup:init:24 load tables:ok 
2017-05-20 16:48:51.597 [info] <0.99.0>@control_sup:init:63 
2017-05-20 16:48:51.598 [info] <0.121.0>@id_generator:init:30 ########### id_generator
2017-05-20 16:48:51.621 [info] <0.122.0>@group_sup:init:70 [] 
2017-05-20 16:48:51.621 [info] <0.122.0>@group_sup:init:77 [] 
2017-05-20 16:48:51.621 [info] <0.122.0>@group_sup:init:79 ######## group_sup
2017-05-20 16:48:51.631 [info] <0.124.0>@client_sup:init:65 ######## client_sup
2017-05-20 16:48:51.641 [info] <0.31.0> Application chat started on node yangwei@brucedeiMac
2017-05-20 16:48:59.163 [info] <0.126.0>@tcp_acceptor:process_Client_Socket:181 #Port<0.3682>
2017-05-20 16:48:59.191 [info] <0.126.0>@tcp_acceptor:process_Client_Socket:189 
2017-05-20 16:48:59.191 [info] <0.128.0>@tcp_agent:wait_socket:92 wait_socket: #Port<0.3682>
2017-05-20 16:49:00.604 [info] <0.128.0>@tcp_agent:handle_info:215 *******************************************
2017-05-20 16:49:00.651 [info] <0.128.0>@tcp_agent:handle_info:219 <<"1">>
2017-05-20 16:49:00.651 [info] <0.128.0>@tcp_agent:handle_info:220 #{<<"cmd">> => <<"1">>,<<"password">> => <<"iyw">>,<<"username">> => <<"zst">>}
2017-05-20 16:49:00.651 [info] <0.128.0>@tcp_agent:handle_info:223 ####
2017-05-20 16:49:00.651 [info] <0.128.0>@tcp_agent:wait_auth:96 {register,"zst","iyw"}
2017-05-20 16:49:00.652 [info] <0.128.0>@tcp_agent:wait_auth:98 1
2017-05-20 16:49:00.652 [info] <0.128.0>@mod_mnesia:add_new_client:41 {client,1,"zst","iyw",[],[]}
2017-05-20 16:49:00.652 [info] <0.128.0>@mod_mnesia:add_new_client:47 {atomic,ok}
2017-05-20 16:49:00.660 [info] <0.124.0>@client:start_link:45 ```````````````````````````````````````
2017-05-20 16:49:00.660 [info] <0.130.0>@client:init:67 ```````````````````````````````````````
2017-05-20 16:49:00.660 [info] <0.128.0>@tcp_agent:wait_auth:114 success register!
2017-05-20 16:49:00.660 [info] <0.130.0>@client:handle_cast:104 update state
2017-05-20 16:49:07.552 [info] <0.126.0>@tcp_acceptor:process_Client_Socket:181 #Port<0.3701>
2017-05-20 16:49:07.552 [info] <0.126.0>@tcp_acceptor:process_Client_Socket:189 
2017-05-20 16:49:07.552 [info] <0.131.0>@tcp_agent:wait_socket:92 wait_socket: #Port<0.3701>
2017-05-20 16:49:08.549 [info] <0.131.0>@tcp_agent:handle_info:215 *******************************************
2017-05-20 16:49:08.549 [info] <0.131.0>@tcp_agent:handle_info:219 <<"1">>
2017-05-20 16:49:08.549 [info] <0.131.0>@tcp_agent:handle_info:220 #{<<"cmd">> => <<"1">>,<<"password">> => <<"ist">>,<<"username">> => <<"yw">>}
2017-05-20 16:49:08.549 [info] <0.131.0>@tcp_agent:handle_info:223 ####
2017-05-20 16:49:08.549 [info] <0.131.0>@tcp_agent:wait_auth:96 {register,"yw","ist"}
2017-05-20 16:49:08.550 [info] <0.131.0>@tcp_agent:wait_auth:98 2
2017-05-20 16:49:08.550 [info] <0.131.0>@mod_mnesia:add_new_client:41 {client,2,"yw","ist",[],[]}
2017-05-20 16:49:08.550 [info] <0.131.0>@mod_mnesia:add_new_client:47 {atomic,ok}
2017-05-20 16:49:08.550 [info] <0.124.0>@client:start_link:45 ```````````````````````````````````````
2017-05-20 16:49:08.550 [info] <0.132.0>@client:init:67 ```````````````````````````````````````
2017-05-20 16:49:08.550 [info] <0.131.0>@tcp_agent:wait_auth:114 success register!
2017-05-20 16:49:08.550 [info] <0.132.0>@client:handle_cast:104 update state
2017-05-20 16:49:14.212 [info] <0.128.0>@tcp_agent:handle_info:215 *******************************************
2017-05-20 16:49:14.212 [info] <0.128.0>@tcp_agent:handle_info:219 <<"3">>
2017-05-20 16:49:14.212 [info] <0.128.0>@tcp_agent:handle_info:220 #{<<"cmd">> => <<"3">>,<<"data">> => <<"wo xihuan ni">>,<<"id">> => <<"1">>,<<"to_id">> => <<"2">>,<<"to_type">> => <<"1">>}
2017-05-20 16:49:14.212 [info] <0.128.0>@tcp_agent:handle_info:245 {chat,1,1,2,"wo xihuan ni"}
2017-05-20 16:49:14.212 [info] <0.128.0>@tcp_agent:handle_info:246 {state,#Port<0.3682>,<0.130.0>}
2017-05-20 16:49:14.212 [info] <0.128.0>@tcp_agent:wait_data:135 chat begin
2017-05-20 16:49:14.212 [info] <0.130.0>@client:handle_info:123 send message to other client
2017-05-20 16:49:14.212 [info] <0.130.0>@client:handle_info:125 1
2017-05-20 16:49:14.212 [info] <0.130.0>@client:handle_info:126 [{2,<0.132.0>}]
2017-05-20 16:49:14.212 [info] <0.130.0>@client:handle_info:127 {client_receive_chat,1,"wo xihuan ni"}
2017-05-20 16:49:14.212 [info] <0.130.0>@client:handle_info:139 <0.132.0>
2017-05-20 16:49:14.212 [info] <0.130.0>@client:handle_info:140 {client_receive_chat,1,"wo xihuan ni"}
2017-05-20 16:49:14.212 [info] <0.132.0>@client:handle_info:146 receive message and send to socket
2017-05-20 16:49:14.212 [info] <0.132.0>@client:handle_info:148 "1said:wo xihuan ni"
2017-05-20 16:49:14.212 [info] <0.132.0>@client:handle_info:149 #Port<0.3701>
2017-05-20 16:49:43.324 [info] <0.128.0>@tcp_agent:handle_info:215 *******************************************
2017-05-20 16:49:43.324 [info] <0.128.0>@tcp_agent:handle_info:219 <<"3">>
2017-05-20 16:49:43.324 [info] <0.128.0>@tcp_agent:handle_info:220 #{<<"cmd">> => <<"3">>,<<"data">> => <<" zhe shi shenme gui">>,<<"id">> => <<"1">>,<<"to_id">> => <<"2">>,<<"to_type">> => <<"1">>}
2017-05-20 16:49:43.324 [info] <0.128.0>@tcp_agent:handle_info:245 {chat,1,1,2," zhe shi shenme gui"}
2017-05-20 16:49:43.324 [info] <0.128.0>@tcp_agent:handle_info:246 {state,#Port<0.3682>,<0.130.0>}
2017-05-20 16:49:43.324 [info] <0.128.0>@tcp_agent:wait_data:135 chat begin
2017-05-20 16:49:43.324 [info] <0.130.0>@client:handle_info:123 send message to other client
2017-05-20 16:49:43.324 [info] <0.130.0>@client:handle_info:125 1
2017-05-20 16:49:43.324 [info] <0.130.0>@client:handle_info:126 [{2,<0.132.0>}]
2017-05-20 16:49:43.324 [info] <0.130.0>@client:handle_info:127 {client_receive_chat,1," zhe shi shenme gui"}
2017-05-20 16:49:43.324 [info] <0.130.0>@client:handle_info:139 <0.132.0>
2017-05-20 16:49:43.324 [info] <0.130.0>@client:handle_info:140 {client_receive_chat,1," zhe shi shenme gui"}
2017-05-20 16:49:43.324 [info] <0.132.0>@client:handle_info:146 receive message and send to socket
2017-05-20 16:49:43.324 [info] <0.132.0>@client:handle_info:148 "1said: zhe shi shenme gui"
2017-05-20 16:49:43.324 [info] <0.132.0>@client:handle_info:149 #Port<0.3701>
2017-05-20 16:50:12.290 [info] <0.31.0> Application lager started on node yangwei@brucedeiMac
2017-05-20 16:50:12.291 [info] <0.98.0>@chat_sup:init:26 ###############   Begin  ##############
2017-05-20 16:50:12.343 [info] <0.31.0> Application mnesia started on node yangwei@brucedeiMac
2017-05-20 16:50:12.349 [info] <0.99.0>@mod_control_sup:init:24 load tables:ok 
2017-05-20 16:50:12.349 [info] <0.99.0>@control_sup:init:63 
2017-05-20 16:50:12.349 [info] <0.121.0>@id_generator:init:30 ########### id_generator
2017-05-20 16:50:12.355 [info] <0.122.0>@group_sup:init:70 [] 
2017-05-20 16:50:12.355 [info] <0.122.0>@group_sup:init:77 [] 
2017-05-20 16:50:12.355 [info] <0.122.0>@group_sup:init:79 ######## group_sup
2017-05-20 16:50:12.355 [info] <0.124.0>@client_sup:init:65 ######## client_sup
2017-05-20 16:50:12.357 [info] <0.31.0> Application chat started on node yangwei@brucedeiMac
2017-05-20 16:50:17.177 [info] <0.126.0>@tcp_acceptor:process_Client_Socket:181 #Port<0.3682>
2017-05-20 16:50:17.205 [info] <0.126.0>@tcp_acceptor:process_Client_Socket:189 
2017-05-20 16:50:17.205 [info] <0.128.0>@tcp_agent:wait_socket:92 wait_socket: #Port<0.3682>
2017-05-20 16:50:21.924 [info] <0.126.0>@tcp_acceptor:process_Client_Socket:181 #Port<0.3693>
2017-05-20 16:50:21.924 [info] <0.126.0>@tcp_acceptor:process_Client_Socket:189 
2017-05-20 16:50:21.924 [info] <0.129.0>@tcp_agent:wait_socket:92 wait_socket: #Port<0.3693>
2017-05-20 16:50:25.220 [info] <0.128.0>@tcp_agent:handle_info:215 *******************************************
2017-05-20 16:50:25.267 [info] <0.128.0>@tcp_agent:handle_info:219 <<"1">>
2017-05-20 16:50:25.267 [info] <0.128.0>@tcp_agent:handle_info:220 #{<<"cmd">> => <<"1">>,<<"password">> => <<"iyw">>,<<"username">> => <<"zst">>}
2017-05-20 16:50:25.267 [info] <0.128.0>@tcp_agent:handle_info:223 ####
2017-05-20 16:50:25.267 [info] <0.128.0>@tcp_agent:wait_auth:96 {register,"zst","iyw"}
2017-05-20 16:50:25.267 [info] <0.128.0>@tcp_agent:wait_auth:98 1
2017-05-20 16:50:25.267 [info] <0.128.0>@mod_mnesia:add_new_client:41 {client,1,"zst","iyw",[],[]}
2017-05-20 16:50:25.268 [info] <0.128.0>@mod_mnesia:add_new_client:47 {atomic,ok}
2017-05-20 16:50:25.278 [info] <0.124.0>@client:start_link:45 ```````````````````````````````````````
2017-05-20 16:50:25.278 [info] <0.131.0>@client:init:67 ```````````````````````````````````````
2017-05-20 16:50:25.278 [info] <0.128.0>@tcp_agent:wait_auth:114 success register!
2017-05-20 16:50:25.278 [info] <0.131.0>@client:handle_cast:104 update state
2017-05-20 16:50:27.812 [info] <0.129.0>@tcp_agent:handle_info:215 *******************************************
2017-05-20 16:50:27.812 [info] <0.129.0>@tcp_agent:handle_info:219 <<"1">>
2017-05-20 16:50:27.812 [info] <0.129.0>@tcp_agent:handle_info:220 #{<<"cmd">> => <<"1">>,<<"password">> => <<"ist">>,<<"username">> => <<"yw">>}
2017-05-20 16:50:27.812 [info] <0.129.0>@tcp_agent:handle_info:223 ####
2017-05-20 16:50:27.812 [info] <0.129.0>@tcp_agent:wait_auth:96 {register,"yw","ist"}
2017-05-20 16:50:27.812 [info] <0.129.0>@tcp_agent:wait_auth:98 2
2017-05-20 16:50:27.812 [info] <0.129.0>@mod_mnesia:add_new_client:41 {client,2,"yw","ist",[],[]}
2017-05-20 16:50:27.812 [info] <0.129.0>@mod_mnesia:add_new_client:47 {atomic,ok}
2017-05-20 16:50:27.812 [info] <0.124.0>@client:start_link:45 ```````````````````````````````````````
2017-05-20 16:50:27.812 [info] <0.132.0>@client:init:67 ```````````````````````````````````````
2017-05-20 16:50:27.812 [info] <0.129.0>@tcp_agent:wait_auth:114 success register!
2017-05-20 16:50:27.812 [info] <0.132.0>@client:handle_cast:104 update state
2017-05-20 16:50:38.764 [info] <0.128.0>@tcp_agent:handle_info:215 *******************************************
2017-05-20 16:50:38.764 [info] <0.128.0>@tcp_agent:handle_info:219 <<"3">>
2017-05-20 16:50:38.764 [info] <0.128.0>@tcp_agent:handle_info:220 #{<<"cmd">> => <<"3">>,<<"data">> => <<"liaotianba">>,<<"id">> => <<"1">>,<<"to_id">> => <<"2">>,<<"to_type">> => <<"1">>}
2017-05-20 16:50:38.764 [info] <0.128.0>@tcp_agent:handle_info:245 {chat,1,1,2,"liaotianba"}
2017-05-20 16:50:38.764 [info] <0.128.0>@tcp_agent:handle_info:246 {state,#Port<0.3682>,<0.131.0>}
2017-05-20 16:50:38.764 [info] <0.128.0>@tcp_agent:wait_data:135 chat begin
2017-05-20 16:50:38.764 [info] <0.131.0>@client:handle_info:123 send message to other client
2017-05-20 16:50:38.764 [info] <0.131.0>@client:handle_info:125 1
2017-05-20 16:50:38.764 [info] <0.131.0>@client:handle_info:126 [{2,<0.132.0>}]
2017-05-20 16:50:38.764 [info] <0.131.0>@client:handle_info:127 {client_receive_chat,1,"liaotianba"}
2017-05-20 16:50:38.764 [info] <0.131.0>@client:handle_info:139 <0.132.0>
2017-05-20 16:50:38.764 [info] <0.131.0>@client:handle_info:140 {client_receive_chat,1,"liaotianba"}
2017-05-20 16:50:38.764 [info] <0.132.0>@client:handle_info:146 receive message and send to socket
2017-05-20 16:50:38.764 [info] <0.132.0>@client:handle_info:148 "1said:liaotianba"
2017-05-20 16:50:38.764 [info] <0.132.0>@client:handle_info:149 #Port<0.3693>
2017-05-20 16:51:15.084 [info] <0.128.0>@tcp_agent:handle_info:215 *******************************************
2017-05-20 16:51:15.084 [info] <0.128.0>@tcp_agent:handle_info:219 <<"3">>
2017-05-20 16:51:15.084 [info] <0.128.0>@tcp_agent:handle_info:220 #{<<"cmd">> => <<"3">>,<<"data">> => <<"zailaiyifa">>,<<"id">> => <<"1">>,<<"to_id">> => <<"2">>,<<"to_type">> => <<"1">>}
2017-05-20 16:51:15.084 [info] <0.128.0>@tcp_agent:handle_info:245 {chat,1,1,2,"zailaiyifa"}
2017-05-20 16:51:15.084 [info] <0.128.0>@tcp_agent:handle_info:246 {state,#Port<0.3682>,<0.131.0>}
2017-05-20 16:51:15.084 [info] <0.128.0>@tcp_agent:wait_data:135 chat begin
2017-05-20 16:51:15.084 [info] <0.131.0>@client:handle_info:123 send message to other client
2017-05-20 16:51:15.084 [info] <0.131.0>@client:handle_info:125 1
2017-05-20 16:51:15.084 [info] <0.131.0>@client:handle_info:126 [{2,<0.132.0>}]
2017-05-20 16:51:15.084 [info] <0.131.0>@client:handle_info:127 {client_receive_chat,1,"zailaiyifa"}
2017-05-20 16:51:15.084 [info] <0.131.0>@client:handle_info:139 <0.132.0>
2017-05-20 16:51:15.084 [info] <0.131.0>@client:handle_info:140 {client_receive_chat,1,"zailaiyifa"}
2017-05-20 16:51:15.084 [info] <0.132.0>@client:handle_info:146 receive message and send to socket
2017-05-20 16:51:15.084 [info] <0.132.0>@client:handle_info:148 "1said:zailaiyifa"
2017-05-20 16:51:15.084 [info] <0.132.0>@client:handle_info:149 #Port<0.3693>
2017-05-20 16:51:39.076 [info] <0.128.0>@tcp_agent:handle_info:215 *******************************************
2017-05-20 16:51:39.076 [info] <0.128.0>@tcp_agent:handle_info:219 <<"3">>
2017-05-20 16:51:39.076 [info] <0.128.0>@tcp_agent:handle_info:220 #{<<"cmd">> => <<"3">>,<<"data">> => <<"wocao">>,<<"id">> => <<"1">>,<<"to_id">> => <<"2">>,<<"to_type">> => <<"1">>}
2017-05-20 16:51:39.076 [info] <0.128.0>@tcp_agent:handle_info:245 {chat,1,1,2,"wocao"}
2017-05-20 16:51:39.076 [info] <0.128.0>@tcp_agent:handle_info:246 {state,#Port<0.3682>,<0.131.0>}
2017-05-20 16:51:39.076 [info] <0.128.0>@tcp_agent:wait_data:135 chat begin
2017-05-20 16:51:39.076 [info] <0.131.0>@client:handle_info:123 send message to other client
2017-05-20 16:51:39.076 [info] <0.131.0>@client:handle_info:125 1
2017-05-20 16:51:39.076 [info] <0.131.0>@client:handle_info:126 [{2,<0.132.0>}]
2017-05-20 16:51:39.076 [info] <0.131.0>@client:handle_info:127 {client_receive_chat,1,"wocao"}
2017-05-20 16:51:39.076 [info] <0.131.0>@client:handle_info:139 <0.132.0>
2017-05-20 16:51:39.076 [info] <0.131.0>@client:handle_info:140 {client_receive_chat,1,"wocao"}
2017-05-20 16:51:39.076 [info] <0.132.0>@client:handle_info:146 receive message and send to socket
2017-05-20 16:51:39.076 [info] <0.132.0>@client:handle_info:148 "1said:wocao"
2017-05-20 16:51:39.076 [info] <0.132.0>@client:handle_info:149 #Port<0.3693>
2017-05-20 16:51:42.436 [info] <0.128.0>@tcp_agent:handle_info:215 *******************************************
2017-05-20 16:51:42.436 [info] <0.128.0>@tcp_agent:handle_info:219 <<"3">>
2017-05-20 16:51:42.436 [info] <0.128.0>@tcp_agent:handle_info:220 #{<<"cmd">> => <<"3">>,<<"data">> => <<"wocao">>,<<"id">> => <<"1">>,<<"to_id">> => <<"2">>,<<"to_type">> => <<"1">>}
2017-05-20 16:51:42.436 [info] <0.128.0>@tcp_agent:handle_info:245 {chat,1,1,2,"wocao"}
2017-05-20 16:51:42.436 [info] <0.128.0>@tcp_agent:handle_info:246 {state,#Port<0.3682>,<0.131.0>}
2017-05-20 16:51:42.436 [info] <0.128.0>@tcp_agent:wait_data:135 chat begin
2017-05-20 16:51:42.436 [info] <0.131.0>@client:handle_info:123 send message to other client
2017-05-20 16:51:42.436 [info] <0.131.0>@client:handle_info:125 1
2017-05-20 16:51:42.436 [info] <0.131.0>@client:handle_info:126 [{2,<0.132.0>}]
2017-05-20 16:51:42.436 [info] <0.131.0>@client:handle_info:127 {client_receive_chat,1,"wocao"}
2017-05-20 16:51:42.436 [info] <0.131.0>@client:handle_info:139 <0.132.0>
2017-05-20 16:51:42.436 [info] <0.131.0>@client:handle_info:140 {client_receive_chat,1,"wocao"}
2017-05-20 16:51:42.436 [info] <0.132.0>@client:handle_info:146 receive message and send to socket
2017-05-20 16:51:42.436 [info] <0.132.0>@client:handle_info:148 "1said:wocao"
2017-05-20 16:51:42.436 [info] <0.132.0>@client:handle_info:149 #Port<0.3693>
2017-05-20 16:51:46.027 [info] <0.129.0>@tcp_agent:handle_info:262 tcp closed, state: wait_data
2017-05-20 16:51:46.027 [info] <0.129.0>@tcp_agent:terminate:290 {error,not_found}
2017-05-20 16:51:46.027 [info] <0.129.0>@tcp_agent:terminate:291 tcp_agent process is termianted
2017-05-20 16:52:47.127 [info] <0.31.0> Application lager started on node yangwei@brucedeiMac
2017-05-20 16:52:47.127 [info] <0.98.0>@chat_sup:init:26 ###############   Begin  ##############
2017-05-20 16:52:47.247 [info] <0.31.0> Application mnesia started on node yangwei@brucedeiMac
2017-05-20 16:52:47.254 [info] <0.99.0>@mod_control_sup:init:24 load tables:ok 
2017-05-20 16:52:47.254 [info] <0.99.0>@control_sup:init:63 
2017-05-20 16:52:47.255 [info] <0.121.0>@id_generator:init:30 ########### id_generator
2017-05-20 16:52:47.284 [info] <0.122.0>@group_sup:init:70 [] 
2017-05-20 16:52:47.284 [info] <0.122.0>@group_sup:init:77 [] 
2017-05-20 16:52:47.284 [info] <0.122.0>@group_sup:init:79 ######## group_sup
2017-05-20 16:52:47.293 [info] <0.124.0>@client_sup:init:65 ######## client_sup
2017-05-20 16:52:47.295 [info] <0.31.0> Application chat started on node yangwei@brucedeiMac
2017-05-20 16:52:50.303 [info] <0.126.0>@tcp_acceptor:process_Client_Socket:181 #Port<0.3682>
2017-05-20 16:52:50.365 [info] <0.126.0>@tcp_acceptor:process_Client_Socket:189 
2017-05-20 16:52:50.365 [info] <0.128.0>@tcp_agent:wait_socket:92 wait_socket: #Port<0.3682>
2017-05-20 16:52:51.812 [info] <0.128.0>@tcp_agent:handle_info:215 *******************************************
2017-05-20 16:52:51.858 [info] <0.128.0>@tcp_agent:handle_info:219 <<"1">>
2017-05-20 16:52:51.858 [info] <0.128.0>@tcp_agent:handle_info:220 #{<<"cmd">> => <<"1">>,<<"password">> => <<"iyw">>,<<"username">> => <<"zst">>}
2017-05-20 16:52:51.858 [info] <0.128.0>@tcp_agent:handle_info:223 ####
2017-05-20 16:52:51.858 [info] <0.128.0>@tcp_agent:wait_auth:96 {register,"zst","iyw"}
2017-05-20 16:52:51.859 [info] <0.128.0>@tcp_agent:wait_auth:98 1
2017-05-20 16:52:51.859 [info] <0.128.0>@mod_mnesia:add_new_client:41 {client,1,"zst","iyw",[],[]}
2017-05-20 16:52:51.859 [info] <0.128.0>@mod_mnesia:add_new_client:47 {atomic,ok}
2017-05-20 16:52:51.872 [info] <0.124.0>@client:start_link:45 ```````````````````````````````````````
2017-05-20 16:52:51.872 [info] <0.130.0>@client:init:67 ```````````````````````````````````````
2017-05-20 16:52:51.872 [info] <0.128.0>@tcp_agent:wait_auth:114 success register!
2017-05-20 16:52:51.872 [info] <0.130.0>@client:handle_cast:104 update state
2017-05-20 16:52:54.106 [info] <0.126.0>@tcp_acceptor:process_Client_Socket:181 #Port<0.3701>
2017-05-20 16:52:54.106 [info] <0.126.0>@tcp_acceptor:process_Client_Socket:189 
2017-05-20 16:52:54.106 [info] <0.131.0>@tcp_agent:wait_socket:92 wait_socket: #Port<0.3701>
2017-05-20 16:52:55.101 [info] <0.131.0>@tcp_agent:handle_info:215 *******************************************
2017-05-20 16:52:55.101 [info] <0.131.0>@tcp_agent:handle_info:219 <<"1">>
2017-05-20 16:52:55.101 [info] <0.131.0>@tcp_agent:handle_info:220 #{<<"cmd">> => <<"1">>,<<"password">> => <<"ist">>,<<"username">> => <<"yw">>}
2017-05-20 16:52:55.101 [info] <0.131.0>@tcp_agent:handle_info:223 ####
2017-05-20 16:52:55.101 [info] <0.131.0>@tcp_agent:wait_auth:96 {register,"yw","ist"}
2017-05-20 16:52:55.101 [info] <0.131.0>@tcp_agent:wait_auth:98 2
2017-05-20 16:52:55.101 [info] <0.131.0>@mod_mnesia:add_new_client:41 {client,2,"yw","ist",[],[]}
2017-05-20 16:52:55.101 [info] <0.131.0>@mod_mnesia:add_new_client:47 {atomic,ok}
2017-05-20 16:52:55.101 [info] <0.124.0>@client:start_link:45 ```````````````````````````````````````
2017-05-20 16:52:55.102 [info] <0.132.0>@client:init:67 ```````````````````````````````````````
2017-05-20 16:52:55.102 [info] <0.131.0>@tcp_agent:wait_auth:114 success register!
2017-05-20 16:52:55.102 [info] <0.132.0>@client:handle_cast:104 update state
2017-05-20 16:53:02.660 [info] <0.131.0>@tcp_agent:handle_info:215 *******************************************
2017-05-20 16:53:02.660 [info] <0.131.0>@tcp_agent:handle_info:219 <<"3">>
2017-05-20 16:53:02.660 [info] <0.131.0>@tcp_agent:handle_info:220 #{<<"cmd">> => <<"3">>,<<"data">> => <<"woyexihuanni">>,<<"id">> => <<"1">>,<<"to_id">> => <<"2">>,<<"to_type">> => <<"1">>}
2017-05-20 16:53:02.660 [info] <0.131.0>@tcp_agent:handle_info:245 {chat,1,1,2,"woyexihuanni"}
2017-05-20 16:53:02.660 [info] <0.131.0>@tcp_agent:handle_info:246 {state,#Port<0.3701>,<0.132.0>}
2017-05-20 16:53:02.660 [info] <0.131.0>@tcp_agent:wait_data:135 chat begin
2017-05-20 16:53:02.660 [info] <0.132.0>@client:handle_info:123 send message to other client
2017-05-20 16:53:02.660 [info] <0.132.0>@client:handle_info:125 1
2017-05-20 16:53:02.660 [info] <0.132.0>@client:handle_info:126 [{2,<0.132.0>}]
2017-05-20 16:53:02.660 [info] <0.132.0>@client:handle_info:127 {client_receive_chat,1,"woyexihuanni"}
2017-05-20 16:53:02.660 [info] <0.132.0>@client:handle_info:139 <0.132.0>
2017-05-20 16:53:02.660 [info] <0.132.0>@client:handle_info:140 {client_receive_chat,1,"woyexihuanni"}
2017-05-20 16:53:02.660 [info] <0.132.0>@client:handle_info:146 receive message and send to socket
2017-05-20 16:53:02.660 [info] <0.132.0>@client:handle_info:148 "1said:woyexihuanni"
2017-05-20 16:53:02.660 [info] <0.132.0>@client:handle_info:149 #Port<0.3701>
2017-05-20 18:12:26.407 [info] <0.31.0> Application lager started on node yangwei@brucedeiMac
2017-05-20 18:12:26.407 [info] <0.98.0>@chat_sup:init:26 ###############   Begin  ##############
2017-05-20 18:12:26.482 [info] <0.31.0> Application mnesia started on node yangwei@brucedeiMac
2017-05-20 18:12:26.490 [info] <0.99.0>@mod_control_sup:init:25 load tables:ok 
2017-05-20 18:12:26.490 [info] <0.99.0>@control_sup:init:63 Initialization all resources
2017-05-20 18:12:26.503 [info] <0.121.0>@id_generator:init:30 ########### id_generator
2017-05-20 18:12:26.522 [info] <0.122.0>@group_sup:init:70 [] 
2017-05-20 18:12:26.522 [info] <0.122.0>@group_sup:init:77 [] 
2017-05-20 18:12:26.522 [info] <0.122.0>@group_sup:init:79 ######## group_sup
2017-05-20 18:12:26.529 [info] <0.124.0>@client_sup:init:65 ######## client_sup
2017-05-20 18:12:26.542 [info] <0.31.0> Application chat started on node yangwei@brucedeiMac
2017-05-20 18:12:43.051 [info] <0.126.0>@tcp_acceptor:process_Client_Socket:181 this is the socket use to bind:#Port<0.3682>
2017-05-20 18:12:43.078 [info] <0.126.0>@tcp_acceptor:process_Client_Socket:189 success to create tcp_agent and controlling_porcess it
2017-05-20 18:12:43.078 [info] <0.128.0>@tcp_agent:wait_socket:92 the gen_tcp fsm next_state is wait_auth
2017-05-20 18:12:45.401 [info] <0.128.0>@tcp_agent:handle_info:215 ***************** receive request from socket ****************
2017-05-20 18:12:45.448 [info] <0.128.0>@tcp_agent:handle_info:218 #{<<"cmd">> => <<"1">>,<<"password">> => <<"iyw">>,<<"username">> => <<"zst">>}
2017-05-20 18:12:45.448 [info] <0.128.0>@tcp_agent:handle_info:226 call wait_auth to handle register
2017-05-20 18:12:45.448 [info] <0.128.0>@tcp_agent:wait_auth:96 {register,"zst","iyw"}
2017-05-20 18:12:45.449 [info] <0.128.0>@tcp_agent:wait_auth:98 1
2017-05-20 18:12:45.449 [info] <0.128.0>@mod_mnesia:add_new_client:41 {client,1,"zst","iyw",[],[]}
2017-05-20 18:12:45.449 [info] <0.128.0>@mod_mnesia:add_new_client:47 add new client:{atomic,ok}
2017-05-20 18:12:45.466 [info] <0.130.0>@client:init:66 success to create a client
2017-05-20 18:12:45.466 [info] <0.128.0>@tcp_agent:wait_auth:114 success register!
2017-05-20 18:12:45.466 [info] <0.130.0>@client:handle_cast:103 client state: tcp_agent_pid <0.128.0>, client_id 1, client_socket #Port<0.3682>
2017-05-20 18:14:54.866 [info] <0.126.0>@tcp_acceptor:process_Client_Socket:181 this is the socket use to bind:#Port<0.3701>
2017-05-20 18:14:54.866 [info] <0.126.0>@tcp_acceptor:process_Client_Socket:189 success to create tcp_agent and controlling_porcess it
2017-05-20 18:14:54.866 [info] <0.131.0>@tcp_agent:wait_socket:92 the gen_tcp fsm next_state is wait_auth
2017-05-20 18:14:55.961 [info] <0.131.0>@tcp_agent:handle_info:215 ***************** receive request from socket ****************
2017-05-20 18:14:55.961 [info] <0.131.0>@tcp_agent:handle_info:218 #{<<"cmd">> => <<"1">>,<<"password">> => <<"ist">>,<<"username">> => <<"yw">>}
2017-05-20 18:14:55.961 [info] <0.131.0>@tcp_agent:handle_info:226 call wait_auth to handle register
2017-05-20 18:14:55.961 [info] <0.131.0>@tcp_agent:wait_auth:96 {register,"yw","ist"}
2017-05-20 18:14:55.962 [info] <0.131.0>@tcp_agent:wait_auth:98 2
2017-05-20 18:14:55.962 [info] <0.131.0>@mod_mnesia:add_new_client:41 {client,2,"yw","ist",[],[]}
2017-05-20 18:14:55.962 [info] <0.131.0>@mod_mnesia:add_new_client:47 add new client:{atomic,ok}
2017-05-20 18:14:55.962 [info] <0.132.0>@client:init:66 success to create a client
2017-05-20 18:14:55.962 [info] <0.131.0>@tcp_agent:wait_auth:114 success register!
2017-05-20 18:14:55.962 [info] <0.132.0>@client:handle_cast:103 client state: tcp_agent_pid <0.131.0>, client_id 2, client_socket #Port<0.3701>
2017-05-20 18:16:11.985 [info] <0.128.0>@tcp_agent:handle_info:215 ***************** receive request from socket ****************
2017-05-20 18:16:11.985 [info] <0.128.0>@tcp_agent:handle_info:218 #{<<"cmd">> => <<"3">>,<<"data">> => <<"wo xihuan ni">>,<<"id">> => <<"1">>,<<"to_id">> => <<"2">>,<<"to_type">> => <<"1">>}
2017-05-20 18:16:11.985 [info] <0.128.0>@tcp_agent:handle_info:246 call wait_data to handle chat
2017-05-20 18:16:11.985 [info] <0.128.0>@tcp_agent:wait_data:135 chat begin, client send chat
2017-05-20 18:16:11.985 [info] <0.130.0>@client:handle_info:122 send message to other client
2017-05-20 18:16:11.985 [info] <0.130.0>@client:handle_info:135 <0.132.0>
2017-05-20 18:16:11.985 [info] <0.130.0>@client:handle_info:136 {client_receive_chat,1,"wo xihuan ni"}
2017-05-20 18:16:11.986 [info] <0.132.0>@client:handle_info:142 receive message and send to socket
2017-05-20 18:16:11.986 [info] <0.132.0>@client:handle_info:144 #Port<0.3701>
2017-05-20 18:16:11.986 [info] <0.132.0>@client:handle_info:145 "1 said: /nwo xihuan ni"
2017-05-20 18:16:28.841 [info] <0.131.0>@tcp_agent:handle_info:215 ***************** receive request from socket ****************
2017-05-20 18:16:28.841 [info] <0.131.0>@tcp_agent:handle_info:218 #{<<"cmd">> => <<"3">>,<<"data">> => <<"wo ye xihuan ni">>,<<"id">> => <<"1">>,<<"to_id">> => <<"2">>,<<"to_type">> => <<"1">>}
2017-05-20 18:16:28.841 [info] <0.131.0>@tcp_agent:handle_info:246 call wait_data to handle chat
2017-05-20 18:16:28.841 [info] <0.131.0>@tcp_agent:wait_data:135 chat begin, client send chat
2017-05-20 18:16:28.841 [info] <0.132.0>@client:handle_info:122 send message to other client
2017-05-20 18:16:28.841 [info] <0.132.0>@client:handle_info:135 <0.132.0>
2017-05-20 18:16:28.841 [info] <0.132.0>@client:handle_info:136 {client_receive_chat,1,"wo ye xihuan ni"}
2017-05-20 18:16:28.841 [info] <0.132.0>@client:handle_info:142 receive message and send to socket
2017-05-20 18:16:28.841 [info] <0.132.0>@client:handle_info:144 #Port<0.3701>
2017-05-20 18:16:28.841 [info] <0.132.0>@client:handle_info:145 "1 said: /nwo ye xihuan ni"
2017-05-20 18:20:57.434 [info] <0.31.0> Application lager started on node yangwei@brucedeiMac
2017-05-20 18:20:57.434 [info] <0.98.0>@chat_sup:init:26 ###############   Begin  ##############
2017-05-20 18:20:57.550 [info] <0.31.0> Application mnesia started on node yangwei@brucedeiMac
2017-05-20 18:20:57.557 [info] <0.99.0>@mod_control_sup:init:25 load tables:ok 
2017-05-20 18:20:57.557 [info] <0.99.0>@control_sup:init:63 Initialization all resources
2017-05-20 18:20:57.573 [info] <0.121.0>@id_generator:init:30 ########### id_generator
2017-05-20 18:20:57.602 [info] <0.122.0>@group_sup:init:70 [] 
2017-05-20 18:20:57.602 [info] <0.122.0>@group_sup:init:77 [] 
2017-05-20 18:20:57.602 [info] <0.122.0>@group_sup:init:79 ######## group_sup
2017-05-20 18:20:57.611 [info] <0.124.0>@client_sup:init:65 ######## client_sup
2017-05-20 18:20:57.613 [info] <0.31.0> Application chat started on node yangwei@brucedeiMac
2017-05-20 18:21:07.004 [info] <0.126.0>@tcp_acceptor:process_Client_Socket:181 this is the socket use to bind:#Port<0.3682>
2017-05-20 18:21:07.027 [info] <0.126.0>@tcp_acceptor:process_Client_Socket:189 success to create tcp_agent and controlling_porcess it
2017-05-20 18:21:07.027 [info] <0.128.0>@tcp_agent:wait_socket:92 the gen_tcp fsm next_state is wait_auth
2017-05-20 18:21:10.101 [info] <0.126.0>@tcp_acceptor:process_Client_Socket:181 this is the socket use to bind:#Port<0.3693>
2017-05-20 18:21:10.101 [info] <0.126.0>@tcp_acceptor:process_Client_Socket:189 success to create tcp_agent and controlling_porcess it
2017-05-20 18:21:10.101 [info] <0.129.0>@tcp_agent:wait_socket:92 the gen_tcp fsm next_state is wait_auth
2017-05-20 18:21:12.825 [info] <0.128.0>@tcp_agent:handle_info:215 ***************** receive request from socket ****************
2017-05-20 18:21:12.843 [info] <0.128.0>@tcp_agent:handle_info:218 #{<<"cmd">> => <<"1">>,<<"password">> => <<"iyw">>,<<"username">> => <<"zst">>}
2017-05-20 18:21:12.843 [info] <0.128.0>@tcp_agent:handle_info:226 call wait_auth to handle register
2017-05-20 18:21:12.843 [info] <0.128.0>@tcp_agent:wait_auth:96 {register,"zst","iyw"}
2017-05-20 18:21:12.843 [info] <0.128.0>@tcp_agent:wait_auth:98 1
2017-05-20 18:21:12.843 [info] <0.128.0>@mod_mnesia:add_new_client:41 {client,1,"zst","iyw",[],[]}
2017-05-20 18:21:12.844 [info] <0.128.0>@mod_mnesia:add_new_client:47 add new client:{atomic,ok}
2017-05-20 18:21:12.869 [info] <0.131.0>@client:init:66 success to create a client
2017-05-20 18:21:12.869 [info] <0.128.0>@tcp_agent:wait_auth:114 success register!
2017-05-20 18:21:12.870 [info] <0.131.0>@client:handle_cast:103 client state: tcp_agent_pid <0.128.0>, client_id 1, client_socket #Port<0.3682>
2017-05-20 18:21:18.785 [info] <0.128.0>@tcp_agent:handle_info:215 ***************** receive request from socket ****************
2017-05-20 18:21:18.785 [info] <0.128.0>@tcp_agent:handle_info:218 #{<<"cmd">> => <<"3">>,<<"data">> => <<"wo xihuan ni">>,<<"id">> => <<"1">>,<<"to_id">> => <<"2">>,<<"to_type">> => <<"1">>}
2017-05-20 18:21:18.785 [info] <0.128.0>@tcp_agent:handle_info:246 call wait_data to handle chat
2017-05-20 18:21:18.785 [info] <0.128.0>@tcp_agent:wait_data:135 chat begin, client send chat
2017-05-20 18:21:18.785 [info] <0.131.0>@client:handle_info:122 send message to other client
2017-05-20 18:21:18.785 [error] <0.131.0> gen_server <0.131.0> terminated with reason: no match of right hand value [] in client:handle_info/2 line 127
2017-05-20 18:21:18.850 [error] <0.131.0> CRASH REPORT Process <0.131.0> with 0 neighbours exited with reason: no match of right hand value [] in client:handle_info/2 line 127 in gen_server:terminate/7 line 812
2017-05-20 18:21:18.850 [error] <0.124.0> Supervisor client_sup had child 1 started with {client,start_link,undefined} at <0.131.0> exit with reason no match of right hand value [] in client:handle_info/2 line 127 in context child_terminated
2017-05-20 18:21:22.361 [info] <0.129.0>@tcp_agent:handle_info:215 ***************** receive request from socket ****************
2017-05-20 18:21:22.361 [info] <0.129.0>@tcp_agent:handle_info:218 #{<<"cmd">> => <<"1">>,<<"password">> => <<"ist">>,<<"username">> => <<"yw">>}
2017-05-20 18:21:22.361 [info] <0.129.0>@tcp_agent:handle_info:226 call wait_auth to handle register
2017-05-20 18:21:22.361 [info] <0.129.0>@tcp_agent:wait_auth:96 {register,"yw","ist"}
2017-05-20 18:21:22.362 [info] <0.129.0>@tcp_agent:wait_auth:98 2
2017-05-20 18:21:22.362 [info] <0.129.0>@mod_mnesia:add_new_client:41 {client,2,"yw","ist",[],[]}
2017-05-20 18:21:22.362 [info] <0.129.0>@mod_mnesia:add_new_client:47 add new client:{atomic,ok}
2017-05-20 18:21:22.362 [info] <0.132.0>@client:init:66 success to create a client
2017-05-20 18:21:22.362 [info] <0.129.0>@tcp_agent:wait_auth:114 success register!
2017-05-20 18:21:22.362 [info] <0.132.0>@client:handle_cast:103 client state: tcp_agent_pid <0.129.0>, client_id 2, client_socket #Port<0.3693>
2017-05-20 18:21:29.641 [info] <0.128.0>@tcp_agent:handle_info:215 ***************** receive request from socket ****************
2017-05-20 18:21:29.641 [info] <0.128.0>@tcp_agent:handle_info:218 #{<<"cmd">> => <<"3">>,<<"data">> => <<"wo xihuan ni">>,<<"id">> => <<"1">>,<<"to_id">> => <<"2">>,<<"to_type">> => <<"1">>}
2017-05-20 18:21:29.641 [info] <0.128.0>@tcp_agent:handle_info:246 call wait_data to handle chat
2017-05-20 18:21:29.641 [info] <0.128.0>@tcp_agent:wait_data:135 chat begin, client send chat
2017-05-20 18:21:38.737 [info] <0.129.0>@tcp_agent:handle_info:215 ***************** receive request from socket ****************
2017-05-20 18:21:38.737 [info] <0.129.0>@tcp_agent:handle_info:218 #{<<"cmd">> => <<"3">>,<<"data">> => <<"wo ye xihuan ni">>,<<"id">> => <<"1">>,<<"to_id">> => <<"2">>,<<"to_type">> => <<"1">>}
2017-05-20 18:21:38.737 [info] <0.129.0>@tcp_agent:handle_info:246 call wait_data to handle chat
2017-05-20 18:21:38.737 [info] <0.129.0>@tcp_agent:wait_data:135 chat begin, client send chat
2017-05-20 18:21:38.737 [info] <0.132.0>@client:handle_info:122 send message to other client
2017-05-20 18:21:38.737 [info] <0.132.0>@client:handle_info:135 <0.132.0>
2017-05-20 18:21:38.737 [info] <0.132.0>@client:handle_info:136 {client_receive_chat,1,"wo ye xihuan ni"}
2017-05-20 18:21:38.737 [info] <0.132.0>@client:handle_info:142 receive message and send to socket
2017-05-20 18:21:38.737 [info] <0.132.0>@client:handle_info:144 #Port<0.3693>
2017-05-20 18:21:38.737 [info] <0.132.0>@client:handle_info:145 "\n1 said: \nwo ye xihuan ni"
2017-05-20 18:22:00.973 [info] <0.128.0>@tcp_agent:handle_info:262 tcp closed, stateName: wait_data
2017-05-20 18:22:00.974 [info] <0.128.0>@tcp_agent:terminate:288 call suervisor to terminate_child: {error,not_found}
2017-05-20 18:22:00.974 [info] <0.128.0>@tcp_agent:terminate:289 tcp_agent process is termianted
2017-05-20 18:22:00.983 [info] <0.129.0>@tcp_agent:handle_info:262 tcp closed, stateName: wait_data
2017-05-20 18:22:00.983 [info] <0.129.0>@tcp_agent:terminate:288 call suervisor to terminate_child: {error,not_found}
2017-05-20 18:22:00.983 [info] <0.129.0>@tcp_agent:terminate:289 tcp_agent process is termianted
2017-05-20 18:22:32.780 [info] <0.31.0> Application lager started on node yangwei@brucedeiMac
2017-05-20 18:22:32.780 [info] <0.98.0>@chat_sup:init:26 ###############   Begin  ##############
2017-05-20 18:22:32.834 [info] <0.31.0> Application mnesia started on node yangwei@brucedeiMac
2017-05-20 18:22:32.841 [info] <0.99.0>@mod_control_sup:init:25 load tables:ok 
2017-05-20 18:22:32.841 [info] <0.99.0>@control_sup:init:63 Initialization all resources
2017-05-20 18:22:32.841 [info] <0.121.0>@id_generator:init:30 ########### id_generator
2017-05-20 18:22:32.847 [info] <0.122.0>@group_sup:init:70 [] 
2017-05-20 18:22:32.847 [info] <0.122.0>@group_sup:init:77 [] 
2017-05-20 18:22:32.847 [info] <0.122.0>@group_sup:init:79 ######## group_sup
2017-05-20 18:22:32.848 [info] <0.124.0>@client_sup:init:65 ######## client_sup
2017-05-20 18:22:32.849 [info] <0.31.0> Application chat started on node yangwei@brucedeiMac
2017-05-20 18:22:41.836 [info] <0.126.0>@tcp_acceptor:process_Client_Socket:181 this is the socket use to bind:#Port<0.3682>
2017-05-20 18:22:41.839 [info] <0.126.0>@tcp_acceptor:process_Client_Socket:189 success to create tcp_agent and controlling_porcess it
2017-05-20 18:22:41.839 [info] <0.128.0>@tcp_agent:wait_socket:92 the gen_tcp fsm next_state is wait_auth
2017-05-20 18:22:53.125 [info] <0.126.0>@tcp_acceptor:process_Client_Socket:181 this is the socket use to bind:#Port<0.3693>
2017-05-20 18:22:53.125 [info] <0.126.0>@tcp_acceptor:process_Client_Socket:189 success to create tcp_agent and controlling_porcess it
2017-05-20 18:22:53.125 [info] <0.129.0>@tcp_agent:wait_socket:92 the gen_tcp fsm next_state is wait_auth
2017-05-20 18:22:56.425 [info] <0.128.0>@tcp_agent:handle_info:215 ***************** receive request from socket ****************
2017-05-20 18:22:56.429 [info] <0.128.0>@tcp_agent:handle_info:218 #{<<"cmd">> => <<"1">>,<<"password">> => <<"iyw">>,<<"username">> => <<"zst">>}
2017-05-20 18:22:56.429 [info] <0.128.0>@tcp_agent:handle_info:226 call wait_auth to handle register
2017-05-20 18:22:56.429 [info] <0.128.0>@tcp_agent:wait_auth:96 {register,"zst","iyw"}
2017-05-20 18:22:56.429 [info] <0.128.0>@tcp_agent:wait_auth:98 1
2017-05-20 18:22:56.429 [info] <0.128.0>@mod_mnesia:add_new_client:41 {client,1,"zst","iyw",[],[]}
2017-05-20 18:22:56.429 [info] <0.128.0>@mod_mnesia:add_new_client:47 add new client:{atomic,ok}
2017-05-20 18:22:56.431 [info] <0.131.0>@client:init:66 success to create a client
2017-05-20 18:22:56.431 [info] <0.128.0>@tcp_agent:wait_auth:114 success register!
2017-05-20 18:22:56.431 [info] <0.131.0>@client:handle_cast:103 client state: tcp_agent_pid <0.128.0>, client_id 1, client_socket #Port<0.3682>
2017-05-20 18:22:59.121 [info] <0.129.0>@tcp_agent:handle_info:215 ***************** receive request from socket ****************
2017-05-20 18:22:59.121 [info] <0.129.0>@tcp_agent:handle_info:218 #{<<"cmd">> => <<"1">>,<<"password">> => <<"ist">>,<<"username">> => <<"yw">>}
2017-05-20 18:22:59.121 [info] <0.129.0>@tcp_agent:handle_info:226 call wait_auth to handle register
2017-05-20 18:22:59.121 [info] <0.129.0>@tcp_agent:wait_auth:96 {register,"yw","ist"}
2017-05-20 18:22:59.122 [info] <0.129.0>@tcp_agent:wait_auth:98 2
2017-05-20 18:22:59.122 [info] <0.129.0>@mod_mnesia:add_new_client:41 {client,2,"yw","ist",[],[]}
2017-05-20 18:22:59.122 [info] <0.129.0>@mod_mnesia:add_new_client:47 add new client:{atomic,ok}
2017-05-20 18:22:59.122 [info] <0.132.0>@client:init:66 success to create a client
2017-05-20 18:22:59.122 [info] <0.129.0>@tcp_agent:wait_auth:114 success register!
2017-05-20 18:22:59.122 [info] <0.132.0>@client:handle_cast:103 client state: tcp_agent_pid <0.129.0>, client_id 2, client_socket #Port<0.3693>
2017-05-20 18:23:07.841 [info] <0.128.0>@tcp_agent:handle_info:215 ***************** receive request from socket ****************
2017-05-20 18:23:07.841 [info] <0.128.0>@tcp_agent:handle_info:218 #{<<"cmd">> => <<"3">>,<<"data">> => <<"wo xi huan ni">>,<<"id">> => <<"1">>,<<"to_id">> => <<"2">>,<<"to_type">> => <<"1">>}
2017-05-20 18:23:07.841 [info] <0.128.0>@tcp_agent:handle_info:246 call wait_data to handle chat
2017-05-20 18:23:07.841 [info] <0.128.0>@tcp_agent:wait_data:135 chat begin, client send chat
2017-05-20 18:23:07.841 [info] <0.131.0>@client:handle_info:122 send message to other client
2017-05-20 18:23:07.841 [info] <0.131.0>@client:handle_info:135 <0.132.0>
2017-05-20 18:23:07.841 [info] <0.131.0>@client:handle_info:136 {client_receive_chat,1,"wo xi huan ni"}
2017-05-20 18:23:07.841 [info] <0.132.0>@client:handle_info:142 receive message and send to socket
2017-05-20 18:23:07.841 [info] <0.132.0>@client:handle_info:144 #Port<0.3693>
2017-05-20 18:23:07.841 [info] <0.132.0>@client:handle_info:145 "\n1 said: \nwo xi huan ni"
2017-05-20 18:23:18.913 [info] <0.129.0>@tcp_agent:handle_info:215 ***************** receive request from socket ****************
2017-05-20 18:23:18.913 [info] <0.129.0>@tcp_agent:handle_info:218 #{<<"cmd">> => <<"3">>,<<"data">> => <<" wo ye xi huan ni">>,<<"id">> => <<"1">>,<<"to_id">> => <<"2">>,<<"to_type">> => <<"1">>}
2017-05-20 18:23:18.913 [info] <0.129.0>@tcp_agent:handle_info:246 call wait_data to handle chat
2017-05-20 18:23:18.913 [info] <0.129.0>@tcp_agent:wait_data:135 chat begin, client send chat
2017-05-20 18:23:18.913 [info] <0.132.0>@client:handle_info:122 send message to other client
2017-05-20 18:23:18.913 [info] <0.132.0>@client:handle_info:135 <0.132.0>
2017-05-20 18:23:18.913 [info] <0.132.0>@client:handle_info:136 {client_receive_chat,1," wo ye xi huan ni"}
2017-05-20 18:23:18.913 [info] <0.132.0>@client:handle_info:142 receive message and send to socket
2017-05-20 18:23:18.913 [info] <0.132.0>@client:handle_info:144 #Port<0.3693>
2017-05-20 18:23:18.913 [info] <0.132.0>@client:handle_info:145 "\n1 said: \n wo ye xi huan ni"
2017-05-20 18:23:38.009 [info] <0.128.0>@tcp_agent:handle_info:215 ***************** receive request from socket ****************
2017-05-20 18:23:38.009 [info] <0.128.0>@tcp_agent:handle_info:218 #{<<"cmd">> => <<"3">>,<<"data">> => <<"laalalla">>,<<"id">> => <<"1">>,<<"to_id">> => <<"2">>,<<"to_type">> => <<"1">>}
2017-05-20 18:23:38.009 [info] <0.128.0>@tcp_agent:handle_info:246 call wait_data to handle chat
2017-05-20 18:23:38.009 [info] <0.128.0>@tcp_agent:wait_data:135 chat begin, client send chat
2017-05-20 18:23:38.009 [info] <0.131.0>@client:handle_info:122 send message to other client
2017-05-20 18:23:38.009 [info] <0.131.0>@client:handle_info:135 <0.132.0>
2017-05-20 18:23:38.009 [info] <0.131.0>@client:handle_info:136 {client_receive_chat,1,"laalalla"}
2017-05-20 18:23:38.009 [info] <0.132.0>@client:handle_info:142 receive message and send to socket
2017-05-20 18:23:38.009 [info] <0.132.0>@client:handle_info:144 #Port<0.3693>
2017-05-20 18:23:38.009 [info] <0.132.0>@client:handle_info:145 "\n1 said: \nlaalalla"
2017-05-20 18:23:55.545 [info] <0.129.0>@tcp_agent:handle_info:215 ***************** receive request from socket ****************
2017-05-20 18:23:55.545 [info] <0.129.0>@tcp_agent:handle_info:218 #{<<"cmd">> => <<"3">>,<<"data">> => <<"bllabulua">>,<<"id">> => <<"1">>,<<"to_id">> => <<"2">>,<<"to_type">> => <<"1">>}
2017-05-20 18:23:55.545 [info] <0.129.0>@tcp_agent:handle_info:246 call wait_data to handle chat
2017-05-20 18:23:55.545 [info] <0.129.0>@tcp_agent:wait_data:135 chat begin, client send chat
2017-05-20 18:23:55.545 [info] <0.132.0>@client:handle_info:122 send message to other client
2017-05-20 18:23:55.545 [info] <0.132.0>@client:handle_info:135 <0.132.0>
2017-05-20 18:23:55.545 [info] <0.132.0>@client:handle_info:136 {client_receive_chat,1,"bllabulua"}
2017-05-20 18:23:55.545 [info] <0.132.0>@client:handle_info:142 receive message and send to socket
2017-05-20 18:23:55.545 [info] <0.132.0>@client:handle_info:144 #Port<0.3693>
2017-05-20 18:23:55.545 [info] <0.132.0>@client:handle_info:145 "\n1 said: \nbllabulua"
2017-05-20 18:24:16.437 [info] <0.129.0>@tcp_agent:handle_info:262 tcp closed, stateName: wait_data
2017-05-20 18:24:16.437 [info] <0.129.0>@tcp_agent:terminate:288 call suervisor to terminate_child: {error,not_found}
2017-05-20 18:24:16.437 [info] <0.129.0>@tcp_agent:terminate:289 tcp_agent process is termianted
2017-05-20 18:24:16.830 [info] <0.128.0>@tcp_agent:handle_info:262 tcp closed, stateName: wait_data
2017-05-20 18:24:16.830 [info] <0.128.0>@tcp_agent:terminate:288 call suervisor to terminate_child: {error,not_found}
2017-05-20 18:24:16.830 [info] <0.128.0>@tcp_agent:terminate:289 tcp_agent process is termianted
2017-05-20 18:25:35.537 [info] <0.31.0> Application lager started on node yangwei@brucedeiMac
2017-05-20 18:25:35.537 [info] <0.98.0>@chat_sup:init:26 ###############   Begin  ##############
2017-05-20 18:25:35.592 [info] <0.31.0> Application mnesia started on node yangwei@brucedeiMac
2017-05-20 18:25:35.601 [info] <0.99.0>@mod_control_sup:init:25 load tables:ok 
2017-05-20 18:25:35.601 [info] <0.99.0>@control_sup:init:63 Initialization all resources
2017-05-20 18:25:35.602 [info] <0.121.0>@id_generator:init:30 ########### id_generator
2017-05-20 18:25:35.607 [info] <0.122.0>@group_sup:init:70 [] 
2017-05-20 18:25:35.607 [info] <0.122.0>@group_sup:init:77 [] 
2017-05-20 18:25:35.607 [info] <0.122.0>@group_sup:init:79 ######## group_sup
2017-05-20 18:25:35.608 [info] <0.124.0>@client_sup:init:65 ######## client_sup
2017-05-20 18:25:35.610 [info] <0.31.0> Application chat started on node yangwei@brucedeiMac
2017-05-20 18:25:47.630 [info] <0.126.0>@tcp_acceptor:process_Client_Socket:181 this is the socket use to bind:#Port<0.3682>
2017-05-20 18:25:47.633 [info] <0.126.0>@tcp_acceptor:process_Client_Socket:189 success to create tcp_agent and controlling_porcess it
2017-05-20 18:25:47.633 [info] <0.128.0>@tcp_agent:wait_socket:92 the gen_tcp fsm next_state is wait_auth
2017-05-20 18:25:49.633 [info] <0.128.0>@tcp_agent:handle_info:215 ***************** receive request from socket ****************
2017-05-20 18:25:49.650 [info] <0.128.0>@tcp_agent:handle_info:218 #{<<"cmd">> => <<"1">>,<<"password">> => <<"iyw">>,<<"username">> => <<"zst">>}
2017-05-20 18:25:49.650 [info] <0.128.0>@tcp_agent:handle_info:226 call wait_auth to handle register
2017-05-20 18:25:49.650 [info] <0.128.0>@tcp_agent:wait_auth:96 {register,"zst","iyw"}
2017-05-20 18:25:49.651 [info] <0.128.0>@tcp_agent:wait_auth:98 1
2017-05-20 18:25:49.651 [info] <0.128.0>@mod_mnesia:add_new_client:41 {client,1,"zst","iyw",[],[]}
2017-05-20 18:25:49.651 [info] <0.128.0>@mod_mnesia:add_new_client:47 add new client:{atomic,ok}
2017-05-20 18:25:49.652 [info] <0.130.0>@client:init:66 success to create a client
2017-05-20 18:25:49.652 [info] <0.128.0>@tcp_agent:wait_auth:114 success register!
2017-05-20 18:25:49.652 [info] <0.130.0>@client:handle_cast:103 client state: tcp_agent_pid <0.128.0>, client_id 1, client_socket #Port<0.3682>
2017-05-20 18:26:24.565 [info] <0.126.0>@tcp_acceptor:process_Client_Socket:181 this is the socket use to bind:#Port<0.3701>
2017-05-20 18:26:24.565 [info] <0.126.0>@tcp_acceptor:process_Client_Socket:189 success to create tcp_agent and controlling_porcess it
2017-05-20 18:26:24.565 [info] <0.131.0>@tcp_agent:wait_socket:92 the gen_tcp fsm next_state is wait_auth
2017-05-20 18:26:25.833 [info] <0.131.0>@tcp_agent:handle_info:215 ***************** receive request from socket ****************
2017-05-20 18:26:25.833 [info] <0.131.0>@tcp_agent:handle_info:218 #{<<"cmd">> => <<"1">>,<<"password">> => <<"ist">>,<<"username">> => <<"yw">>}
2017-05-20 18:26:25.833 [info] <0.131.0>@tcp_agent:handle_info:226 call wait_auth to handle register
2017-05-20 18:26:25.833 [info] <0.131.0>@tcp_agent:wait_auth:96 {register,"yw","ist"}
2017-05-20 18:26:25.834 [info] <0.131.0>@tcp_agent:wait_auth:98 2
2017-05-20 18:26:25.834 [info] <0.131.0>@mod_mnesia:add_new_client:41 {client,2,"yw","ist",[],[]}
2017-05-20 18:26:25.834 [info] <0.131.0>@mod_mnesia:add_new_client:47 add new client:{atomic,ok}
2017-05-20 18:26:25.834 [info] <0.132.0>@client:init:66 success to create a client
2017-05-20 18:26:25.834 [info] <0.131.0>@tcp_agent:wait_auth:114 success register!
2017-05-20 18:26:25.834 [info] <0.132.0>@client:handle_cast:103 client state: tcp_agent_pid <0.131.0>, client_id 2, client_socket #Port<0.3701>
2017-05-20 18:26:59.951 [info] <0.31.0> Application lager started on node yangwei@brucedeiMac
2017-05-20 18:26:59.951 [info] <0.98.0>@chat_sup:init:26 ###############   Begin  ##############
2017-05-20 18:27:00.000 [info] <0.31.0> Application mnesia started on node yangwei@brucedeiMac
2017-05-20 18:27:00.006 [info] <0.99.0>@mod_control_sup:init:25 load tables:ok 
2017-05-20 18:27:00.006 [info] <0.99.0>@control_sup:init:63 Initialization all resources
2017-05-20 18:27:00.007 [info] <0.121.0>@id_generator:init:30 ########### id_generator
2017-05-20 18:27:00.012 [info] <0.122.0>@group_sup:init:70 [] 
2017-05-20 18:27:00.012 [info] <0.122.0>@group_sup:init:77 [] 
2017-05-20 18:27:00.012 [info] <0.122.0>@group_sup:init:79 ######## group_sup
2017-05-20 18:27:00.012 [info] <0.124.0>@client_sup:init:65 ######## client_sup
2017-05-20 18:27:00.014 [info] <0.31.0> Application chat started on node yangwei@brucedeiMac
2017-05-20 18:27:11.702 [info] <0.126.0>@tcp_acceptor:process_Client_Socket:181 this is the socket use to bind:#Port<0.3682>
2017-05-20 18:27:11.705 [info] <0.126.0>@tcp_acceptor:process_Client_Socket:189 success to create tcp_agent and controlling_porcess it
2017-05-20 18:27:11.705 [info] <0.128.0>@tcp_agent:wait_socket:92 the gen_tcp fsm next_state is wait_auth
2017-05-20 18:27:13.473 [info] <0.128.0>@tcp_agent:handle_info:215 ***************** receive request from socket ****************
2017-05-20 18:27:13.477 [info] <0.128.0>@tcp_agent:handle_info:218 #{<<"cmd">> => <<"1">>,<<"password">> => <<"iyw">>,<<"username">> => <<"zst">>}
2017-05-20 18:27:13.477 [info] <0.128.0>@tcp_agent:handle_info:226 call wait_auth to handle register
2017-05-20 18:27:13.477 [info] <0.128.0>@tcp_agent:wait_auth:96 {register,"zst","iyw"}
2017-05-20 18:27:13.477 [info] <0.128.0>@tcp_agent:wait_auth:98 1
2017-05-20 18:27:13.477 [info] <0.128.0>@mod_mnesia:add_new_client:41 {client,1,"zst","iyw",[],[]}
2017-05-20 18:27:13.477 [info] <0.128.0>@mod_mnesia:add_new_client:47 add new client:{atomic,ok}
2017-05-20 18:27:13.479 [info] <0.130.0>@client:init:66 success to create a client
2017-05-20 18:27:13.479 [info] <0.128.0>@tcp_agent:wait_auth:114 success register!
2017-05-20 18:27:13.479 [info] <0.130.0>@client:handle_cast:103 client state: tcp_agent_pid <0.128.0>, client_id 1, client_socket #Port<0.3682>
2017-05-20 18:27:27.901 [info] <0.126.0>@tcp_acceptor:process_Client_Socket:181 this is the socket use to bind:#Port<0.3701>
2017-05-20 18:27:27.901 [info] <0.126.0>@tcp_acceptor:process_Client_Socket:189 success to create tcp_agent and controlling_porcess it
2017-05-20 18:27:27.901 [info] <0.131.0>@tcp_agent:wait_socket:92 the gen_tcp fsm next_state is wait_auth
2017-05-20 18:27:29.305 [info] <0.131.0>@tcp_agent:handle_info:215 ***************** receive request from socket ****************
2017-05-20 18:27:29.305 [info] <0.131.0>@tcp_agent:handle_info:218 #{<<"cmd">> => <<"1">>,<<"password">> => <<"ist">>,<<"username">> => <<"yw">>}
2017-05-20 18:27:29.305 [info] <0.131.0>@tcp_agent:handle_info:226 call wait_auth to handle register
2017-05-20 18:27:29.305 [info] <0.131.0>@tcp_agent:wait_auth:96 {register,"yw","ist"}
2017-05-20 18:27:29.306 [info] <0.131.0>@tcp_agent:wait_auth:98 2
2017-05-20 18:27:29.306 [info] <0.131.0>@mod_mnesia:add_new_client:41 {client,2,"yw","ist",[],[]}
2017-05-20 18:27:29.306 [info] <0.131.0>@mod_mnesia:add_new_client:47 add new client:{atomic,ok}
2017-05-20 18:27:29.306 [info] <0.132.0>@client:init:66 success to create a client
2017-05-20 18:27:29.306 [info] <0.131.0>@tcp_agent:wait_auth:114 success register!
2017-05-20 18:27:29.306 [info] <0.132.0>@client:handle_cast:103 client state: tcp_agent_pid <0.131.0>, client_id 2, client_socket #Port<0.3701>
2017-05-20 18:27:41.377 [info] <0.128.0>@tcp_agent:handle_info:215 ***************** receive request from socket ****************
2017-05-20 18:27:41.377 [info] <0.128.0>@tcp_agent:handle_info:218 #{<<"cmd">> => <<"3">>,<<"data">> => <<"yanshen">>,<<"id">> => <<"1">>,<<"to_id">> => <<"2">>,<<"to_type">> => <<"1">>}
2017-05-20 18:27:41.377 [info] <0.128.0>@tcp_agent:handle_info:246 call wait_data to handle chat
2017-05-20 18:27:41.377 [info] <0.128.0>@tcp_agent:wait_data:135 chat begin, client send chat
2017-05-20 18:27:41.377 [info] <0.130.0>@client:handle_info:122 send message to other client
2017-05-20 18:27:41.377 [info] <0.130.0>@client:handle_info:135 <0.132.0>
2017-05-20 18:27:41.377 [info] <0.130.0>@client:handle_info:136 {client_receive_chat,1,"yanshen"}
2017-05-20 18:27:41.377 [info] <0.132.0>@client:handle_info:142 receive message and send to socket
2017-05-20 18:27:41.377 [info] <0.132.0>@client:handle_info:144 #Port<0.3701>
2017-05-20 18:27:41.377 [info] <0.132.0>@client:handle_info:145 "\n1 said: \nyanshen"
2017-05-20 18:27:51.161 [info] <0.131.0>@tcp_agent:handle_info:215 ***************** receive request from socket ****************
2017-05-20 18:27:51.161 [info] <0.131.0>@tcp_agent:handle_info:218 #{<<"cmd">> => <<"3">>,<<"data">> => <<"weishen">>,<<"id">> => <<"2">>,<<"to_id">> => <<"1">>,<<"to_type">> => <<"1">>}
2017-05-20 18:27:51.161 [info] <0.131.0>@tcp_agent:handle_info:246 call wait_data to handle chat
2017-05-20 18:27:51.161 [info] <0.131.0>@tcp_agent:wait_data:135 chat begin, client send chat
2017-05-20 18:27:51.161 [info] <0.132.0>@client:handle_info:122 send message to other client
2017-05-20 18:27:51.161 [info] <0.132.0>@client:handle_info:135 <0.130.0>
2017-05-20 18:27:51.161 [info] <0.132.0>@client:handle_info:136 {client_receive_chat,2,"weishen"}
2017-05-20 18:27:51.162 [info] <0.130.0>@client:handle_info:142 receive message and send to socket
2017-05-20 18:27:51.162 [info] <0.130.0>@client:handle_info:144 #Port<0.3682>
2017-05-20 18:27:51.162 [info] <0.130.0>@client:handle_info:145 "\n2 said: \nweishen"
2017-05-20 18:28:10.801 [info] <0.131.0>@tcp_agent:handle_info:215 ***************** receive request from socket ****************
2017-05-20 18:28:10.801 [info] <0.131.0>@tcp_agent:handle_info:218 #{<<"cmd">> => <<"3">>,<<"data">> => <<"chi fan le mei">>,<<"id">> => <<"2">>,<<"to_id">> => <<"1">>,<<"to_type">> => <<"1">>}
2017-05-20 18:28:10.801 [info] <0.131.0>@tcp_agent:handle_info:246 call wait_data to handle chat
2017-05-20 18:28:10.801 [info] <0.131.0>@tcp_agent:wait_data:135 chat begin, client send chat
2017-05-20 18:28:10.801 [info] <0.132.0>@client:handle_info:122 send message to other client
2017-05-20 18:28:10.801 [info] <0.132.0>@client:handle_info:135 <0.130.0>
2017-05-20 18:28:10.801 [info] <0.132.0>@client:handle_info:136 {client_receive_chat,2,"chi fan le mei"}
2017-05-20 18:28:10.801 [info] <0.130.0>@client:handle_info:142 receive message and send to socket
2017-05-20 18:28:10.801 [info] <0.130.0>@client:handle_info:144 #Port<0.3682>
2017-05-20 18:28:10.801 [info] <0.130.0>@client:handle_info:145 "\n2 said: \nchi fan le mei"
2017-05-20 18:28:21.537 [info] <0.128.0>@tcp_agent:handle_info:215 ***************** receive request from socket ****************
2017-05-20 18:28:21.537 [info] <0.128.0>@tcp_agent:handle_info:218 #{<<"cmd">> => <<"3">>,<<"data">> => <<"hai mei chi ne">>,<<"id">> => <<"1">>,<<"to_id">> => <<"2">>,<<"to_type">> => <<"1">>}
2017-05-20 18:28:21.537 [info] <0.128.0>@tcp_agent:handle_info:246 call wait_data to handle chat
2017-05-20 18:28:21.537 [info] <0.128.0>@tcp_agent:wait_data:135 chat begin, client send chat
2017-05-20 18:28:21.537 [info] <0.130.0>@client:handle_info:122 send message to other client
2017-05-20 18:28:21.537 [info] <0.130.0>@client:handle_info:135 <0.132.0>
2017-05-20 18:28:21.537 [info] <0.130.0>@client:handle_info:136 {client_receive_chat,1,"hai mei chi ne"}
2017-05-20 18:28:21.537 [info] <0.132.0>@client:handle_info:142 receive message and send to socket
2017-05-20 18:28:21.537 [info] <0.132.0>@client:handle_info:144 #Port<0.3701>
2017-05-20 18:28:21.537 [info] <0.132.0>@client:handle_info:145 "\n1 said: \nhai mei chi ne"
2017-05-20 19:21:42.964 [info] <0.131.0>@tcp_agent:handle_info:215 ***************** receive request from socket ****************
2017-05-20 19:21:42.965 [info] <0.131.0>@tcp_agent:handle_info:218 #{<<"cmd">> => <<"3">>,<<"data">> => <<"shenme">>,<<"id">> => <<"2">>,<<"to_id">> => <<"1">>,<<"to_type">> => <<"1">>}
2017-05-20 19:21:42.965 [info] <0.131.0>@tcp_agent:handle_info:246 call wait_data to handle chat
2017-05-20 19:21:42.965 [info] <0.131.0>@tcp_agent:wait_data:135 chat begin, client send chat
2017-05-20 19:21:42.965 [info] <0.132.0>@client:handle_info:122 send message to other client
2017-05-20 19:21:42.965 [info] <0.132.0>@client:handle_info:135 <0.130.0>
2017-05-20 19:21:42.965 [info] <0.132.0>@client:handle_info:136 {client_receive_chat,2,"shenme"}
2017-05-20 19:21:42.965 [info] <0.130.0>@client:handle_info:142 receive message and send to socket
2017-05-20 19:21:42.965 [info] <0.130.0>@client:handle_info:144 #Port<0.3682>
2017-05-20 19:21:42.965 [info] <0.130.0>@client:handle_info:145 "\n2 said: \nshenme"
2017-05-20 19:21:51.932 [info] <0.131.0>@tcp_agent:handle_info:215 ***************** receive request from socket ****************
2017-05-20 19:21:51.932 [info] <0.131.0>@tcp_agent:handle_info:218 #{<<"cmd">> => <<"3">>,<<"data">> => <<"haohao xiao wo">>,<<"id">> => <<"2">>,<<"to_id">> => <<"1">>,<<"to_type">> => <<"1">>}
2017-05-20 19:21:51.932 [info] <0.131.0>@tcp_agent:handle_info:246 call wait_data to handle chat
2017-05-20 19:21:51.932 [info] <0.131.0>@tcp_agent:wait_data:135 chat begin, client send chat
2017-05-20 19:21:51.932 [info] <0.132.0>@client:handle_info:122 send message to other client
2017-05-20 19:21:51.933 [info] <0.132.0>@client:handle_info:135 <0.130.0>
2017-05-20 19:21:51.933 [info] <0.132.0>@client:handle_info:136 {client_receive_chat,2,"haohao xiao wo"}
2017-05-20 19:21:51.933 [info] <0.130.0>@client:handle_info:142 receive message and send to socket
2017-05-20 19:21:51.933 [info] <0.130.0>@client:handle_info:144 #Port<0.3682>
2017-05-20 19:21:51.933 [info] <0.130.0>@client:handle_info:145 "\n2 said: \nhaohao xiao wo"
2017-05-20 19:22:03.733 [info] <0.131.0>@tcp_agent:handle_info:215 ***************** receive request from socket ****************
2017-05-20 19:22:03.733 [info] <0.131.0>@tcp_agent:handle_info:218 #{<<"cmd">> => <<"3">>,<<"data">> => <<" kulei">>,<<"id">> => <<"2">>,<<"to_id">> => <<"1">>,<<"to_type">> => <<"1">>}
2017-05-20 19:22:03.733 [info] <0.131.0>@tcp_agent:handle_info:246 call wait_data to handle chat
2017-05-20 19:22:03.733 [info] <0.131.0>@tcp_agent:wait_data:135 chat begin, client send chat
2017-05-20 19:22:03.733 [info] <0.132.0>@client:handle_info:122 send message to other client
2017-05-20 19:22:03.733 [info] <0.132.0>@client:handle_info:135 <0.130.0>
2017-05-20 19:22:03.733 [info] <0.132.0>@client:handle_info:136 {client_receive_chat,2," kulei"}
2017-05-20 19:22:03.733 [info] <0.130.0>@client:handle_info:142 receive message and send to socket
2017-05-20 19:22:03.733 [info] <0.130.0>@client:handle_info:144 #Port<0.3682>
2017-05-20 19:22:03.733 [info] <0.130.0>@client:handle_info:145 "\n2 said: \n kulei"
2017-05-20 19:22:40.885 [info] <0.131.0>@tcp_agent:handle_info:262 tcp closed, stateName: wait_data
2017-05-20 19:22:40.886 [info] <0.131.0>@tcp_agent:terminate:288 call suervisor to terminate_child: {error,not_found}
2017-05-20 19:22:40.886 [info] <0.131.0>@tcp_agent:terminate:289 tcp_agent process is termianted
2017-05-20 19:22:40.959 [info] <0.128.0>@tcp_agent:handle_info:262 tcp closed, stateName: wait_data
2017-05-20 19:22:40.959 [info] <0.128.0>@tcp_agent:terminate:288 call suervisor to terminate_child: {error,not_found}
2017-05-20 19:22:40.959 [info] <0.128.0>@tcp_agent:terminate:289 tcp_agent process is termianted
2017-05-21 12:40:10.633 [info] <0.31.0> Application lager started on node yangwei@brucedeiMac
2017-05-21 12:40:10.633 [info] <0.98.0>@chat_sup:init:26 ###############   Begin  ##############
2017-05-21 12:40:10.730 [info] <0.31.0> Application mnesia started on node yangwei@brucedeiMac
2017-05-21 12:40:10.737 [info] <0.99.0>@mod_control_sup:init:25 load tables:ok 
2017-05-21 12:40:10.737 [info] <0.99.0>@control_sup:init:63 Initialization all resources
2017-05-21 12:40:10.738 [info] <0.121.0>@id_generator:init:30 ########### id_generator
2017-05-21 12:40:10.768 [info] <0.122.0>@group_sup:init:70 [] 
2017-05-21 12:40:10.768 [info] <0.122.0>@group_sup:init:77 [] 
2017-05-21 12:40:10.768 [info] <0.122.0>@group_sup:init:79 ######## group_sup
2017-05-21 12:40:10.777 [info] <0.124.0>@client_sup:init:65 ######## client_sup
2017-05-21 12:40:10.779 [info] <0.31.0> Application chat started on node yangwei@brucedeiMac
2017-05-21 12:41:01.678 [info] <0.126.0>@tcp_acceptor:process_Client_Socket:181 this is the socket use to bind:#Port<0.4370>
2017-05-21 12:41:01.705 [info] <0.126.0>@tcp_acceptor:process_Client_Socket:189 success to create tcp_agent and controlling_porcess it
2017-05-21 12:41:01.705 [info] <0.156.0>@tcp_agent:wait_socket:92 the gen_tcp fsm next_state is wait_auth
2017-05-21 12:41:04.204 [info] <0.156.0>@tcp_agent:handle_info:215 ***************** receive request from socket ****************
2017-05-21 12:41:04.249 [info] <0.156.0>@tcp_agent:handle_info:218 #{<<"cmd">> => <<"1">>,<<"password">> => <<"iyw">>,<<"username">> => <<"zst">>}
2017-05-21 12:41:04.249 [info] <0.156.0>@tcp_agent:handle_info:226 call wait_auth to handle register
2017-05-21 12:41:04.249 [info] <0.156.0>@tcp_agent:wait_auth:96 {register,"zst","iyw"}
2017-05-21 12:41:04.249 [info] <0.156.0>@tcp_agent:wait_auth:98 1
2017-05-21 12:41:04.249 [info] <0.156.0>@mod_mnesia:add_new_client:44 {client,1,"zst","iyw",[],[]}
2017-05-21 12:41:04.249 [info] <0.156.0>@mod_mnesia:add_new_client:50 add new client:{atomic,ok}
2017-05-21 12:41:04.272 [info] <0.158.0>@client:init:66 success to create a client
2017-05-21 12:41:04.272 [info] <0.156.0>@tcp_agent:wait_auth:114 success register!
2017-05-21 12:41:04.272 [info] <0.158.0>@client:handle_cast:103 client state: tcp_agent_pid <0.156.0>, client_id 1, client_socket #Port<0.4370>
2017-05-21 12:41:33.765 [info] <0.126.0>@tcp_acceptor:process_Client_Socket:181 this is the socket use to bind:#Port<0.4389>
2017-05-21 12:41:33.765 [info] <0.126.0>@tcp_acceptor:process_Client_Socket:189 success to create tcp_agent and controlling_porcess it
2017-05-21 12:41:33.765 [info] <0.159.0>@tcp_agent:wait_socket:92 the gen_tcp fsm next_state is wait_auth
2017-05-21 12:41:34.764 [info] <0.159.0>@tcp_agent:handle_info:215 ***************** receive request from socket ****************
2017-05-21 12:41:34.764 [info] <0.159.0>@tcp_agent:handle_info:218 #{<<"cmd">> => <<"1">>,<<"password">> => <<"ist">>,<<"username">> => <<"yw">>}
2017-05-21 12:41:34.764 [info] <0.159.0>@tcp_agent:handle_info:226 call wait_auth to handle register
2017-05-21 12:41:34.764 [info] <0.159.0>@tcp_agent:wait_auth:96 {register,"yw","ist"}
2017-05-21 12:41:34.765 [info] <0.159.0>@tcp_agent:wait_auth:98 2
2017-05-21 12:41:34.765 [info] <0.159.0>@mod_mnesia:add_new_client:44 {client,2,"yw","ist",[],[]}
2017-05-21 12:41:34.765 [info] <0.159.0>@mod_mnesia:add_new_client:50 add new client:{atomic,ok}
2017-05-21 12:41:34.765 [info] <0.160.0>@client:init:66 success to create a client
2017-05-21 12:41:34.765 [info] <0.159.0>@tcp_agent:wait_auth:114 success register!
2017-05-21 12:41:34.765 [info] <0.160.0>@client:handle_cast:103 client state: tcp_agent_pid <0.159.0>, client_id 2, client_socket #Port<0.4389>
2017-05-21 12:41:42.828 [info] <0.156.0>@tcp_agent:handle_info:215 ***************** receive request from socket ****************
2017-05-21 12:41:42.828 [info] <0.156.0>@tcp_agent:handle_info:218 #{<<"cmd">> => <<"3">>,<<"data">> => <<"wo xihuan ni">>,<<"id">> => <<"1">>,<<"to_id">> => <<"2">>,<<"to_type">> => <<"1">>}
2017-05-21 12:41:42.828 [info] <0.156.0>@tcp_agent:handle_info:246 call wait_data to handle chat
2017-05-21 12:41:42.828 [info] <0.156.0>@tcp_agent:wait_data:135 chat begin, client send chat
2017-05-21 12:41:42.828 [info] <0.158.0>@client:handle_info:122 send message to other client
2017-05-21 12:41:42.828 [error] <0.158.0> gen_server <0.158.0> terminated with reason: no match of right hand value 1 in client:handle_info/2 line 131
2017-05-21 12:41:42.862 [error] <0.158.0> CRASH REPORT Process <0.158.0> with 0 neighbours exited with reason: no match of right hand value 1 in client:handle_info/2 line 131 in gen_server:terminate/7 line 812
2017-05-21 12:41:42.862 [error] <0.124.0> Supervisor client_sup had child 1 started with {client,start_link,undefined} at <0.158.0> exit with reason no match of right hand value 1 in client:handle_info/2 line 131 in context child_terminated
2017-05-21 12:43:05.005 [info] <0.31.0> Application lager started on node yangwei@brucedeiMac
2017-05-21 12:43:05.005 [info] <0.98.0>@chat_sup:init:26 ###############   Begin  ##############
2017-05-21 12:43:05.101 [info] <0.31.0> Application mnesia started on node yangwei@brucedeiMac
2017-05-21 12:43:05.108 [info] <0.99.0>@mod_control_sup:init:25 load tables:ok 
2017-05-21 12:43:05.108 [info] <0.99.0>@control_sup:init:63 Initialization all resources
2017-05-21 12:43:05.109 [info] <0.121.0>@id_generator:init:30 ########### id_generator
2017-05-21 12:43:05.139 [info] <0.122.0>@group_sup:init:70 [] 
2017-05-21 12:43:05.139 [info] <0.122.0>@group_sup:init:77 [] 
2017-05-21 12:43:05.139 [info] <0.122.0>@group_sup:init:79 ######## group_sup
2017-05-21 12:43:05.149 [info] <0.124.0>@client_sup:init:65 ######## client_sup
2017-05-21 12:43:05.150 [info] <0.31.0> Application chat started on node yangwei@brucedeiMac
2017-05-21 12:43:20.559 [info] <0.126.0>@tcp_acceptor:process_Client_Socket:181 this is the socket use to bind:#Port<0.3682>
2017-05-21 12:43:20.587 [info] <0.126.0>@tcp_acceptor:process_Client_Socket:189 success to create tcp_agent and controlling_porcess it
2017-05-21 12:43:20.587 [info] <0.128.0>@tcp_agent:wait_socket:92 the gen_tcp fsm next_state is wait_auth
2017-05-21 12:43:21.980 [info] <0.128.0>@tcp_agent:handle_info:215 ***************** receive request from socket ****************
2017-05-21 12:43:22.003 [info] <0.128.0>@tcp_agent:handle_info:218 #{<<"cmd">> => <<"1">>,<<"password">> => <<"iyw">>,<<"username">> => <<"zst">>}
2017-05-21 12:43:22.003 [info] <0.128.0>@tcp_agent:handle_info:226 call wait_auth to handle register
2017-05-21 12:43:22.003 [info] <0.128.0>@tcp_agent:wait_auth:96 {register,"zst","iyw"}
2017-05-21 12:43:22.004 [info] <0.128.0>@tcp_agent:wait_auth:98 1
2017-05-21 12:43:22.004 [info] <0.128.0>@mod_mnesia:add_new_client:44 {client,1,"zst","iyw",[],[]}
2017-05-21 12:43:22.004 [info] <0.128.0>@mod_mnesia:add_new_client:50 add new client:{atomic,ok}
2017-05-21 12:43:22.015 [info] <0.130.0>@client:init:66 success to create a client
2017-05-21 12:43:22.015 [info] <0.128.0>@tcp_agent:wait_auth:114 success register!
2017-05-21 12:43:22.015 [info] <0.130.0>@client:handle_cast:103 client state: tcp_agent_pid <0.128.0>, client_id 1, client_socket #Port<0.3682>
2017-05-21 12:43:28.248 [info] <0.126.0>@tcp_acceptor:process_Client_Socket:181 this is the socket use to bind:#Port<0.3701>
2017-05-21 12:43:28.248 [info] <0.126.0>@tcp_acceptor:process_Client_Socket:189 success to create tcp_agent and controlling_porcess it
2017-05-21 12:43:28.248 [info] <0.131.0>@tcp_agent:wait_socket:92 the gen_tcp fsm next_state is wait_auth
2017-05-21 12:43:29.172 [info] <0.131.0>@tcp_agent:handle_info:215 ***************** receive request from socket ****************
2017-05-21 12:43:29.172 [info] <0.131.0>@tcp_agent:handle_info:218 #{<<"cmd">> => <<"1">>,<<"password">> => <<"ist">>,<<"username">> => <<"yw">>}
2017-05-21 12:43:29.172 [info] <0.131.0>@tcp_agent:handle_info:226 call wait_auth to handle register
2017-05-21 12:43:29.172 [info] <0.131.0>@tcp_agent:wait_auth:96 {register,"yw","ist"}
2017-05-21 12:43:29.172 [info] <0.131.0>@tcp_agent:wait_auth:98 2
2017-05-21 12:43:29.172 [info] <0.131.0>@mod_mnesia:add_new_client:44 {client,2,"yw","ist",[],[]}
2017-05-21 12:43:29.172 [info] <0.131.0>@mod_mnesia:add_new_client:50 add new client:{atomic,ok}
2017-05-21 12:43:29.172 [info] <0.132.0>@client:init:66 success to create a client
2017-05-21 12:43:29.172 [info] <0.131.0>@tcp_agent:wait_auth:114 success register!
2017-05-21 12:43:29.172 [info] <0.132.0>@client:handle_cast:103 client state: tcp_agent_pid <0.131.0>, client_id 2, client_socket #Port<0.3701>
2017-05-21 12:43:35.132 [info] <0.128.0>@tcp_agent:handle_info:215 ***************** receive request from socket ****************
2017-05-21 12:43:35.132 [info] <0.128.0>@tcp_agent:handle_info:218 #{<<"cmd">> => <<"3">>,<<"data">> => <<"wo xihuan ni">>,<<"id">> => <<"1">>,<<"to_id">> => <<"2">>,<<"to_type">> => <<"1">>}
2017-05-21 12:43:35.132 [info] <0.128.0>@tcp_agent:handle_info:246 call wait_data to handle chat
2017-05-21 12:43:35.132 [info] <0.128.0>@tcp_agent:wait_data:135 chat begin, client send chat
2017-05-21 12:43:35.132 [info] <0.130.0>@client:handle_info:122 send message to other client
2017-05-21 12:43:35.132 [info] <0.132.0>@client:handle_info:156 receive message from client and send to socket
2017-05-21 12:43:35.132 [info] <0.132.0>@client:handle_info:158 #Port<0.3701>
2017-05-21 12:43:35.132 [info] <0.132.0>@client:handle_info:159 "client 1 said: \nwo xihuan ni"
2017-05-21 12:43:35.132 [error] <0.130.0> gen_server <0.130.0> terminated with reason: bad return value: {client_receive_client_chat,1,"wo xihuan ni"}
2017-05-21 12:43:35.154 [error] <0.130.0> CRASH REPORT Process <0.130.0> with 0 neighbours exited with reason: bad return value: {client_receive_client_chat,1,"wo xihuan ni"} in gen_server:terminate/7 line 812
2017-05-21 12:43:35.154 [error] <0.124.0> Supervisor client_sup had child 1 started with {client,start_link,undefined} at <0.130.0> exit with reason bad return value: {client_receive_client_chat,1,"wo xihuan ni"} in context child_terminated
2017-05-21 12:44:54.814 [info] <0.31.0> Application lager started on node yangwei@brucedeiMac
2017-05-21 12:44:54.814 [info] <0.98.0>@chat_sup:init:26 ###############   Begin  ##############
2017-05-21 12:44:54.914 [info] <0.31.0> Application mnesia started on node yangwei@brucedeiMac
2017-05-21 12:44:54.922 [info] <0.99.0>@mod_control_sup:init:25 load tables:ok 
2017-05-21 12:44:54.922 [info] <0.99.0>@control_sup:init:63 Initialization all resources
2017-05-21 12:44:54.923 [info] <0.121.0>@id_generator:init:30 ########### id_generator
2017-05-21 12:44:54.953 [info] <0.122.0>@group_sup:init:70 [] 
2017-05-21 12:44:54.953 [info] <0.122.0>@group_sup:init:77 [] 
2017-05-21 12:44:54.953 [info] <0.122.0>@group_sup:init:79 ######## group_sup
2017-05-21 12:44:54.963 [info] <0.124.0>@client_sup:init:65 ######## client_sup
2017-05-21 12:44:54.973 [info] <0.31.0> Application chat started on node yangwei@brucedeiMac
2017-05-21 12:44:59.430 [info] <0.126.0>@tcp_acceptor:process_Client_Socket:181 this is the socket use to bind:#Port<0.3682>
2017-05-21 12:44:59.457 [info] <0.126.0>@tcp_acceptor:process_Client_Socket:189 success to create tcp_agent and controlling_porcess it
2017-05-21 12:44:59.457 [info] <0.128.0>@tcp_agent:wait_socket:92 the gen_tcp fsm next_state is wait_auth
2017-05-21 12:45:14.556 [info] <0.128.0>@tcp_agent:handle_info:262 tcp closed, stateName: wait_auth
2017-05-21 12:45:14.556 [info] <0.128.0>@tcp_agent:terminate:288 call suervisor to terminate_child: {error,not_found}
2017-05-21 12:45:14.556 [info] <0.128.0>@tcp_agent:terminate:289 tcp_agent process is termianted
2017-05-21 12:45:49.515 [info] <0.31.0> Application lager started on node yangwei@brucedeiMac
2017-05-21 12:45:49.515 [info] <0.98.0>@chat_sup:init:26 ###############   Begin  ##############
2017-05-21 12:45:49.605 [info] <0.31.0> Application mnesia started on node yangwei@brucedeiMac
2017-05-21 12:45:49.612 [info] <0.99.0>@mod_control_sup:init:25 load tables:ok 
2017-05-21 12:45:49.612 [info] <0.99.0>@control_sup:init:63 Initialization all resources
2017-05-21 12:45:49.613 [info] <0.121.0>@id_generator:init:30 ########### id_generator
2017-05-21 12:45:49.636 [info] <0.122.0>@group_sup:init:70 [] 
2017-05-21 12:45:49.636 [info] <0.122.0>@group_sup:init:77 [] 
2017-05-21 12:45:49.636 [info] <0.122.0>@group_sup:init:79 ######## group_sup
2017-05-21 12:45:49.642 [info] <0.124.0>@client_sup:init:65 ######## client_sup
2017-05-21 12:45:49.644 [info] <0.31.0> Application chat started on node yangwei@brucedeiMac
2017-05-21 12:45:55.454 [info] <0.126.0>@tcp_acceptor:process_Client_Socket:181 this is the socket use to bind:#Port<0.3682>
2017-05-21 12:45:55.481 [info] <0.126.0>@tcp_acceptor:process_Client_Socket:189 success to create tcp_agent and controlling_porcess it
2017-05-21 12:45:55.481 [info] <0.128.0>@tcp_agent:wait_socket:92 the gen_tcp fsm next_state is wait_auth
2017-05-21 12:45:56.460 [info] <0.128.0>@tcp_agent:handle_info:215 ***************** receive request from socket ****************
2017-05-21 12:45:56.486 [info] <0.128.0>@tcp_agent:handle_info:218 #{<<"cmd">> => <<"1">>,<<"password">> => <<"iyw">>,<<"username">> => <<"zst">>}
2017-05-21 12:45:56.486 [info] <0.128.0>@tcp_agent:handle_info:226 call wait_auth to handle register
2017-05-21 12:45:56.486 [info] <0.128.0>@tcp_agent:wait_auth:96 {register,"zst","iyw"}
2017-05-21 12:45:56.487 [info] <0.128.0>@tcp_agent:wait_auth:98 1
2017-05-21 12:45:56.487 [info] <0.128.0>@mod_mnesia:add_new_client:44 {client,1,"zst","iyw",[],[]}
2017-05-21 12:45:56.487 [info] <0.128.0>@mod_mnesia:add_new_client:50 add new client:{atomic,ok}
2017-05-21 12:45:56.504 [info] <0.130.0>@client:init:66 success to create a client
2017-05-21 12:45:56.504 [info] <0.128.0>@tcp_agent:wait_auth:114 success register!
2017-05-21 12:45:56.504 [info] <0.130.0>@client:handle_cast:103 client state: tcp_agent_pid <0.128.0>, client_id 1, client_socket #Port<0.3682>
2017-05-21 12:45:59.250 [info] <0.126.0>@tcp_acceptor:process_Client_Socket:181 this is the socket use to bind:#Port<0.3701>
2017-05-21 12:45:59.251 [info] <0.126.0>@tcp_acceptor:process_Client_Socket:189 success to create tcp_agent and controlling_porcess it
2017-05-21 12:45:59.251 [info] <0.131.0>@tcp_agent:wait_socket:92 the gen_tcp fsm next_state is wait_auth
2017-05-21 12:45:59.916 [info] <0.131.0>@tcp_agent:handle_info:215 ***************** receive request from socket ****************
2017-05-21 12:45:59.916 [info] <0.131.0>@tcp_agent:handle_info:218 #{<<"cmd">> => <<"1">>,<<"password">> => <<"ist">>,<<"username">> => <<"yw">>}
2017-05-21 12:45:59.916 [info] <0.131.0>@tcp_agent:handle_info:226 call wait_auth to handle register
2017-05-21 12:45:59.916 [info] <0.131.0>@tcp_agent:wait_auth:96 {register,"yw","ist"}
2017-05-21 12:45:59.916 [info] <0.131.0>@tcp_agent:wait_auth:98 2
2017-05-21 12:45:59.916 [info] <0.131.0>@mod_mnesia:add_new_client:44 {client,2,"yw","ist",[],[]}
2017-05-21 12:45:59.916 [info] <0.131.0>@mod_mnesia:add_new_client:50 add new client:{atomic,ok}
2017-05-21 12:45:59.916 [info] <0.132.0>@client:init:66 success to create a client
2017-05-21 12:45:59.916 [info] <0.131.0>@tcp_agent:wait_auth:114 success register!
2017-05-21 12:45:59.917 [info] <0.132.0>@client:handle_cast:103 client state: tcp_agent_pid <0.131.0>, client_id 2, client_socket #Port<0.3701>
2017-05-21 12:46:08.612 [info] <0.128.0>@tcp_agent:handle_info:215 ***************** receive request from socket ****************
2017-05-21 12:46:08.612 [info] <0.128.0>@tcp_agent:handle_info:218 #{<<"cmd">> => <<"3">>,<<"data">> => <<"wo xihuan ni">>,<<"id">> => <<"1">>,<<"to_id">> => <<"2">>,<<"to_type">> => <<"1">>}
2017-05-21 12:46:08.612 [info] <0.128.0>@tcp_agent:handle_info:246 call wait_data to handle chat
2017-05-21 12:46:08.612 [info] <0.128.0>@tcp_agent:wait_data:135 chat begin, client send chat
2017-05-21 12:46:08.612 [info] <0.130.0>@client:handle_info:122 send message to other client
2017-05-21 12:46:08.612 [info] <0.132.0>@client:handle_info:156 receive message from client and send to socket
2017-05-21 12:46:08.612 [info] <0.132.0>@client:handle_info:158 #Port<0.3701>
2017-05-21 12:46:08.612 [info] <0.132.0>@client:handle_info:159 "client 1 said: \nwo xihuan ni"
2017-05-21 12:46:08.612 [error] <0.130.0> gen_server <0.130.0> terminated with reason: bad return value: {client_receive_client_chat,1,"wo xihuan ni"}
2017-05-21 12:46:08.637 [error] <0.130.0> CRASH REPORT Process <0.130.0> with 0 neighbours exited with reason: bad return value: {client_receive_client_chat,1,"wo xihuan ni"} in gen_server:terminate/7 line 812
2017-05-21 12:46:08.637 [error] <0.124.0> Supervisor client_sup had child 1 started with {client,start_link,undefined} at <0.130.0> exit with reason bad return value: {client_receive_client_chat,1,"wo xihuan ni"} in context child_terminated
2017-05-21 12:46:33.685 [info] <0.31.0> Application lager started on node yangwei@brucedeiMac
2017-05-21 12:46:33.685 [info] <0.98.0>@chat_sup:init:26 ###############   Begin  ##############
2017-05-21 12:46:33.783 [info] <0.31.0> Application mnesia started on node yangwei@brucedeiMac
2017-05-21 12:46:33.791 [info] <0.99.0>@mod_control_sup:init:25 load tables:ok 
2017-05-21 12:46:33.791 [info] <0.99.0>@control_sup:init:63 Initialization all resources
2017-05-21 12:46:33.792 [info] <0.121.0>@id_generator:init:30 ########### id_generator
2017-05-21 12:46:33.823 [info] <0.122.0>@group_sup:init:70 [] 
2017-05-21 12:46:33.823 [info] <0.122.0>@group_sup:init:77 [] 
2017-05-21 12:46:33.823 [info] <0.122.0>@group_sup:init:79 ######## group_sup
2017-05-21 12:46:33.833 [info] <0.124.0>@client_sup:init:65 ######## client_sup
2017-05-21 12:46:33.835 [info] <0.31.0> Application chat started on node yangwei@brucedeiMac
2017-05-21 12:46:58.466 [info] <0.126.0>@tcp_acceptor:process_Client_Socket:181 this is the socket use to bind:#Port<0.4418>
2017-05-21 12:46:58.494 [info] <0.126.0>@tcp_acceptor:process_Client_Socket:189 success to create tcp_agent and controlling_porcess it
2017-05-21 12:46:58.494 [info] <0.155.0>@tcp_agent:wait_socket:92 the gen_tcp fsm next_state is wait_auth
2017-05-21 12:47:11.204 [info] <0.155.0>@tcp_agent:handle_info:215 ***************** receive request from socket ****************
2017-05-21 12:47:11.223 [info] <0.155.0>@tcp_agent:handle_info:218 #{<<"cmd">> => <<"1">>,<<"password">> => <<"iyw">>,<<"username">> => <<"zst">>}
2017-05-21 12:47:11.223 [info] <0.155.0>@tcp_agent:handle_info:226 call wait_auth to handle register
2017-05-21 12:47:11.223 [info] <0.155.0>@tcp_agent:wait_auth:96 {register,"zst","iyw"}
2017-05-21 12:47:11.224 [info] <0.155.0>@tcp_agent:wait_auth:98 1
2017-05-21 12:47:11.224 [info] <0.155.0>@mod_mnesia:add_new_client:44 {client,1,"zst","iyw",[],[]}
2017-05-21 12:47:11.224 [info] <0.155.0>@mod_mnesia:add_new_client:50 add new client:{atomic,ok}
2017-05-21 12:47:11.240 [info] <0.158.0>@client:init:66 success to create a client
2017-05-21 12:47:11.240 [info] <0.155.0>@tcp_agent:wait_auth:114 success register!
2017-05-21 12:47:11.240 [info] <0.158.0>@client:handle_cast:103 client state: tcp_agent_pid <0.155.0>, client_id 1, client_socket #Port<0.4418>
2017-05-21 12:47:15.133 [info] <0.126.0>@tcp_acceptor:process_Client_Socket:181 this is the socket use to bind:#Port<0.4437>
2017-05-21 12:47:15.133 [info] <0.126.0>@tcp_acceptor:process_Client_Socket:189 success to create tcp_agent and controlling_porcess it
2017-05-21 12:47:15.133 [info] <0.160.0>@tcp_agent:wait_socket:92 the gen_tcp fsm next_state is wait_auth
2017-05-21 12:47:16.852 [info] <0.160.0>@tcp_agent:handle_info:215 ***************** receive request from socket ****************
2017-05-21 12:47:16.852 [info] <0.160.0>@tcp_agent:handle_info:218 #{<<"cmd">> => <<"1">>,<<"password">> => <<"ist">>,<<"username">> => <<"yw">>}
2017-05-21 12:47:16.852 [info] <0.160.0>@tcp_agent:handle_info:226 call wait_auth to handle register
2017-05-21 12:47:16.852 [info] <0.160.0>@tcp_agent:wait_auth:96 {register,"yw","ist"}
2017-05-21 12:47:16.852 [info] <0.160.0>@tcp_agent:wait_auth:98 2
2017-05-21 12:47:16.852 [info] <0.160.0>@mod_mnesia:add_new_client:44 {client,2,"yw","ist",[],[]}
2017-05-21 12:47:16.853 [info] <0.160.0>@mod_mnesia:add_new_client:50 add new client:{atomic,ok}
2017-05-21 12:47:16.853 [info] <0.162.0>@client:init:66 success to create a client
2017-05-21 12:47:16.853 [info] <0.160.0>@tcp_agent:wait_auth:114 success register!
2017-05-21 12:47:16.853 [info] <0.162.0>@client:handle_cast:103 client state: tcp_agent_pid <0.160.0>, client_id 2, client_socket #Port<0.4437>
2017-05-21 12:47:39.052 [info] <0.155.0>@tcp_agent:handle_info:215 ***************** receive request from socket ****************
2017-05-21 12:47:39.052 [info] <0.155.0>@tcp_agent:handle_info:218 #{<<"cmd">> => <<"3">>,<<"data">> => <<" wo xi huan ni">>,<<"id">> => <<"1">>,<<"to_id">> => <<"2">>,<<"to_type">> => <<"1">>}
2017-05-21 12:47:39.052 [info] <0.155.0>@tcp_agent:handle_info:246 call wait_data to handle chat
2017-05-21 12:47:39.052 [info] <0.155.0>@tcp_agent:wait_data:135 chat begin, client send chat
2017-05-21 12:47:39.052 [info] <0.158.0>@client:handle_info:122 send message to other client
2017-05-21 12:47:39.052 [info] <0.162.0>@client:handle_info:156 receive message from client and send to socket
2017-05-21 12:47:39.052 [info] <0.162.0>@client:handle_info:158 #Port<0.4437>
2017-05-21 12:47:39.052 [info] <0.162.0>@client:handle_info:159 "client 1 said: \n wo xi huan ni"
2017-05-21 12:47:39.052 [error] <0.158.0> gen_server <0.158.0> terminated with reason: bad return value: {client_receive_client_chat,1," wo xi huan ni"}
2017-05-21 12:47:39.073 [error] <0.158.0> CRASH REPORT Process <0.158.0> with 0 neighbours exited with reason: bad return value: {client_receive_client_chat,1," wo xi huan ni"} in gen_server:terminate/7 line 812
2017-05-21 12:47:39.073 [error] <0.124.0> Supervisor client_sup had child 1 started with {client,start_link,undefined} at <0.158.0> exit with reason bad return value: {client_receive_client_chat,1," wo xi huan ni"} in context child_terminated
2017-05-21 12:50:00.690 [info] <0.31.0> Application lager started on node yangwei@brucedeiMac
2017-05-21 12:50:00.690 [info] <0.98.0>@chat_sup:init:26 ###############   Begin  ##############
2017-05-21 12:50:00.793 [info] <0.31.0> Application mnesia started on node yangwei@brucedeiMac
2017-05-21 12:50:00.801 [info] <0.99.0>@mod_control_sup:init:25 load tables:ok 
2017-05-21 12:50:00.801 [info] <0.99.0>@control_sup:init:63 Initialization all resources
2017-05-21 12:50:00.802 [info] <0.121.0>@id_generator:init:30 ########### id_generator
2017-05-21 12:50:00.830 [info] <0.122.0>@group_sup:init:70 [] 
2017-05-21 12:50:00.830 [info] <0.122.0>@group_sup:init:77 [] 
2017-05-21 12:50:00.830 [info] <0.122.0>@group_sup:init:79 ######## group_sup
2017-05-21 12:50:00.839 [info] <0.124.0>@client_sup:init:65 ######## client_sup
2017-05-21 12:50:00.849 [info] <0.31.0> Application chat started on node yangwei@brucedeiMac
2017-05-21 12:50:24.128 [info] <0.126.0>@tcp_acceptor:process_Client_Socket:181 this is the socket use to bind:#Port<0.4370>
2017-05-21 12:50:24.156 [info] <0.150.0>@tcp_agent:wait_socket:92 the gen_tcp fsm next_state is wait_auth
2017-05-21 12:50:24.156 [info] <0.126.0>@tcp_acceptor:process_Client_Socket:189 success to create tcp_agent and controlling_porcess it
2017-05-21 12:50:31.004 [info] <0.126.0>@tcp_acceptor:process_Client_Socket:181 this is the socket use to bind:#Port<0.4381>
2017-05-21 12:50:31.004 [info] <0.126.0>@tcp_acceptor:process_Client_Socket:189 success to create tcp_agent and controlling_porcess it
2017-05-21 12:50:31.004 [info] <0.151.0>@tcp_agent:wait_socket:92 the gen_tcp fsm next_state is wait_auth
2017-05-21 12:50:33.764 [info] <0.150.0>@tcp_agent:handle_info:215 ***************** receive request from socket ****************
2017-05-21 12:50:33.785 [info] <0.150.0>@tcp_agent:handle_info:218 #{<<"cmd">> => <<"1">>,<<"password">> => <<"iyw">>,<<"username">> => <<"zst">>}
2017-05-21 12:50:33.785 [info] <0.150.0>@tcp_agent:handle_info:226 call wait_auth to handle register
2017-05-21 12:50:33.785 [info] <0.150.0>@tcp_agent:wait_auth:96 {register,"zst","iyw"}
2017-05-21 12:50:33.786 [info] <0.150.0>@tcp_agent:wait_auth:98 1
2017-05-21 12:50:33.786 [info] <0.150.0>@mod_mnesia:add_new_client:44 {client,1,"zst","iyw",[],[]}
2017-05-21 12:50:33.786 [info] <0.150.0>@mod_mnesia:add_new_client:50 add new client:{atomic,ok}
2017-05-21 12:50:33.805 [info] <0.153.0>@client:init:66 success to create a client
2017-05-21 12:50:33.805 [info] <0.150.0>@tcp_agent:wait_auth:114 success register!
2017-05-21 12:50:33.805 [info] <0.153.0>@client:handle_cast:103 client state: tcp_agent_pid <0.150.0>, client_id 1, client_socket #Port<0.4370>
2017-05-21 12:50:35.532 [info] <0.151.0>@tcp_agent:handle_info:215 ***************** receive request from socket ****************
2017-05-21 12:50:35.532 [info] <0.151.0>@tcp_agent:handle_info:218 #{<<"cmd">> => <<"1">>,<<"password">> => <<"ist">>,<<"username">> => <<"yw">>}
2017-05-21 12:50:35.532 [info] <0.151.0>@tcp_agent:handle_info:226 call wait_auth to handle register
2017-05-21 12:50:35.532 [info] <0.151.0>@tcp_agent:wait_auth:96 {register,"yw","ist"}
2017-05-21 12:50:35.532 [info] <0.151.0>@tcp_agent:wait_auth:98 2
2017-05-21 12:50:35.532 [info] <0.151.0>@mod_mnesia:add_new_client:44 {client,2,"yw","ist",[],[]}
2017-05-21 12:50:35.532 [info] <0.151.0>@mod_mnesia:add_new_client:50 add new client:{atomic,ok}
2017-05-21 12:50:35.532 [info] <0.154.0>@client:init:66 success to create a client
2017-05-21 12:50:35.532 [info] <0.151.0>@tcp_agent:wait_auth:114 success register!
2017-05-21 12:50:35.532 [info] <0.154.0>@client:handle_cast:103 client state: tcp_agent_pid <0.151.0>, client_id 2, client_socket #Port<0.4381>
2017-05-21 12:50:46.732 [info] <0.150.0>@tcp_agent:handle_info:215 ***************** receive request from socket ****************
2017-05-21 12:50:46.732 [info] <0.150.0>@tcp_agent:handle_info:218 #{<<"cmd">> => <<"3">>,<<"data">> => <<" wo xi huan ni">>,<<"id">> => <<"1">>,<<"to_id">> => <<"2">>,<<"to_type">> => <<"1">>}
2017-05-21 12:50:46.732 [info] <0.150.0>@tcp_agent:handle_info:246 call wait_data to handle chat
2017-05-21 12:50:46.732 [info] <0.150.0>@tcp_agent:wait_data:135 chat begin, client send chat
2017-05-21 12:50:46.732 [info] <0.153.0>@client:handle_info:122 send message to other client
2017-05-21 12:50:46.732 [info] <0.154.0>@client:handle_info:156 receive message from client and send to socket
2017-05-21 12:50:46.732 [info] <0.154.0>@client:handle_info:158 #Port<0.4381>
2017-05-21 12:50:46.732 [info] <0.154.0>@client:handle_info:159 "client 1 said: \n wo xi huan ni"
2017-05-21 12:50:46.732 [error] <0.153.0> gen_server <0.153.0> terminated with reason: bad return value: {client_receive_client_chat,1," wo xi huan ni"}
2017-05-21 12:50:46.732 [info] <0.154.0>@client:handle_info:161 success send message
2017-05-21 12:50:46.746 [error] <0.153.0> CRASH REPORT Process <0.153.0> with 0 neighbours exited with reason: bad return value: {client_receive_client_chat,1," wo xi huan ni"} in gen_server:terminate/7 line 812
2017-05-21 12:50:46.746 [error] <0.124.0> Supervisor client_sup had child 1 started with {client,start_link,undefined} at <0.153.0> exit with reason bad return value: {client_receive_client_chat,1," wo xi huan ni"} in context child_terminated
2017-05-21 12:53:46.813 [info] <0.31.0> Application lager started on node yangwei@brucedeiMac
2017-05-21 12:53:46.813 [info] <0.98.0>@chat_sup:init:26 ###############   Begin  ##############
2017-05-21 12:53:46.907 [info] <0.31.0> Application mnesia started on node yangwei@brucedeiMac
2017-05-21 12:53:46.915 [info] <0.99.0>@mod_control_sup:init:25 load tables:ok 
2017-05-21 12:53:46.915 [info] <0.99.0>@control_sup:init:63 Initialization all resources
2017-05-21 12:53:46.916 [info] <0.121.0>@id_generator:init:30 ########### id_generator
2017-05-21 12:53:46.947 [info] <0.122.0>@group_sup:init:70 [] 
2017-05-21 12:53:46.947 [info] <0.122.0>@group_sup:init:77 [] 
2017-05-21 12:53:46.947 [info] <0.122.0>@group_sup:init:79 ######## group_sup
2017-05-21 12:53:46.957 [info] <0.124.0>@client_sup:init:65 ######## client_sup
2017-05-21 12:53:46.968 [info] <0.31.0> Application chat started on node yangwei@brucedeiMac
2017-05-21 12:54:03.068 [info] <0.126.0>@tcp_acceptor:process_Client_Socket:181 this is the socket use to bind:#Port<0.3682>
2017-05-21 12:54:03.096 [info] <0.126.0>@tcp_acceptor:process_Client_Socket:189 success to create tcp_agent and controlling_porcess it
2017-05-21 12:54:03.096 [info] <0.128.0>@tcp_agent:wait_socket:92 the gen_tcp fsm next_state is wait_auth
2017-05-21 12:54:11.087 [info] <0.126.0>@tcp_acceptor:process_Client_Socket:181 this is the socket use to bind:#Port<0.3693>
2017-05-21 12:54:11.087 [info] <0.126.0>@tcp_acceptor:process_Client_Socket:189 success to create tcp_agent and controlling_porcess it
2017-05-21 12:54:11.087 [info] <0.129.0>@tcp_agent:wait_socket:92 the gen_tcp fsm next_state is wait_auth
2017-05-21 12:54:12.244 [info] <0.129.0>@tcp_agent:handle_info:215 ***************** receive request from socket ****************
2017-05-21 12:54:12.267 [info] <0.129.0>@tcp_agent:handle_info:218 #{<<"cmd">> => <<"1">>,<<"password">> => <<"ist">>,<<"username">> => <<"yw">>}
2017-05-21 12:54:12.267 [info] <0.129.0>@tcp_agent:handle_info:226 call wait_auth to handle register
2017-05-21 12:54:12.267 [info] <0.129.0>@tcp_agent:wait_auth:96 {register,"yw","ist"}
2017-05-21 12:54:12.267 [info] <0.129.0>@tcp_agent:wait_auth:98 1
2017-05-21 12:54:12.267 [info] <0.129.0>@mod_mnesia:add_new_client:44 {client,1,"yw","ist",[],[]}
2017-05-21 12:54:12.267 [info] <0.129.0>@mod_mnesia:add_new_client:50 add new client:{atomic,ok}
2017-05-21 12:54:12.280 [info] <0.131.0>@client:init:66 success to create a client
2017-05-21 12:54:12.280 [info] <0.129.0>@tcp_agent:wait_auth:114 success register!
2017-05-21 12:54:12.280 [info] <0.131.0>@client:handle_cast:103 client state: tcp_agent_pid <0.129.0>, client_id 1, client_socket #Port<0.3693>
2017-05-21 12:54:20.888 [info] <0.129.0>@tcp_agent:handle_info:262 tcp closed, stateName: wait_data
2017-05-21 12:54:20.888 [info] <0.129.0>@tcp_agent:terminate:288 call suervisor to terminate_child: {error,not_found}
2017-05-21 12:54:20.888 [info] <0.129.0>@tcp_agent:terminate:289 tcp_agent process is termianted
2017-05-21 12:54:27.959 [info] <0.128.0>@tcp_agent:handle_info:262 tcp closed, stateName: wait_auth
2017-05-21 12:54:27.960 [info] <0.128.0>@tcp_agent:terminate:288 call suervisor to terminate_child: {error,not_found}
2017-05-21 12:54:27.960 [info] <0.128.0>@tcp_agent:terminate:289 tcp_agent process is termianted
2017-05-21 12:56:36.617 [info] <0.31.0> Application lager started on node yangwei@brucedeiMac
2017-05-21 12:56:36.617 [info] <0.98.0>@chat_sup:init:26 ###############   Begin  ##############
2017-05-21 12:56:36.673 [info] <0.31.0> Application mnesia started on node yangwei@brucedeiMac
2017-05-21 12:56:36.680 [info] <0.99.0>@mod_control_sup:init:25 load tables:ok 
2017-05-21 12:56:36.680 [info] <0.99.0>@control_sup:init:63 Initialization all resources
2017-05-21 12:56:36.680 [info] <0.121.0>@id_generator:init:30 ########### id_generator
2017-05-21 12:56:36.687 [info] <0.122.0>@group_sup:init:70 [] 
2017-05-21 12:56:36.687 [info] <0.122.0>@group_sup:init:77 [] 
2017-05-21 12:56:36.687 [info] <0.122.0>@group_sup:init:79 ######## group_sup
2017-05-21 12:56:36.687 [info] <0.124.0>@client_sup:init:65 ######## client_sup
2017-05-21 12:56:36.689 [info] <0.31.0> Application chat started on node yangwei@brucedeiMac
2017-05-21 12:56:53.595 [info] <0.126.0>@tcp_acceptor:process_Client_Socket:181 this is the socket use to bind:#Port<0.3682>
2017-05-21 12:56:53.623 [info] <0.126.0>@tcp_acceptor:process_Client_Socket:189 success to create tcp_agent and controlling_porcess it
2017-05-21 12:56:53.623 [info] <0.128.0>@tcp_agent:wait_socket:92 the gen_tcp fsm next_state is wait_auth
2017-05-21 12:57:18.858 [info] <0.31.0> Application lager started on node yangwei@brucedeiMac
2017-05-21 12:57:18.874 [info] <0.98.0>@chat_sup:init:26 ###############   Begin  ##############
2017-05-21 12:57:19.024 [info] <0.31.0> Application mnesia started on node yangwei@brucedeiMac
2017-05-21 12:57:19.032 [info] <0.99.0>@mod_control_sup:init:25 load tables:ok 
2017-05-21 12:57:19.032 [info] <0.99.0>@control_sup:init:63 Initialization all resources
2017-05-21 12:57:19.033 [info] <0.121.0>@id_generator:init:30 ########### id_generator
2017-05-21 12:57:19.057 [info] <0.122.0>@group_sup:init:70 [] 
2017-05-21 12:57:19.057 [info] <0.122.0>@group_sup:init:77 [] 
2017-05-21 12:57:19.057 [info] <0.122.0>@group_sup:init:79 ######## group_sup
2017-05-21 12:57:19.064 [info] <0.124.0>@client_sup:init:65 ######## client_sup
2017-05-21 12:57:19.066 [info] <0.31.0> Application chat started on node yangwei@brucedeiMac
2017-05-21 12:57:28.352 [info] <0.126.0>@tcp_acceptor:process_Client_Socket:181 this is the socket use to bind:#Port<0.3682>
2017-05-21 12:57:28.380 [info] <0.126.0>@tcp_acceptor:process_Client_Socket:189 success to create tcp_agent and controlling_porcess it
2017-05-21 12:57:28.380 [info] <0.128.0>@tcp_agent:wait_socket:92 the gen_tcp fsm next_state is wait_auth
2017-05-21 12:59:06.242 [info] <0.126.0>@tcp_acceptor:process_Client_Socket:181 this is the socket use to bind:#Port<0.3693>
2017-05-21 12:59:06.242 [info] <0.126.0>@tcp_acceptor:process_Client_Socket:189 success to create tcp_agent and controlling_porcess it
2017-05-21 12:59:06.242 [info] <0.129.0>@tcp_agent:wait_socket:92 the gen_tcp fsm next_state is wait_auth
2017-05-21 12:59:10.497 [info] <0.128.0>@tcp_agent:handle_info:215 ***************** receive request from socket ****************
2017-05-21 12:59:10.520 [info] <0.128.0>@tcp_agent:handle_info:218 #{<<"cmd">> => <<"1">>,<<"password">> => <<"iyw">>,<<"username">> => <<"zst">>}
2017-05-21 12:59:10.520 [info] <0.128.0>@tcp_agent:handle_info:226 call wait_auth to handle register
2017-05-21 12:59:10.520 [info] <0.128.0>@tcp_agent:wait_auth:96 {register,"zst","iyw"}
2017-05-21 12:59:10.521 [info] <0.128.0>@tcp_agent:wait_auth:98 1
2017-05-21 12:59:10.521 [info] <0.128.0>@mod_mnesia:add_new_client:44 {client,1,"zst","iyw",[],[]}
2017-05-21 12:59:10.521 [info] <0.128.0>@mod_mnesia:add_new_client:50 add new client:{atomic,ok}
2017-05-21 12:59:10.540 [info] <0.131.0>@client:init:66 success to create a client
2017-05-21 12:59:10.540 [info] <0.128.0>@tcp_agent:wait_auth:114 success register!
2017-05-21 12:59:10.540 [info] <0.131.0>@client:handle_cast:103 client state: tcp_agent_pid <0.128.0>, client_id 1, client_socket #Port<0.3682>
2017-05-21 12:59:14.700 [info] <0.129.0>@tcp_agent:handle_info:215 ***************** receive request from socket ****************
2017-05-21 12:59:14.700 [info] <0.129.0>@tcp_agent:handle_info:218 #{<<"cmd">> => <<"1">>,<<"password">> => <<"ist">>,<<"username">> => <<"yw">>}
2017-05-21 12:59:14.700 [info] <0.129.0>@tcp_agent:handle_info:226 call wait_auth to handle register
2017-05-21 12:59:14.700 [info] <0.129.0>@tcp_agent:wait_auth:96 {register,"yw","ist"}
2017-05-21 12:59:14.700 [info] <0.129.0>@tcp_agent:wait_auth:98 2
2017-05-21 12:59:14.700 [info] <0.129.0>@mod_mnesia:add_new_client:44 {client,2,"yw","ist",[],[]}
2017-05-21 12:59:14.700 [info] <0.129.0>@mod_mnesia:add_new_client:50 add new client:{atomic,ok}
2017-05-21 12:59:14.701 [info] <0.132.0>@client:init:66 success to create a client
2017-05-21 12:59:14.701 [info] <0.129.0>@tcp_agent:wait_auth:114 success register!
2017-05-21 12:59:14.701 [info] <0.132.0>@client:handle_cast:103 client state: tcp_agent_pid <0.129.0>, client_id 2, client_socket #Port<0.3693>
2017-05-21 13:01:49.900 [info] <0.128.0>@tcp_agent:handle_info:215 ***************** receive request from socket ****************
2017-05-21 13:01:49.900 [info] <0.128.0>@tcp_agent:handle_info:218 #{<<"cmd">> => <<"3">>,<<"data">> => <<"wo xihuan ni">>,<<"id">> => <<"1">>,<<"to_id">> => <<"2">>,<<"to_type">> => <<"1">>}
2017-05-21 13:01:49.900 [info] <0.128.0>@tcp_agent:handle_info:246 call wait_data to handle chat
2017-05-21 13:01:49.900 [info] <0.128.0>@tcp_agent:wait_data:135 chat begin, client send chat
2017-05-21 13:01:49.900 [info] <0.131.0>@client:handle_info:122 send message to other client
2017-05-21 13:01:49.900 [info] <0.131.0>@client:terminate:184 {bad_return_value,{client_receive_client_chat,1,"wo xihuan ni"}}
2017-05-21 13:01:49.900 [info] <0.132.0>@client:handle_info:156 receive message from client and send to socket
2017-05-21 13:01:49.900 [info] <0.132.0>@client:handle_info:158 #Port<0.3693>
2017-05-21 13:01:49.900 [info] <0.132.0>@client:handle_info:159 "client 1 said: \nwo xihuan ni"
2017-05-21 13:01:49.900 [info] <0.132.0>@client:handle_info:161 success send message
2017-05-21 13:01:49.900 [error] <0.131.0> gen_server <0.131.0> terminated with reason: bad return value: {client_receive_client_chat,1,"wo xihuan ni"}
2017-05-21 13:01:49.955 [error] <0.131.0> CRASH REPORT Process <0.131.0> with 0 neighbours exited with reason: bad return value: {client_receive_client_chat,1,"wo xihuan ni"} in gen_server:terminate/7 line 812
2017-05-21 13:01:49.955 [error] <0.124.0> Supervisor client_sup had child 1 started with {client,start_link,undefined} at <0.131.0> exit with reason bad return value: {client_receive_client_chat,1,"wo xihuan ni"} in context child_terminated
2017-05-21 13:19:59.217 [info] <0.31.0> Application lager started on node yangwei@brucedeiMac
2017-05-21 13:19:59.217 [info] <0.98.0>@chat_sup:init:26 ###############   Begin  ##############
2017-05-21 13:19:59.315 [info] <0.31.0> Application mnesia started on node yangwei@brucedeiMac
2017-05-21 13:19:59.323 [info] <0.99.0>@mod_control_sup:init:25 load tables:ok 
2017-05-21 13:19:59.323 [info] <0.99.0>@control_sup:init:63 Initialization all resources
2017-05-21 13:19:59.324 [info] <0.121.0>@id_generator:init:30 ########### id_generator
2017-05-21 13:19:59.352 [info] <0.122.0>@group_sup:init:70 [] 
2017-05-21 13:19:59.352 [info] <0.122.0>@group_sup:init:77 [] 
2017-05-21 13:19:59.352 [info] <0.122.0>@group_sup:init:79 ######## group_sup
2017-05-21 13:19:59.361 [info] <0.124.0>@client_sup:init:65 ######## client_sup
2017-05-21 13:19:59.364 [info] <0.31.0> Application chat started on node yangwei@brucedeiMac
2017-05-21 13:20:10.061 [info] <0.126.0>@tcp_acceptor:process_Client_Socket:181 this is the socket use to bind:#Port<0.3682>
2017-05-21 13:20:10.088 [info] <0.126.0>@tcp_acceptor:process_Client_Socket:189 success to create tcp_agent and controlling_porcess it
2017-05-21 13:20:10.088 [info] <0.128.0>@tcp_agent:wait_socket:92 the gen_tcp fsm next_state is wait_auth
2017-05-21 13:20:11.077 [info] <0.128.0>@tcp_agent:handle_info:215 ***************** receive request from socket ****************
2017-05-21 13:20:11.116 [info] <0.128.0>@tcp_agent:handle_info:218 #{<<"cmd">> => <<"1">>,<<"password">> => <<"iyw">>,<<"username">> => <<"zst">>}
2017-05-21 13:20:11.116 [info] <0.128.0>@tcp_agent:handle_info:226 call wait_auth to handle register
2017-05-21 13:20:11.116 [info] <0.128.0>@tcp_agent:wait_auth:96 {register,"zst","iyw"}
2017-05-21 13:20:11.116 [info] <0.128.0>@tcp_agent:wait_auth:98 1
2017-05-21 13:20:11.116 [info] <0.128.0>@mod_mnesia:add_new_client:44 {client,1,"zst","iyw",[],[]}
2017-05-21 13:20:11.116 [info] <0.128.0>@mod_mnesia:add_new_client:50 add new client:{atomic,ok}
2017-05-21 13:20:11.118 [info] <0.130.0>@client:init:66 success to create a client
2017-05-21 13:20:11.118 [info] <0.128.0>@tcp_agent:wait_auth:114 success register!
2017-05-21 13:20:11.118 [info] <0.130.0>@client:handle_cast:103 client state: tcp_agent_pid <0.128.0>, client_id 1, client_socket #Port<0.3682>
2017-05-21 13:20:14.513 [info] <0.126.0>@tcp_acceptor:process_Client_Socket:181 this is the socket use to bind:#Port<0.3701>
2017-05-21 13:20:14.514 [info] <0.126.0>@tcp_acceptor:process_Client_Socket:189 success to create tcp_agent and controlling_porcess it
2017-05-21 13:20:14.514 [info] <0.131.0>@tcp_agent:wait_socket:92 the gen_tcp fsm next_state is wait_auth
2017-05-21 13:20:15.212 [info] <0.131.0>@tcp_agent:handle_info:215 ***************** receive request from socket ****************
2017-05-21 13:20:15.212 [info] <0.131.0>@tcp_agent:handle_info:218 #{<<"cmd">> => <<"1">>,<<"password">> => <<"ist">>,<<"username">> => <<"yw">>}
2017-05-21 13:20:15.212 [info] <0.131.0>@tcp_agent:handle_info:226 call wait_auth to handle register
2017-05-21 13:20:15.212 [info] <0.131.0>@tcp_agent:wait_auth:96 {register,"yw","ist"}
2017-05-21 13:20:15.213 [info] <0.131.0>@tcp_agent:wait_auth:98 2
2017-05-21 13:20:15.213 [info] <0.131.0>@mod_mnesia:add_new_client:44 {client,2,"yw","ist",[],[]}
2017-05-21 13:20:15.213 [info] <0.131.0>@mod_mnesia:add_new_client:50 add new client:{atomic,ok}
2017-05-21 13:20:15.213 [info] <0.132.0>@client:init:66 success to create a client
2017-05-21 13:20:15.213 [info] <0.131.0>@tcp_agent:wait_auth:114 success register!
2017-05-21 13:20:15.213 [info] <0.132.0>@client:handle_cast:103 client state: tcp_agent_pid <0.131.0>, client_id 2, client_socket #Port<0.3701>
2017-05-21 13:20:21.932 [info] <0.128.0>@tcp_agent:handle_info:215 ***************** receive request from socket ****************
2017-05-21 13:20:21.932 [info] <0.128.0>@tcp_agent:handle_info:218 #{<<"cmd">> => <<"3">>,<<"data">> => <<"wo xi huan ni">>,<<"id">> => <<"1">>,<<"to_id">> => <<"2">>,<<"to_type">> => <<"1">>}
2017-05-21 13:20:21.932 [info] <0.128.0>@tcp_agent:handle_info:246 call wait_data to handle chat
2017-05-21 13:20:21.932 [info] <0.128.0>@tcp_agent:wait_data:135 chat begin, client send chat
2017-05-21 13:20:21.932 [info] <0.130.0>@client:handle_info:122 send message to other client
2017-05-21 13:20:21.932 [info] <0.130.0>@client:handle_info:129 $$$$$$$$$$$$$$$$$$$$$$$$
2017-05-21 13:20:21.932 [info] <0.130.0>@client:handle_info:132 ##############
2017-05-21 13:20:21.932 [info] <0.130.0>@client:terminate:187 {bad_return_value,{client_receive_client_chat,1,"wo xi huan ni"}}
2017-05-21 13:20:21.932 [info] <0.132.0>@client:handle_info:159 receive message from client and send to socket
2017-05-21 13:20:21.932 [info] <0.132.0>@client:handle_info:161 #Port<0.3701>
2017-05-21 13:20:21.932 [info] <0.132.0>@client:handle_info:162 "client 1 said: \nwo xi huan ni"
2017-05-21 13:20:21.932 [info] <0.132.0>@client:handle_info:164 success send message
2017-05-21 13:20:21.932 [error] <0.130.0> gen_server <0.130.0> terminated with reason: bad return value: {client_receive_client_chat,1,"wo xi huan ni"}
2017-05-21 13:20:21.945 [error] <0.130.0> CRASH REPORT Process <0.130.0> with 0 neighbours exited with reason: bad return value: {client_receive_client_chat,1,"wo xi huan ni"} in gen_server:terminate/7 line 812
2017-05-21 13:20:21.945 [error] <0.124.0> Supervisor client_sup had child 1 started with {client,start_link,undefined} at <0.130.0> exit with reason bad return value: {client_receive_client_chat,1,"wo xi huan ni"} in context child_terminated
2017-05-21 13:21:24.552 [info] <0.31.0> Application lager started on node yangwei@brucedeiMac
2017-05-21 13:21:24.552 [info] <0.98.0>@chat_sup:init:26 ###############   Begin  ##############
2017-05-21 13:21:24.606 [info] <0.31.0> Application mnesia started on node yangwei@brucedeiMac
2017-05-21 13:21:24.613 [info] <0.99.0>@mod_control_sup:init:25 load tables:ok 
2017-05-21 13:21:24.613 [info] <0.99.0>@control_sup:init:63 Initialization all resources
2017-05-21 13:21:24.613 [info] <0.121.0>@id_generator:init:30 ########### id_generator
2017-05-21 13:21:24.619 [info] <0.122.0>@group_sup:init:70 [] 
2017-05-21 13:21:24.619 [info] <0.122.0>@group_sup:init:77 [] 
2017-05-21 13:21:24.619 [info] <0.122.0>@group_sup:init:79 ######## group_sup
2017-05-21 13:21:24.620 [info] <0.124.0>@client_sup:init:65 ######## client_sup
2017-05-21 13:21:24.622 [info] <0.31.0> Application chat started on node yangwei@brucedeiMac
2017-05-21 13:21:27.329 [info] <0.126.0>@tcp_acceptor:process_Client_Socket:181 this is the socket use to bind:#Port<0.3682>
2017-05-21 13:21:27.331 [info] <0.126.0>@tcp_acceptor:process_Client_Socket:189 success to create tcp_agent and controlling_porcess it
2017-05-21 13:21:27.331 [info] <0.128.0>@tcp_agent:wait_socket:92 the gen_tcp fsm next_state is wait_auth
2017-05-21 13:21:30.224 [info] <0.126.0>@tcp_acceptor:process_Client_Socket:181 this is the socket use to bind:#Port<0.3693>
2017-05-21 13:21:30.224 [info] <0.126.0>@tcp_acceptor:process_Client_Socket:189 success to create tcp_agent and controlling_porcess it
2017-05-21 13:21:30.224 [info] <0.129.0>@tcp_agent:wait_socket:92 the gen_tcp fsm next_state is wait_auth
2017-05-21 13:21:32.612 [info] <0.128.0>@tcp_agent:handle_info:215 ***************** receive request from socket ****************
2017-05-21 13:21:32.616 [info] <0.128.0>@tcp_agent:handle_info:218 #{<<"cmd">> => <<"1">>,<<"password">> => <<"iyw">>,<<"username">> => <<"zst">>}
2017-05-21 13:21:32.616 [info] <0.128.0>@tcp_agent:handle_info:226 call wait_auth to handle register
2017-05-21 13:21:32.616 [info] <0.128.0>@tcp_agent:wait_auth:96 {register,"zst","iyw"}
2017-05-21 13:21:32.616 [info] <0.128.0>@tcp_agent:wait_auth:98 1
2017-05-21 13:21:32.616 [info] <0.128.0>@mod_mnesia:add_new_client:44 {client,1,"zst","iyw",[],[]}
2017-05-21 13:21:32.616 [info] <0.128.0>@mod_mnesia:add_new_client:50 add new client:{atomic,ok}
2017-05-21 13:21:32.618 [info] <0.131.0>@client:init:66 success to create a client
2017-05-21 13:21:32.618 [info] <0.128.0>@tcp_agent:wait_auth:114 success register!
2017-05-21 13:21:32.618 [info] <0.131.0>@client:handle_cast:103 client state: tcp_agent_pid <0.128.0>, client_id 1, client_socket #Port<0.3682>
2017-05-21 13:21:35.092 [info] <0.129.0>@tcp_agent:handle_info:215 ***************** receive request from socket ****************
2017-05-21 13:21:35.092 [info] <0.129.0>@tcp_agent:handle_info:218 #{<<"cmd">> => <<"1">>,<<"password">> => <<"ist">>,<<"username">> => <<"yw">>}
2017-05-21 13:21:35.092 [info] <0.129.0>@tcp_agent:handle_info:226 call wait_auth to handle register
2017-05-21 13:21:35.092 [info] <0.129.0>@tcp_agent:wait_auth:96 {register,"yw","ist"}
2017-05-21 13:21:35.092 [info] <0.129.0>@tcp_agent:wait_auth:98 2
2017-05-21 13:21:35.092 [info] <0.129.0>@mod_mnesia:add_new_client:44 {client,2,"yw","ist",[],[]}
2017-05-21 13:21:35.092 [info] <0.129.0>@mod_mnesia:add_new_client:50 add new client:{atomic,ok}
2017-05-21 13:21:35.092 [info] <0.132.0>@client:init:66 success to create a client
2017-05-21 13:21:35.093 [info] <0.129.0>@tcp_agent:wait_auth:114 success register!
2017-05-21 13:21:35.093 [info] <0.132.0>@client:handle_cast:103 client state: tcp_agent_pid <0.129.0>, client_id 2, client_socket #Port<0.3693>
2017-05-21 13:21:42.436 [info] <0.128.0>@tcp_agent:handle_info:215 ***************** receive request from socket ****************
2017-05-21 13:21:42.436 [info] <0.128.0>@tcp_agent:handle_info:218 #{<<"cmd">> => <<"3">>,<<"data">> => <<"wo xihuan ni">>,<<"id">> => <<"1">>,<<"to_id">> => <<"2">>,<<"to_type">> => <<"1">>}
2017-05-21 13:21:42.436 [info] <0.128.0>@tcp_agent:handle_info:246 call wait_data to handle chat
2017-05-21 13:21:42.436 [info] <0.128.0>@tcp_agent:wait_data:135 chat begin, client send chat
2017-05-21 13:21:42.436 [info] <0.131.0>@client:handle_info:122 send message to other client
2017-05-21 13:21:42.436 [info] <0.131.0>@client:handle_info:129 $$$$$$$$$$$$$$$$$$$$$$$$
2017-05-21 13:21:42.436 [info] <0.131.0>@client:handle_info:149 <0.132.0> {client_receive_client_chat,1,"wo xihuan ni"}
2017-05-21 13:21:42.436 [info] <0.131.0>@client:terminate:187 {bad_return_value,{client_receive_client_chat,1,"wo xihuan ni"}}
2017-05-21 13:21:42.436 [info] <0.132.0>@client:handle_info:159 receive message from client and send to socket
2017-05-21 13:21:42.436 [info] <0.132.0>@client:handle_info:161 #Port<0.3693>
2017-05-21 13:21:42.436 [info] <0.132.0>@client:handle_info:162 "client 1 said: \nwo xihuan ni"
2017-05-21 13:21:42.436 [info] <0.132.0>@client:handle_info:164 success send message
2017-05-21 13:21:42.436 [error] <0.131.0> gen_server <0.131.0> terminated with reason: bad return value: {client_receive_client_chat,1,"wo xihuan ni"}
2017-05-21 13:21:42.438 [error] <0.131.0> CRASH REPORT Process <0.131.0> with 0 neighbours exited with reason: bad return value: {client_receive_client_chat,1,"wo xihuan ni"} in gen_server:terminate/7 line 812
2017-05-21 13:21:42.438 [error] <0.124.0> Supervisor client_sup had child 1 started with {client,start_link,undefined} at <0.131.0> exit with reason bad return value: {client_receive_client_chat,1,"wo xihuan ni"} in context child_terminated
2017-05-21 13:24:28.065 [info] <0.31.0> Application lager started on node yangwei@brucedeiMac
2017-05-21 13:24:28.065 [info] <0.98.0>@chat_sup:init:26 ###############   Begin  ##############
2017-05-21 13:24:28.120 [info] <0.31.0> Application mnesia started on node yangwei@brucedeiMac
2017-05-21 13:24:28.126 [info] <0.99.0>@mod_control_sup:init:25 load tables:ok 
2017-05-21 13:24:28.126 [info] <0.99.0>@control_sup:init:63 Initialization all resources
2017-05-21 13:24:28.127 [info] <0.121.0>@id_generator:init:30 ########### id_generator
2017-05-21 13:24:28.133 [info] <0.122.0>@group_sup:init:70 [] 
2017-05-21 13:24:28.133 [info] <0.122.0>@group_sup:init:77 [] 
2017-05-21 13:24:28.133 [info] <0.122.0>@group_sup:init:79 ######## group_sup
2017-05-21 13:24:28.134 [info] <0.124.0>@client_sup:init:65 ######## client_sup
2017-05-21 13:24:28.136 [info] <0.31.0> Application chat started on node yangwei@brucedeiMac
2017-05-21 13:24:31.775 [info] <0.126.0>@tcp_acceptor:process_Client_Socket:181 this is the socket use to bind:#Port<0.3682>
2017-05-21 13:24:31.778 [info] <0.126.0>@tcp_acceptor:process_Client_Socket:189 success to create tcp_agent and controlling_porcess it
2017-05-21 13:24:31.779 [info] <0.128.0>@tcp_agent:wait_socket:92 the gen_tcp fsm next_state is wait_auth
2017-05-21 13:24:32.868 [info] <0.128.0>@tcp_agent:handle_info:215 ***************** receive request from socket ****************
2017-05-21 13:24:32.872 [info] <0.128.0>@tcp_agent:handle_info:218 #{<<"cmd">> => <<"1">>,<<"password">> => <<"iyw">>,<<"username">> => <<"zst">>}
2017-05-21 13:24:32.872 [info] <0.128.0>@tcp_agent:handle_info:226 call wait_auth to handle register
2017-05-21 13:24:32.872 [info] <0.128.0>@tcp_agent:wait_auth:96 {register,"zst","iyw"}
2017-05-21 13:24:32.872 [info] <0.128.0>@tcp_agent:wait_auth:98 1
2017-05-21 13:24:32.872 [info] <0.128.0>@mod_mnesia:add_new_client:44 {client,1,"zst","iyw",[],[]}
2017-05-21 13:24:32.872 [info] <0.128.0>@mod_mnesia:add_new_client:50 add new client:{atomic,ok}
2017-05-21 13:24:32.873 [info] <0.130.0>@client:init:66 success to create a client
2017-05-21 13:24:32.874 [info] <0.128.0>@tcp_agent:wait_auth:114 success register!
2017-05-21 13:24:32.874 [info] <0.130.0>@client:handle_cast:103 client state: tcp_agent_pid <0.128.0>, client_id 1, client_socket #Port<0.3682>
2017-05-21 13:24:35.207 [info] <0.126.0>@tcp_acceptor:process_Client_Socket:181 this is the socket use to bind:#Port<0.3701>
2017-05-21 13:24:35.207 [info] <0.126.0>@tcp_acceptor:process_Client_Socket:189 success to create tcp_agent and controlling_porcess it
2017-05-21 13:24:35.208 [info] <0.131.0>@tcp_agent:wait_socket:92 the gen_tcp fsm next_state is wait_auth
2017-05-21 13:24:36.852 [info] <0.131.0>@tcp_agent:handle_info:215 ***************** receive request from socket ****************
2017-05-21 13:24:36.852 [info] <0.131.0>@tcp_agent:handle_info:218 #{<<"cmd">> => <<"1">>,<<"password">> => <<"ist">>,<<"username">> => <<"yw">>}
2017-05-21 13:24:36.852 [info] <0.131.0>@tcp_agent:handle_info:226 call wait_auth to handle register
2017-05-21 13:24:36.852 [info] <0.131.0>@tcp_agent:wait_auth:96 {register,"yw","ist"}
2017-05-21 13:24:36.852 [info] <0.131.0>@tcp_agent:wait_auth:98 2
2017-05-21 13:24:36.852 [info] <0.131.0>@mod_mnesia:add_new_client:44 {client,2,"yw","ist",[],[]}
2017-05-21 13:24:36.852 [info] <0.131.0>@mod_mnesia:add_new_client:50 add new client:{atomic,ok}
2017-05-21 13:24:36.853 [info] <0.132.0>@client:init:66 success to create a client
2017-05-21 13:24:36.853 [info] <0.131.0>@tcp_agent:wait_auth:114 success register!
2017-05-21 13:24:36.853 [info] <0.132.0>@client:handle_cast:103 client state: tcp_agent_pid <0.131.0>, client_id 2, client_socket #Port<0.3701>
2017-05-21 13:24:42.588 [info] <0.128.0>@tcp_agent:handle_info:215 ***************** receive request from socket ****************
2017-05-21 13:24:42.588 [info] <0.128.0>@tcp_agent:handle_info:218 #{<<"cmd">> => <<"3">>,<<"data">> => <<"wo xihuan ni">>,<<"id">> => <<"1">>,<<"to_id">> => <<"2">>,<<"to_type">> => <<"1">>}
2017-05-21 13:24:42.588 [info] <0.128.0>@tcp_agent:handle_info:246 call wait_data to handle chat
2017-05-21 13:24:42.588 [info] <0.128.0>@tcp_agent:wait_data:135 chat begin, client send chat
2017-05-21 13:24:42.588 [info] <0.130.0>@client:handle_info:122 send message to other client
2017-05-21 13:24:42.588 [info] <0.130.0>@client:handle_info:129 $$$$$$$$$$$$$$$$$$$$$$$$
2017-05-21 13:24:42.588 [info] <0.130.0>@client:handle_info:149 <0.132.0> {client_receive_client_chat,1,"wo xihuan ni"}
2017-05-21 13:24:42.588 [info] <0.132.0>@client:handle_info:160 receive message from client and send to socket
2017-05-21 13:24:42.588 [info] <0.132.0>@client:handle_info:162 #Port<0.3701>
2017-05-21 13:24:42.588 [info] <0.132.0>@client:handle_info:163 "client 1 said: \nwo xihuan ni"
2017-05-21 13:24:42.588 [info] <0.132.0>@client:handle_info:165 success send message
2017-05-21 13:24:51.764 [info] <0.131.0>@tcp_agent:handle_info:215 ***************** receive request from socket ****************
2017-05-21 13:24:51.764 [info] <0.131.0>@tcp_agent:handle_info:218 #{<<"cmd">> => <<"3">>,<<"data">> => <<"wo ye xihuan ni">>,<<"id">> => <<"2">>,<<"to_id">> => <<"1">>,<<"to_type">> => <<"1">>}
2017-05-21 13:24:51.764 [info] <0.131.0>@tcp_agent:handle_info:246 call wait_data to handle chat
2017-05-21 13:24:51.764 [info] <0.131.0>@tcp_agent:wait_data:135 chat begin, client send chat
2017-05-21 13:24:51.764 [info] <0.132.0>@client:handle_info:122 send message to other client
2017-05-21 13:24:51.764 [info] <0.132.0>@client:handle_info:129 $$$$$$$$$$$$$$$$$$$$$$$$
2017-05-21 13:24:51.764 [info] <0.132.0>@client:handle_info:149 <0.130.0> {client_receive_client_chat,2,"wo ye xihuan ni"}
2017-05-21 13:24:51.764 [info] <0.130.0>@client:handle_info:160 receive message from client and send to socket
2017-05-21 13:24:51.764 [info] <0.130.0>@client:handle_info:162 #Port<0.3682>
2017-05-21 13:24:51.764 [info] <0.130.0>@client:handle_info:163 "client 2 said: \nwo ye xihuan ni"
2017-05-21 13:24:51.764 [info] <0.130.0>@client:handle_info:165 success send message
2017-05-21 13:25:11.628 [info] <0.128.0>@tcp_agent:handle_info:215 ***************** receive request from socket ****************
2017-05-21 13:25:11.628 [info] <0.128.0>@tcp_agent:handle_info:218 #{<<"cmd">> => <<"3">>,<<"data">> => <<"wo ye chaoji chaoji xihuan ni">>,<<"id">> => <<"1">>,<<"to_id">> => <<"2">>,<<"to_type">> => <<"1">>}
2017-05-21 13:25:11.628 [info] <0.128.0>@tcp_agent:handle_info:246 call wait_data to handle chat
2017-05-21 13:25:11.628 [info] <0.128.0>@tcp_agent:wait_data:135 chat begin, client send chat
2017-05-21 13:25:11.628 [info] <0.130.0>@client:handle_info:122 send message to other client
2017-05-21 13:25:11.628 [info] <0.130.0>@client:handle_info:129 $$$$$$$$$$$$$$$$$$$$$$$$
2017-05-21 13:25:11.628 [info] <0.130.0>@client:handle_info:149 <0.132.0> {client_receive_client_chat,1,"wo ye chaoji chaoji xihuan ni"}
2017-05-21 13:25:11.628 [info] <0.132.0>@client:handle_info:160 receive message from client and send to socket
2017-05-21 13:25:11.628 [info] <0.132.0>@client:handle_info:162 #Port<0.3701>
2017-05-21 13:25:11.628 [info] <0.132.0>@client:handle_info:163 "client 1 said: \nwo ye chaoji chaoji xihuan ni"
2017-05-21 13:25:11.628 [info] <0.132.0>@client:handle_info:165 success send message
2017-05-21 13:25:21.068 [info] <0.131.0>@tcp_agent:handle_info:215 ***************** receive request from socket ****************
2017-05-21 13:25:21.068 [info] <0.131.0>@tcp_agent:handle_info:218 #{<<"cmd">> => <<"3">>,<<"data">> => <<"wo ye shi aaaaa">>,<<"id">> => <<"2">>,<<"to_id">> => <<"1">>,<<"to_type">> => <<"1">>}
2017-05-21 13:25:21.068 [info] <0.131.0>@tcp_agent:handle_info:246 call wait_data to handle chat
2017-05-21 13:25:21.068 [info] <0.131.0>@tcp_agent:wait_data:135 chat begin, client send chat
2017-05-21 13:25:21.068 [info] <0.132.0>@client:handle_info:122 send message to other client
2017-05-21 13:25:21.068 [info] <0.132.0>@client:handle_info:129 $$$$$$$$$$$$$$$$$$$$$$$$
2017-05-21 13:25:21.068 [info] <0.132.0>@client:handle_info:149 <0.130.0> {client_receive_client_chat,2,"wo ye shi aaaaa"}
2017-05-21 13:25:21.068 [info] <0.130.0>@client:handle_info:160 receive message from client and send to socket
2017-05-21 13:25:21.068 [info] <0.130.0>@client:handle_info:162 #Port<0.3682>
2017-05-21 13:25:21.068 [info] <0.130.0>@client:handle_info:163 "client 2 said: \nwo ye shi aaaaa"
2017-05-21 13:25:21.068 [info] <0.130.0>@client:handle_info:165 success send message
2017-05-21 13:29:19.029 [info] <0.131.0>@tcp_agent:handle_info:215 ***************** receive request from socket ****************
2017-05-21 13:29:19.029 [info] <0.131.0>@tcp_agent:handle_info:218 #{<<"cmd">> => <<"3">>,<<"data">> => <<"zhende chaojichaoji xihuan ni aaaaa">>,<<"id">> => <<"2">>,<<"to_id">> => <<"1">>,<<"to_type">> => <<"1">>}
2017-05-21 13:29:19.029 [info] <0.131.0>@tcp_agent:handle_info:246 call wait_data to handle chat
2017-05-21 13:29:19.029 [info] <0.131.0>@tcp_agent:wait_data:135 chat begin, client send chat
2017-05-21 13:29:19.029 [info] <0.132.0>@client:handle_info:122 send message to other client
2017-05-21 13:29:19.029 [info] <0.132.0>@client:handle_info:129 $$$$$$$$$$$$$$$$$$$$$$$$
2017-05-21 13:29:19.029 [info] <0.132.0>@client:handle_info:149 <0.130.0> {client_receive_client_chat,2,"zhende chaojichaoji xihuan ni aaaaa"}
2017-05-21 13:29:19.030 [info] <0.130.0>@client:handle_info:160 receive message from client and send to socket
2017-05-21 13:29:19.030 [info] <0.130.0>@client:handle_info:162 #Port<0.3682>
2017-05-21 13:29:19.030 [info] <0.130.0>@client:handle_info:163 "client 2 said: \nzhende chaojichaoji xihuan ni aaaaa"
2017-05-21 13:29:19.030 [info] <0.130.0>@client:handle_info:165 success send message
2017-05-21 17:13:07.848 [info] <0.31.0> Application lager started on node yangwei@brucedeiMac
2017-05-21 17:13:07.848 [info] <0.98.0>@chat_sup:init:26 ###############   Begin  ##############
2017-05-21 17:13:07.945 [info] <0.31.0> Application mnesia started on node yangwei@brucedeiMac
2017-05-21 17:13:07.953 [info] <0.99.0>@mod_control_sup:init:25 load tables:ok 
2017-05-21 17:13:07.953 [info] <0.99.0>@control_sup:init:63 Initialization all resources
2017-05-21 17:13:07.954 [info] <0.121.0>@id_generator:init:30 ########### id_generator
2017-05-21 17:13:07.969 [info] <0.122.0>@group_sup:init:70 [] 
2017-05-21 17:13:07.969 [info] <0.122.0>@group_sup:init:77 [] 
2017-05-21 17:13:07.969 [info] <0.122.0>@group_sup:init:79 ######## group_sup
2017-05-21 17:13:07.976 [info] <0.124.0>@client_sup:init:65 ######## client_sup
2017-05-21 17:13:07.986 [info] <0.31.0> Application chat started on node yangwei@brucedeiMac
2017-05-21 17:25:44.177 [info] <0.126.0>@tcp_acceptor:process_Client_Socket:181 this is the socket use to bind:#Port<0.4418>
2017-05-21 17:25:44.238 [info] <0.126.0>@tcp_acceptor:process_Client_Socket:189 success to create tcp_agent and controlling_porcess it
2017-05-21 17:25:44.238 [info] <0.160.0>@tcp_agent:wait_socket:92 the gen_tcp fsm next_state is wait_auth
2017-05-21 17:26:16.396 [info] <0.31.0> Application lager started on node yangwei@brucedeiMac
2017-05-21 17:26:16.396 [info] <0.98.0>@chat_sup:init:26 ###############   Begin  ##############
2017-05-21 17:26:16.485 [info] <0.31.0> Application mnesia started on node yangwei@brucedeiMac
2017-05-21 17:26:16.493 [info] <0.99.0>@mod_control_sup:init:25 load tables:ok 
2017-05-21 17:26:16.493 [info] <0.99.0>@control_sup:init:63 Initialization all resources
2017-05-21 17:26:16.494 [info] <0.121.0>@id_generator:init:30 ########### id_generator
2017-05-21 17:26:16.516 [info] <0.122.0>@group_sup:init:70 [] 
2017-05-21 17:26:16.516 [info] <0.122.0>@group_sup:init:77 [] 
2017-05-21 17:26:16.516 [info] <0.122.0>@group_sup:init:79 ######## group_sup
2017-05-21 17:26:16.523 [info] <0.124.0>@client_sup:init:65 ######## client_sup
2017-05-21 17:26:16.533 [info] <0.31.0> Application chat started on node yangwei@brucedeiMac
2017-05-21 17:26:27.992 [info] <0.126.0>@tcp_acceptor:process_Client_Socket:181 this is the socket use to bind:#Port<0.3682>
2017-05-21 17:26:27.994 [info] <0.126.0>@tcp_acceptor:process_Client_Socket:189 success to create tcp_agent and controlling_porcess it
2017-05-21 17:26:27.995 [info] <0.128.0>@tcp_agent:wait_socket:92 the gen_tcp fsm next_state is wait_auth
2017-05-21 17:26:31.076 [info] <0.128.0>@tcp_agent:handle_info:215 ***************** receive request from socket ****************
2017-05-21 17:26:31.127 [info] <0.128.0>@tcp_agent:handle_info:218 #{<<"cmd">> => <<"1">>,<<"password">> => <<"iyw">>,<<"username">> => <<"zst">>}
2017-05-21 17:26:31.127 [info] <0.128.0>@tcp_agent:handle_info:226 call wait_auth to handle register
2017-05-21 17:26:31.127 [info] <0.128.0>@tcp_agent:wait_auth:96 {register,"zst","iyw"}
2017-05-21 17:26:31.128 [info] <0.128.0>@tcp_agent:wait_auth:98 1
2017-05-21 17:26:31.128 [info] <0.128.0>@mod_mnesia:add_new_client:44 {client,1,"zst","iyw",[],[]}
2017-05-21 17:26:31.128 [info] <0.128.0>@mod_mnesia:add_new_client:50 add new client:{atomic,ok}
2017-05-21 17:26:31.151 [info] <0.130.0>@client:init:66 success to create a client
2017-05-21 17:26:31.151 [info] <0.128.0>@tcp_agent:wait_auth:114 success register!
2017-05-21 17:26:31.151 [info] <0.130.0>@client:handle_cast:103 client state: tcp_agent_pid <0.128.0>, client_id 1, client_socket #Port<0.3682>
2017-05-21 17:26:48.209 [info] <0.126.0>@tcp_acceptor:process_Client_Socket:181 this is the socket use to bind:#Port<0.3701>
2017-05-21 17:26:48.209 [info] <0.131.0>@tcp_agent:wait_socket:92 the gen_tcp fsm next_state is wait_auth
2017-05-21 17:26:48.209 [info] <0.126.0>@tcp_acceptor:process_Client_Socket:189 success to create tcp_agent and controlling_porcess it
2017-05-21 17:26:51.268 [info] <0.131.0>@tcp_agent:handle_info:215 ***************** receive request from socket ****************
2017-05-21 17:26:51.268 [info] <0.131.0>@tcp_agent:handle_info:218 #{<<"cmd">> => <<"1">>,<<"password">> => <<"ist">>,<<"username">> => <<"yw">>}
2017-05-21 17:26:51.268 [info] <0.131.0>@tcp_agent:handle_info:226 call wait_auth to handle register
2017-05-21 17:26:51.268 [info] <0.131.0>@tcp_agent:wait_auth:96 {register,"yw","ist"}
2017-05-21 17:26:51.268 [info] <0.131.0>@tcp_agent:wait_auth:98 2
2017-05-21 17:26:51.268 [info] <0.131.0>@mod_mnesia:add_new_client:44 {client,2,"yw","ist",[],[]}
2017-05-21 17:26:51.269 [info] <0.131.0>@mod_mnesia:add_new_client:50 add new client:{atomic,ok}
2017-05-21 17:26:51.269 [info] <0.132.0>@client:init:66 success to create a client
2017-05-21 17:26:51.269 [info] <0.131.0>@tcp_agent:wait_auth:114 success register!
2017-05-21 17:26:51.269 [info] <0.132.0>@client:handle_cast:103 client state: tcp_agent_pid <0.131.0>, client_id 2, client_socket #Port<0.3701>
2017-05-21 17:26:55.652 [info] <0.128.0>@tcp_agent:handle_info:215 ***************** receive request from socket ****************
2017-05-21 17:26:55.652 [info] <0.128.0>@tcp_agent:handle_info:218 #{<<"cmd">> => <<"3">>,<<"data">> => <<"wo xihuan ni">>,<<"id">> => <<"1">>,<<"to_id">> => <<"2">>,<<"to_type">> => <<"1">>}
2017-05-21 17:26:55.652 [info] <0.128.0>@tcp_agent:handle_info:246 call wait_data to handle chat
2017-05-21 17:26:55.652 [info] <0.128.0>@tcp_agent:wait_data:135 chat begin, client send chat
2017-05-21 17:26:55.652 [info] <0.130.0>@client:handle_info:122 send message to other client
2017-05-21 17:26:55.652 [info] <0.130.0>@client:handle_info:129 $$$$$$$$$$$$$$$$$$$$$$$$
2017-05-21 17:26:55.652 [info] <0.130.0>@client:handle_info:149 <0.132.0> {client_receive_client_chat,1,"wo xihuan ni"}
2017-05-21 17:26:55.652 [info] <0.132.0>@client:handle_info:160 receive message from client and send to socket
2017-05-21 17:26:55.652 [info] <0.132.0>@client:handle_info:162 #Port<0.3701>
2017-05-21 17:26:55.652 [info] <0.132.0>@client:handle_info:163 "client 1 said: \nwo xihuan ni"
2017-05-21 17:26:55.652 [info] <0.132.0>@client:handle_info:165 success send message
2017-05-21 17:30:10.887 [info] <0.31.0> Application lager started on node yangwei@brucedeiMac
2017-05-21 17:30:10.887 [info] <0.98.0>@chat_sup:init:26 ###############   Begin  ##############
2017-05-21 17:30:11.009 [info] <0.31.0> Application mnesia started on node yangwei@brucedeiMac
2017-05-21 17:30:11.017 [info] <0.99.0>@mod_control_sup:init:25 load tables:ok 
2017-05-21 17:30:11.017 [info] <0.99.0>@control_sup:init:63 Initialization all resources
2017-05-21 17:30:11.018 [info] <0.121.0>@id_generator:init:30 ########### id_generator
2017-05-21 17:30:11.035 [info] <0.122.0>@group_sup:init:70 [] 
2017-05-21 17:30:11.036 [info] <0.122.0>@group_sup:init:77 [] 
2017-05-21 17:30:11.036 [info] <0.122.0>@group_sup:init:79 ######## group_sup
2017-05-21 17:30:11.042 [info] <0.124.0>@client_sup:init:65 ######## client_sup
2017-05-21 17:30:11.044 [info] <0.31.0> Application chat started on node yangwei@brucedeiMac
2017-05-21 17:30:21.974 [info] <0.126.0>@tcp_acceptor:process_Client_Socket:181 this is the socket use to bind:#Port<0.3682>
2017-05-21 17:30:22.002 [info] <0.126.0>@tcp_acceptor:process_Client_Socket:189 success to create tcp_agent and controlling_porcess it
2017-05-21 17:30:22.002 [info] <0.128.0>@tcp_agent:wait_socket:92 the gen_tcp fsm next_state is wait_auth
2017-05-21 17:30:35.088 [info] <0.126.0>@tcp_acceptor:process_Client_Socket:181 this is the socket use to bind:#Port<0.3693>
2017-05-21 17:30:35.088 [info] <0.126.0>@tcp_acceptor:process_Client_Socket:189 success to create tcp_agent and controlling_porcess it
2017-05-21 17:30:35.088 [info] <0.129.0>@tcp_agent:wait_socket:92 the gen_tcp fsm next_state is wait_auth
2017-05-21 17:30:39.004 [info] <0.128.0>@tcp_agent:handle_info:215 ***************** receive request from socket ****************
2017-05-21 17:30:39.019 [info] <0.128.0>@tcp_agent:handle_info:218 #{<<"cmd">> => <<"1">>,<<"password">> => <<"iyw">>,<<"username">> => <<"zst">>}
2017-05-21 17:30:39.019 [info] <0.128.0>@tcp_agent:handle_info:226 call wait_auth to handle register
2017-05-21 17:30:39.019 [info] <0.128.0>@tcp_agent:wait_auth:96 {register,"zst","iyw"}
2017-05-21 17:30:39.020 [info] <0.128.0>@tcp_agent:wait_auth:98 1
2017-05-21 17:30:39.020 [info] <0.128.0>@mod_mnesia:add_new_client:44 {client,1,"zst","iyw",[],[]}
2017-05-21 17:30:39.020 [info] <0.128.0>@mod_mnesia:add_new_client:50 add new client:{atomic,ok}
2017-05-21 17:30:39.036 [info] <0.131.0>@client:init:66 success to create a client
2017-05-21 17:30:39.036 [info] <0.128.0>@tcp_agent:wait_auth:114 success register!
2017-05-21 17:30:39.037 [info] <0.131.0>@client:handle_cast:103 client state: tcp_agent_pid <0.128.0>, client_id 1, client_socket #Port<0.3682>
2017-05-21 17:33:02.391 [info] <0.98.0>@chat_sup:init:26 ###############   Begin  ##############
2017-05-21 17:33:02.391 [info] <0.31.0> Application lager started on node yangwei@brucedeiMac
2017-05-21 17:33:02.484 [info] <0.31.0> Application mnesia started on node yangwei@brucedeiMac
2017-05-21 17:33:02.491 [info] <0.99.0>@mod_control_sup:init:25 load tables:ok 
2017-05-21 17:33:02.491 [info] <0.99.0>@control_sup:init:63 Initialization all resources
2017-05-21 17:33:02.492 [info] <0.121.0>@id_generator:init:30 ########### id_generator
2017-05-21 17:33:02.507 [info] <0.122.0>@group_sup:init:70 [] 
2017-05-21 17:33:02.507 [info] <0.122.0>@group_sup:init:77 [] 
2017-05-21 17:33:02.507 [info] <0.122.0>@group_sup:init:79 ######## group_sup
2017-05-21 17:33:02.513 [info] <0.124.0>@client_sup:init:65 ######## client_sup
2017-05-21 17:33:02.523 [info] <0.31.0> Application chat started on node yangwei@brucedeiMac
2017-05-21 17:33:18.282 [info] <0.126.0>@tcp_acceptor:process_Client_Socket:181 this is the socket use to bind:#Port<0.3682>
2017-05-21 17:33:18.307 [info] <0.126.0>@tcp_acceptor:process_Client_Socket:189 success to create tcp_agent and controlling_porcess it
2017-05-21 17:33:18.307 [info] <0.128.0>@tcp_agent:wait_socket:92 the gen_tcp fsm next_state is wait_auth
2017-05-21 17:33:22.300 [info] <0.128.0>@tcp_agent:handle_info:215 ***************** receive request from socket ****************
2017-05-21 17:33:22.313 [info] <0.128.0>@tcp_agent:handle_info:218 #{<<"cmd">> => <<"1">>,<<"password">> => <<"iyw">>,<<"username">> => <<"zst">>}
2017-05-21 17:33:22.313 [info] <0.128.0>@tcp_agent:handle_info:226 call wait_auth to handle register
2017-05-21 17:33:22.313 [info] <0.128.0>@tcp_agent:wait_auth:96 {register,"zst","iyw"}
2017-05-21 17:33:22.314 [info] <0.128.0>@tcp_agent:wait_auth:98 1
2017-05-21 17:33:22.314 [info] <0.128.0>@mod_mnesia:add_new_client:44 {client,1,"zst","iyw",[],[]}
2017-05-21 17:33:22.314 [info] <0.128.0>@mod_mnesia:add_new_client:50 add new client:{atomic,ok}
2017-05-21 17:33:22.330 [info] <0.130.0>@client:init:66 success to create a client
2017-05-21 17:33:22.330 [info] <0.128.0>@tcp_agent:wait_auth:114 success register!
2017-05-21 17:33:22.330 [info] <0.130.0>@client:handle_cast:103 client state: tcp_agent_pid <0.128.0>, client_id 1, client_socket #Port<0.3682>
2017-05-21 17:33:25.546 [info] <0.126.0>@tcp_acceptor:process_Client_Socket:181 this is the socket use to bind:#Port<0.3701>
2017-05-21 17:33:25.546 [info] <0.126.0>@tcp_acceptor:process_Client_Socket:189 success to create tcp_agent and controlling_porcess it
2017-05-21 17:33:25.547 [info] <0.131.0>@tcp_agent:wait_socket:92 the gen_tcp fsm next_state is wait_auth
2017-05-21 17:33:27.348 [info] <0.131.0>@tcp_agent:handle_info:215 ***************** receive request from socket ****************
2017-05-21 17:33:27.348 [info] <0.131.0>@tcp_agent:handle_info:218 #{<<"cmd">> => <<"1">>,<<"password">> => <<"ist">>,<<"username">> => <<"yw">>}
2017-05-21 17:33:27.348 [info] <0.131.0>@tcp_agent:handle_info:226 call wait_auth to handle register
2017-05-21 17:33:27.348 [info] <0.131.0>@tcp_agent:wait_auth:96 {register,"yw","ist"}
2017-05-21 17:33:27.348 [info] <0.131.0>@tcp_agent:wait_auth:98 2
2017-05-21 17:33:27.348 [info] <0.131.0>@mod_mnesia:add_new_client:44 {client,2,"yw","ist",[],[]}
2017-05-21 17:33:27.348 [info] <0.131.0>@mod_mnesia:add_new_client:50 add new client:{atomic,ok}
2017-05-21 17:33:27.348 [info] <0.132.0>@client:init:66 success to create a client
2017-05-21 17:33:27.348 [info] <0.131.0>@tcp_agent:wait_auth:114 success register!
2017-05-21 17:33:27.348 [info] <0.132.0>@client:handle_cast:103 client state: tcp_agent_pid <0.131.0>, client_id 2, client_socket #Port<0.3701>
2017-05-21 17:33:37.484 [info] <0.128.0>@tcp_agent:handle_info:215 ***************** receive request from socket ****************
2017-05-21 17:33:37.484 [info] <0.128.0>@tcp_agent:handle_info:218 #{<<"cmd">> => <<"3">>,<<"data">> => <<"wo xihuan ni">>,<<"id">> => <<"1">>,<<"to_id">> => <<"2">>,<<"to_type">> => <<"1">>}
2017-05-21 17:33:37.484 [info] <0.128.0>@tcp_agent:handle_info:246 call wait_data to handle chat
2017-05-21 17:33:37.484 [info] <0.128.0>@tcp_agent:wait_data:135 chat begin, client send chat
2017-05-21 17:33:37.484 [info] <0.130.0>@client:handle_info:122 send message to other client
2017-05-21 17:33:37.484 [info] <0.130.0>@client:handle_info:129 $$$$$$$$$$$$$$$$$$$$$$$$
2017-05-21 17:33:37.484 [info] <0.130.0>@client:handle_info:149 <0.132.0> {client_receive_client_chat,1,"wo xihuan ni"}
2017-05-21 17:33:37.484 [info] <0.132.0>@client:handle_info:160 receive message from client and send to socket
2017-05-21 17:33:37.484 [info] <0.132.0>@client:handle_info:162 #Port<0.3701>
2017-05-21 17:33:37.484 [info] <0.132.0>@client:handle_info:163 "client 1 said: \nwo xihuan ni"
2017-05-21 17:33:37.484 [info] <0.132.0>@client:handle_info:165 success send message
2017-05-21 17:34:53.373 [info] <0.31.0> Application lager started on node yangwei@brucedeiMac
2017-05-21 17:34:53.373 [info] <0.98.0>@chat_sup:init:26 ###############   Begin  ##############
2017-05-21 17:34:53.468 [info] <0.31.0> Application mnesia started on node yangwei@brucedeiMac
2017-05-21 17:34:53.476 [info] <0.99.0>@mod_control_sup:init:25 load tables:ok 
2017-05-21 17:34:53.476 [info] <0.99.0>@control_sup:init:63 Initialization all resources
2017-05-21 17:34:53.477 [info] <0.121.0>@id_generator:init:30 ########### id_generator
2017-05-21 17:34:53.499 [info] <0.122.0>@group_sup:init:70 [] 
2017-05-21 17:34:53.499 [info] <0.122.0>@group_sup:init:77 [] 
2017-05-21 17:34:53.499 [info] <0.122.0>@group_sup:init:79 ######## group_sup
2017-05-21 17:34:53.506 [info] <0.124.0>@client_sup:init:65 ######## client_sup
2017-05-21 17:34:53.516 [info] <0.31.0> Application chat started on node yangwei@brucedeiMac
2017-05-21 17:35:03.594 [info] <0.126.0>@tcp_acceptor:process_Client_Socket:181 this is the socket use to bind:#Port<0.3682>
2017-05-21 17:35:03.622 [info] <0.126.0>@tcp_acceptor:process_Client_Socket:189 success to create tcp_agent and controlling_porcess it
2017-05-21 17:35:03.622 [info] <0.128.0>@tcp_agent:wait_socket:92 the gen_tcp fsm next_state is wait_auth
2017-05-21 17:35:23.824 [info] <0.126.0>@tcp_acceptor:process_Client_Socket:181 this is the socket use to bind:#Port<0.3693>
2017-05-21 17:35:23.824 [info] <0.126.0>@tcp_acceptor:process_Client_Socket:189 success to create tcp_agent and controlling_porcess it
2017-05-21 17:35:23.824 [info] <0.129.0>@tcp_agent:wait_socket:92 the gen_tcp fsm next_state is wait_auth
2017-05-21 17:35:26.868 [info] <0.128.0>@tcp_agent:handle_info:215 ***************** receive request from socket ****************
2017-05-21 17:35:26.884 [info] <0.128.0>@tcp_agent:handle_info:218 #{<<"cmd">> => <<"1">>,<<"password">> => <<"iyw">>,<<"username">> => <<"zst">>}
2017-05-21 17:35:26.884 [info] <0.128.0>@tcp_agent:handle_info:226 call wait_auth to handle register
2017-05-21 17:35:26.884 [info] <0.128.0>@tcp_agent:wait_auth:96 {register,"zst","iyw"}
2017-05-21 17:35:26.884 [info] <0.128.0>@tcp_agent:wait_auth:98 1
2017-05-21 17:35:26.884 [info] <0.128.0>@mod_mnesia:add_new_client:44 {client,1,"zst","iyw",[],[]}
2017-05-21 17:35:26.884 [info] <0.128.0>@mod_mnesia:add_new_client:50 add new client:{atomic,ok}
2017-05-21 17:35:26.901 [info] <0.131.0>@client:init:66 success to create a client
2017-05-21 17:35:26.901 [info] <0.128.0>@tcp_agent:wait_auth:114 success register!
2017-05-21 17:35:26.902 [info] <0.131.0>@client:handle_cast:103 client state: tcp_agent_pid <0.128.0>, client_id 1, client_socket #Port<0.3682>
2017-05-21 17:35:30.676 [info] <0.129.0>@tcp_agent:handle_info:215 ***************** receive request from socket ****************
2017-05-21 17:35:30.676 [info] <0.129.0>@tcp_agent:handle_info:218 #{<<"cmd">> => <<"1">>,<<"password">> => <<"ist">>,<<"username">> => <<"yw">>}
2017-05-21 17:35:30.676 [info] <0.129.0>@tcp_agent:handle_info:226 call wait_auth to handle register
2017-05-21 17:35:30.676 [info] <0.129.0>@tcp_agent:wait_auth:96 {register,"yw","ist"}
2017-05-21 17:35:30.676 [info] <0.129.0>@tcp_agent:wait_auth:98 2
2017-05-21 17:35:30.676 [info] <0.129.0>@mod_mnesia:add_new_client:44 {client,2,"yw","ist",[],[]}
2017-05-21 17:35:30.676 [info] <0.129.0>@mod_mnesia:add_new_client:50 add new client:{atomic,ok}
2017-05-21 17:35:30.676 [info] <0.132.0>@client:init:66 success to create a client
2017-05-21 17:35:30.676 [info] <0.129.0>@tcp_agent:wait_auth:114 success register!
2017-05-21 17:35:30.677 [info] <0.132.0>@client:handle_cast:103 client state: tcp_agent_pid <0.129.0>, client_id 2, client_socket #Port<0.3693>
2017-05-21 17:35:45.148 [info] <0.128.0>@tcp_agent:handle_info:215 ***************** receive request from socket ****************
2017-05-21 17:35:45.148 [info] <0.128.0>@tcp_agent:handle_info:218 #{<<"cmd">> => <<"3">>,<<"data">> => <<"hello!">>,<<"id">> => <<"1">>,<<"to_id">> => <<"2">>,<<"to_type">> => <<"1">>}
2017-05-21 17:35:45.148 [info] <0.128.0>@tcp_agent:handle_info:246 call wait_data to handle chat
2017-05-21 17:35:45.148 [info] <0.128.0>@tcp_agent:wait_data:135 chat begin, client send chat
2017-05-21 17:35:45.148 [info] <0.131.0>@client:handle_info:122 send message to other client
2017-05-21 17:35:45.148 [info] <0.131.0>@client:handle_info:129 $$$$$$$$$$$$$$$$$$$$$$$$
2017-05-21 17:35:45.148 [info] <0.131.0>@client:handle_info:149 <0.132.0> {client_receive_client_chat,1,"hello!"}
2017-05-21 17:35:45.148 [info] <0.132.0>@client:handle_info:160 receive message from client and send to socket
2017-05-21 17:35:45.148 [info] <0.132.0>@client:handle_info:162 #Port<0.3693>
2017-05-21 17:35:45.148 [info] <0.132.0>@client:handle_info:163 "client 1 said: \nhello!"
2017-05-21 17:35:45.148 [info] <0.132.0>@client:handle_info:165 success send message
2017-05-21 17:36:08.228 [info] <0.129.0>@tcp_agent:handle_info:215 ***************** receive request from socket ****************
2017-05-21 17:36:08.228 [info] <0.129.0>@tcp_agent:handle_info:218 #{<<"cmd">> => <<"3">>,<<"data">> => <<"ni hao ya">>,<<"id">> => <<"2">>,<<"to_id">> => <<"1">>,<<"to_type">> => <<"1">>}
2017-05-21 17:36:08.228 [info] <0.129.0>@tcp_agent:handle_info:246 call wait_data to handle chat
2017-05-21 17:36:08.228 [info] <0.129.0>@tcp_agent:wait_data:135 chat begin, client send chat
2017-05-21 17:36:08.228 [info] <0.132.0>@client:handle_info:122 send message to other client
2017-05-21 17:36:08.228 [info] <0.132.0>@client:handle_info:129 $$$$$$$$$$$$$$$$$$$$$$$$
2017-05-21 17:36:08.228 [info] <0.132.0>@client:handle_info:149 <0.131.0> {client_receive_client_chat,2,"ni hao ya"}
2017-05-21 17:36:08.228 [info] <0.131.0>@client:handle_info:160 receive message from client and send to socket
2017-05-21 17:36:08.228 [info] <0.131.0>@client:handle_info:162 #Port<0.3682>
2017-05-21 17:36:08.228 [info] <0.131.0>@client:handle_info:163 "client 2 said: \nni hao ya"
2017-05-21 17:36:08.228 [info] <0.131.0>@client:handle_info:165 success send message
2017-05-22 11:26:21.487 [info] <0.31.0> Application lager started on node yangwei@brucedeiMac
2017-05-22 11:26:21.487 [info] <0.98.0>@chat_sup:init:26 ###############   Begin  ##############
2017-05-22 11:26:21.597 [info] <0.31.0> Application mnesia started on node yangwei@brucedeiMac
2017-05-22 11:26:21.604 [info] <0.99.0>@mod_mnesia:add_client:48 {client,1,"zst","iyw",[2],[1],[]}
2017-05-22 11:26:21.604 [info] <0.99.0>@mod_mnesia:add_client:54 add new client:{atomic,ok}
2017-05-22 11:26:21.604 [info] <0.99.0>@mod_mnesia:add_client:48 {client,2,"yw","ist",[1],[1],[]}
2017-05-22 11:26:21.604 [info] <0.99.0>@mod_mnesia:add_client:54 add new client:{atomic,ok}
2017-05-22 11:26:21.604 [info] <0.99.0>@mod_control_sup:init:26 load tables:ok 
2017-05-22 11:26:21.604 [info] <0.99.0>@control_sup:init:63 Initialization all resources
2017-05-22 11:26:21.605 [info] <0.121.0>@id_generator:init:31 ########### id_generator
2017-05-22 11:26:21.636 [info] <0.122.0>@group_sup:init:70 [] 
2017-05-22 11:26:21.636 [info] <0.122.0>@group_sup:init:77 [] 
2017-05-22 11:26:21.636 [info] <0.122.0>@group_sup:init:79 ######## group_sup
2017-05-22 11:26:21.653 [info] <0.124.0>@client_sup:init:65 ######## client_sup
2017-05-22 11:26:21.655 [info] <0.31.0> Application chat started on node yangwei@brucedeiMac
2017-05-22 11:26:57.761 [info] <0.126.0>@tcp_acceptor:process_Client_Socket:181 this is the socket use to bind:#Port<0.3682>
2017-05-22 11:26:57.783 [info] <0.126.0>@tcp_acceptor:process_Client_Socket:189 success to create tcp_agent and controlling_porcess it
2017-05-22 11:26:57.783 [info] <0.128.0>@tcp_agent:wait_socket:92 the gen_tcp fsm next_state is wait_auth
2017-05-22 11:27:26.640 [info] <0.126.0>@tcp_acceptor:process_Client_Socket:181 this is the socket use to bind:#Port<0.3693>
2017-05-22 11:27:26.640 [info] <0.126.0>@tcp_acceptor:process_Client_Socket:189 success to create tcp_agent and controlling_porcess it
2017-05-22 11:27:26.640 [info] <0.129.0>@tcp_agent:wait_socket:92 the gen_tcp fsm next_state is wait_auth
2017-05-22 11:27:30.210 [info] <0.128.0>@tcp_agent:handle_info:227 ***************** receive request from socket ****************
2017-05-22 11:27:30.300 [info] <0.128.0>@tcp_agent:handle_info:230 #{<<"cmd">> => <<"2">>,<<"password">> => <<"iyw">>}
2017-05-22 11:27:30.300 [info] <0.128.0>@tcp_agent:handle_info:278 error {badkey,<<"id">>}
2017-05-22 11:27:30.300 [info] <0.128.0>@tcp_agent:terminate:312 call suervisor to terminate_child: {error,not_found}
2017-05-22 11:27:30.300 [info] <0.128.0>@tcp_agent:terminate:313 tcp_agent process is termianted
2017-05-22 11:27:30.300 [error] <0.128.0> gen_fsm <0.128.0> in state wait_auth terminated with reason: bad return value: ok
2017-05-22 11:27:30.415 [error] <0.128.0> CRASH REPORT Process <0.128.0> with 0 neighbours exited with reason: bad return value: ok in gen_fsm:terminate/7 line 559
2017-05-22 11:27:30.415 [error] <0.125.0> Supervisor tcp_agent_sup had child #Port<0.3682> started with {tcp_agent,start_link,undefined} at <0.128.0> exit with reason bad return value: ok in context child_terminated
2017-05-22 11:29:12.112 [info] <0.129.0>@tcp_agent:handle_info:286 tcp closed, stateName: wait_auth
2017-05-22 11:29:12.112 [info] <0.129.0>@tcp_agent:terminate:312 call suervisor to terminate_child: {error,not_found}
2017-05-22 11:29:12.112 [info] <0.129.0>@tcp_agent:terminate:313 tcp_agent process is termianted
2017-05-22 11:30:42.424 [info] <0.126.0>@tcp_acceptor:process_Client_Socket:181 this is the socket use to bind:#Port<0.3706>
2017-05-22 11:30:42.424 [info] <0.126.0>@tcp_acceptor:process_Client_Socket:189 success to create tcp_agent and controlling_porcess it
2017-05-22 11:30:42.424 [info] <0.132.0>@tcp_agent:wait_socket:92 the gen_tcp fsm next_state is wait_auth
2017-05-22 11:30:54.117 [info] <0.132.0>@tcp_agent:handle_info:227 ***************** receive request from socket ****************
2017-05-22 11:30:54.117 [info] <0.132.0>@tcp_agent:handle_info:230 #{<<"cmd">> => <<"2">>,<<"id">> => <<"1">>,<<"password">> => <<"iyw">>}
2017-05-22 11:30:54.117 [info] <0.132.0>@tcp_agent:handle_info:246 call wait_auth to handle login
2017-05-22 11:30:54.118 [info] <0.132.0>@tcp_agent:handle_info:278 error {badrecord,client}
2017-05-22 11:30:54.118 [info] <0.132.0>@tcp_agent:terminate:312 call suervisor to terminate_child: {error,not_found}
2017-05-22 11:30:54.118 [info] <0.132.0>@tcp_agent:terminate:313 tcp_agent process is termianted
2017-05-22 11:30:54.118 [error] <0.132.0> gen_fsm <0.132.0> in state wait_auth terminated with reason: bad return value: ok
2017-05-22 11:30:54.118 [error] <0.132.0> CRASH REPORT Process <0.132.0> with 0 neighbours exited with reason: bad return value: ok in gen_fsm:terminate/7 line 559
2017-05-22 11:30:54.118 [error] <0.125.0> Supervisor tcp_agent_sup had child #Port<0.3706> started with {tcp_agent,start_link,undefined} at <0.132.0> exit with reason bad return value: ok in context child_terminated
2017-05-22 11:31:33.616 [info] <0.126.0>@tcp_acceptor:process_Client_Socket:181 this is the socket use to bind:#Port<0.3707>
2017-05-22 11:31:33.616 [info] <0.126.0>@tcp_acceptor:process_Client_Socket:189 success to create tcp_agent and controlling_porcess it
2017-05-22 11:31:33.616 [info] <0.134.0>@tcp_agent:wait_socket:92 the gen_tcp fsm next_state is wait_auth
2017-05-22 11:31:35.576 [info] <0.134.0>@tcp_agent:handle_info:227 ***************** receive request from socket ****************
2017-05-22 11:31:35.576 [info] <0.134.0>@tcp_agent:handle_info:230 #{<<"cmd">> => <<"2">>,<<"id">> => <<"1">>,<<"password">> => <<"iyw">>}
2017-05-22 11:31:35.576 [info] <0.134.0>@tcp_agent:handle_info:246 call wait_auth to handle login
2017-05-22 11:31:35.576 [info] <0.134.0>@tcp_agent:handle_info:278 error {badrecord,client}
2017-05-22 11:31:35.576 [info] <0.134.0>@tcp_agent:terminate:312 call suervisor to terminate_child: {error,not_found}
2017-05-22 11:31:35.576 [info] <0.134.0>@tcp_agent:terminate:313 tcp_agent process is termianted
2017-05-22 11:31:35.576 [error] <0.134.0> gen_fsm <0.134.0> in state wait_auth terminated with reason: bad return value: ok
2017-05-22 11:31:35.576 [error] <0.134.0> CRASH REPORT Process <0.134.0> with 0 neighbours exited with reason: bad return value: ok in gen_fsm:terminate/7 line 559
2017-05-22 11:31:35.577 [error] <0.125.0> Supervisor tcp_agent_sup had child #Port<0.3707> started with {tcp_agent,start_link,undefined} at <0.134.0> exit with reason bad return value: ok in context child_terminated
2017-05-22 11:31:52.308 [info] <0.31.0> Application lager started on node yangwei@brucedeiMac
2017-05-22 11:31:52.308 [info] <0.98.0>@chat_sup:init:26 ###############   Begin  ##############
2017-05-22 11:31:52.363 [info] <0.31.0> Application mnesia started on node yangwei@brucedeiMac
2017-05-22 11:31:52.374 [info] <0.99.0>@mod_mnesia:add_client:48 {client,1,"zst","iyw",[2],[1],[]}
2017-05-22 11:31:52.374 [info] <0.99.0>@mod_mnesia:add_client:54 add new client:{atomic,ok}
2017-05-22 11:31:52.374 [info] <0.99.0>@mod_mnesia:add_client:48 {client,2,"yw","ist",[1],[1],[]}
2017-05-22 11:31:52.374 [info] <0.99.0>@mod_mnesia:add_client:54 add new client:{atomic,ok}
2017-05-22 11:31:52.374 [info] <0.99.0>@mod_control_sup:init:26 load tables:ok 
2017-05-22 11:31:52.374 [info] <0.99.0>@control_sup:init:63 Initialization all resources
2017-05-22 11:31:52.375 [info] <0.121.0>@id_generator:init:31 ########### id_generator
2017-05-22 11:31:52.380 [info] <0.122.0>@group_sup:init:70 [] 
2017-05-22 11:31:52.380 [info] <0.122.0>@group_sup:init:77 [] 
2017-05-22 11:31:52.380 [info] <0.122.0>@group_sup:init:79 ######## group_sup
2017-05-22 11:31:52.380 [info] <0.124.0>@client_sup:init:65 ######## client_sup
2017-05-22 11:31:52.382 [info] <0.31.0> Application chat started on node yangwei@brucedeiMac
2017-05-22 11:31:59.144 [info] <0.126.0>@tcp_acceptor:process_Client_Socket:181 this is the socket use to bind:#Port<0.3682>
2017-05-22 11:31:59.147 [info] <0.126.0>@tcp_acceptor:process_Client_Socket:189 success to create tcp_agent and controlling_porcess it
2017-05-22 11:31:59.147 [info] <0.128.0>@tcp_agent:wait_socket:92 the gen_tcp fsm next_state is wait_auth
2017-05-22 11:32:02.285 [info] <0.128.0>@tcp_agent:handle_info:227 ***************** receive request from socket ****************
2017-05-22 11:32:02.289 [info] <0.128.0>@tcp_agent:handle_info:230 #{<<"cmd">> => <<"2">>,<<"id">> => <<"1">>,<<"password">> => <<"iyw">>}
2017-05-22 11:32:02.289 [info] <0.128.0>@tcp_agent:handle_info:246 call wait_auth to handle login
2017-05-22 11:32:02.332 [info] <0.131.0>@client:init:66 success to create a client
2017-05-22 11:35:04.348 [info] <0.31.0> Application lager started on node yangwei@brucedeiMac
2017-05-22 11:35:04.348 [info] <0.98.0>@chat_sup:init:26 ###############   Begin  ##############
2017-05-22 11:35:04.403 [info] <0.31.0> Application mnesia started on node yangwei@brucedeiMac
2017-05-22 11:35:04.410 [info] <0.99.0>@mod_mnesia:add_client:48 {client,1,"zst","iyw",[2],[1],[]}
2017-05-22 11:35:04.410 [info] <0.99.0>@mod_mnesia:add_client:54 add new client:{atomic,ok}
2017-05-22 11:35:04.410 [info] <0.99.0>@mod_mnesia:add_client:48 {client,2,"yw","ist",[1],[1],[]}
2017-05-22 11:35:04.410 [info] <0.99.0>@mod_mnesia:add_client:54 add new client:{atomic,ok}
2017-05-22 11:35:04.410 [info] <0.99.0>@mod_control_sup:init:26 load tables:ok 
2017-05-22 11:35:04.410 [info] <0.99.0>@control_sup:init:63 Initialization all resources
2017-05-22 11:35:04.411 [info] <0.121.0>@id_generator:init:31 ########### id_generator
2017-05-22 11:35:04.416 [info] <0.122.0>@group_sup:init:70 [] 
2017-05-22 11:35:04.416 [info] <0.122.0>@group_sup:init:77 [] 
2017-05-22 11:35:04.416 [info] <0.122.0>@group_sup:init:79 ######## group_sup
2017-05-22 11:35:04.417 [info] <0.124.0>@client_sup:init:65 ######## client_sup
2017-05-22 11:35:04.418 [info] <0.31.0> Application chat started on node yangwei@brucedeiMac
2017-05-22 11:35:12.024 [info] <0.126.0>@tcp_acceptor:process_Client_Socket:181 this is the socket use to bind:#Port<0.3682>
2017-05-22 11:35:12.027 [info] <0.126.0>@tcp_acceptor:process_Client_Socket:189 success to create tcp_agent and controlling_porcess it
2017-05-22 11:35:12.027 [info] <0.128.0>@tcp_agent:wait_socket:92 the gen_tcp fsm next_state is wait_auth
2017-05-22 11:35:13.501 [info] <0.128.0>@tcp_agent:handle_info:228 ***************** receive request from socket ****************
2017-05-22 11:35:13.505 [info] <0.128.0>@tcp_agent:handle_info:231 #{<<"cmd">> => <<"2">>,<<"id">> => <<"1">>,<<"password">> => <<"iyw">>}
2017-05-22 11:35:13.505 [info] <0.128.0>@tcp_agent:handle_info:247 call wait_auth to handle login
2017-05-22 11:35:13.507 [info] <0.131.0>@client:init:66 success to create a client
2017-05-22 11:35:13.507 [info] <0.128.0>@tcp_agent:wait_auth:127 
2017-05-22 11:35:32.714 [info] <0.126.0>@tcp_acceptor:process_Client_Socket:181 this is the socket use to bind:#Port<0.3701>
2017-05-22 11:35:32.714 [info] <0.126.0>@tcp_acceptor:process_Client_Socket:189 success to create tcp_agent and controlling_porcess it
2017-05-22 11:35:32.714 [info] <0.132.0>@tcp_agent:wait_socket:92 the gen_tcp fsm next_state is wait_auth
2017-05-22 11:35:34.056 [info] <0.132.0>@tcp_agent:handle_info:228 ***************** receive request from socket ****************
2017-05-22 11:35:34.056 [info] <0.132.0>@tcp_agent:handle_info:231 #{<<"cmd">> => <<"2">>,<<"id">> => <<"2">>,<<"password">> => <<"ist">>}
2017-05-22 11:35:34.056 [info] <0.132.0>@tcp_agent:handle_info:247 call wait_auth to handle login
2017-05-22 11:35:34.057 [info] <0.134.0>@client:init:66 success to create a client
2017-05-22 11:35:34.057 [info] <0.132.0>@tcp_agent:wait_auth:127 
2017-05-22 11:36:37.071 [info] <0.128.0>@tcp_agent:handle_info:228 ***************** receive request from socket ****************
2017-05-22 11:36:37.071 [info] <0.128.0>@tcp_agent:handle_info:231 #{<<"cmd">> => <<"3">>,<<"data">> => <<"wo xihuan ni">>,<<"id">> => <<"1">>,<<"to_id">> => <<"2">>,<<"to_type">> => <<"1">>}
2017-05-22 11:36:37.071 [info] <0.128.0>@tcp_agent:handle_info:261 call wait_data to handle chat
2017-05-22 11:36:37.071 [info] <0.128.0>@tcp_agent:wait_data:137 chat begin, client send chat
2017-05-22 11:36:37.071 [info] <0.131.0>@client:handle_info:192 send message to other client
2017-05-22 11:36:37.071 [info] <0.131.0>@client:handle_info:205 [{2,<0.134.0>}]
2017-05-22 11:36:37.071 [info] <0.131.0>@client:handle_info:222 error []
2017-05-22 11:36:55.792 [info] <0.132.0>@tcp_agent:handle_info:228 ***************** receive request from socket ****************
2017-05-22 11:36:55.792 [info] <0.132.0>@tcp_agent:handle_info:231 #{<<"cmd">> => <<"3">>,<<"data">> => <<"wo xihuan ni">>,<<"id">> => <<"2">>,<<"to_id">> => <<"1">>,<<"to_type">> => <<"1">>}
2017-05-22 11:36:55.792 [info] <0.132.0>@tcp_agent:handle_info:261 call wait_data to handle chat
2017-05-22 11:36:55.792 [info] <0.132.0>@tcp_agent:wait_data:137 chat begin, client send chat
2017-05-22 11:36:55.792 [info] <0.134.0>@client:handle_info:192 send message to other client
2017-05-22 11:36:55.792 [info] <0.134.0>@client:handle_info:205 [{1,<0.131.0>}]
2017-05-22 11:36:55.792 [info] <0.134.0>@client:handle_info:222 error []
2017-05-22 11:42:39.017 [info] <0.31.0> Application lager started on node yangwei@brucedeiMac
2017-05-22 11:42:39.017 [info] <0.98.0>@chat_sup:init:26 ###############   Begin  ##############
2017-05-22 11:42:39.072 [info] <0.31.0> Application mnesia started on node yangwei@brucedeiMac
2017-05-22 11:42:39.079 [info] <0.99.0>@mod_mnesia:add_client:48 {client,1,"zst","iyw",[2],[1],[]}
2017-05-22 11:42:39.079 [info] <0.99.0>@mod_mnesia:add_client:54 add new client:{atomic,ok}
2017-05-22 11:42:39.079 [info] <0.99.0>@mod_mnesia:add_client:48 {client,2,"yw","ist",[1],[1],[]}
2017-05-22 11:42:39.079 [info] <0.99.0>@mod_mnesia:add_client:54 add new client:{atomic,ok}
2017-05-22 11:42:39.079 [info] <0.99.0>@mod_control_sup:init:26 load tables:ok 
2017-05-22 11:42:39.079 [info] <0.99.0>@control_sup:init:63 Initialization all resources
2017-05-22 11:42:39.080 [info] <0.121.0>@id_generator:init:31 ########### id_generator
2017-05-22 11:42:39.085 [info] <0.122.0>@group_sup:init:70 [] 
2017-05-22 11:42:39.085 [info] <0.122.0>@group_sup:init:77 [] 
2017-05-22 11:42:39.085 [info] <0.122.0>@group_sup:init:79 ######## group_sup
2017-05-22 11:42:39.086 [info] <0.124.0>@client_sup:init:65 ######## client_sup
2017-05-22 11:42:39.087 [info] <0.31.0> Application chat started on node yangwei@brucedeiMac
2017-05-22 11:42:47.749 [info] <0.126.0>@tcp_acceptor:process_Client_Socket:181 this is the socket use to bind:#Port<0.3682>
2017-05-22 11:42:47.751 [info] <0.126.0>@tcp_acceptor:process_Client_Socket:189 success to create tcp_agent and controlling_porcess it
2017-05-22 11:42:47.752 [info] <0.128.0>@tcp_agent:wait_socket:92 the gen_tcp fsm next_state is wait_auth
2017-05-22 11:42:49.422 [info] <0.128.0>@tcp_agent:handle_info:228 ***************** receive request from socket ****************
2017-05-22 11:42:49.435 [info] <0.128.0>@tcp_agent:handle_info:231 #{<<"cmd">> => <<"2">>,<<"id">> => <<"1">>,<<"password">> => <<"iyw">>}
2017-05-22 11:42:49.435 [info] <0.128.0>@tcp_agent:handle_info:247 call wait_auth to handle login
2017-05-22 11:42:49.437 [info] <0.131.0>@client:init:66 success to create a client
2017-05-22 11:42:49.437 [info] <0.128.0>@tcp_agent:wait_auth:127 success login
2017-05-22 11:43:03.189 [info] <0.126.0>@tcp_acceptor:process_Client_Socket:181 this is the socket use to bind:#Port<0.3701>
2017-05-22 11:43:03.190 [info] <0.126.0>@tcp_acceptor:process_Client_Socket:189 success to create tcp_agent and controlling_porcess it
2017-05-22 11:43:03.190 [info] <0.132.0>@tcp_agent:wait_socket:92 the gen_tcp fsm next_state is wait_auth
2017-05-22 11:43:05.421 [info] <0.132.0>@tcp_agent:handle_info:228 ***************** receive request from socket ****************
2017-05-22 11:43:05.421 [info] <0.132.0>@tcp_agent:handle_info:231 #{<<"cmd">> => <<"2">>,<<"id">> => <<"2">>,<<"password">> => <<"ist">>}
2017-05-22 11:43:05.421 [info] <0.132.0>@tcp_agent:handle_info:247 call wait_auth to handle login
2017-05-22 11:43:05.421 [info] <0.134.0>@client:init:66 success to create a client
2017-05-22 11:43:05.421 [info] <0.132.0>@tcp_agent:wait_auth:127 success login
2017-05-22 11:44:07.507 [info] <0.31.0> Application lager started on node yangwei@brucedeiMac
2017-05-22 11:44:07.507 [info] <0.98.0>@chat_sup:init:26 ###############   Begin  ##############
2017-05-22 11:44:07.561 [info] <0.31.0> Application mnesia started on node yangwei@brucedeiMac
2017-05-22 11:44:07.568 [info] <0.99.0>@mod_mnesia:add_client:48 {client,1,"zst","iyw",[2],[1],[]}
2017-05-22 11:44:07.568 [info] <0.99.0>@mod_mnesia:add_client:54 add new client:{atomic,ok}
2017-05-22 11:44:07.568 [info] <0.99.0>@mod_mnesia:add_client:48 {client,2,"yw","ist",[1],[1],[]}
2017-05-22 11:44:07.568 [info] <0.99.0>@mod_mnesia:add_client:54 add new client:{atomic,ok}
2017-05-22 11:44:07.568 [info] <0.99.0>@mod_control_sup:init:26 load tables:ok 
2017-05-22 11:44:07.568 [info] <0.99.0>@control_sup:init:63 Initialization all resources
2017-05-22 11:44:07.569 [info] <0.121.0>@id_generator:init:31 ########### id_generator
2017-05-22 11:44:07.574 [info] <0.122.0>@group_sup:init:70 [] 
2017-05-22 11:44:07.574 [info] <0.122.0>@group_sup:init:77 [] 
2017-05-22 11:44:07.574 [info] <0.122.0>@group_sup:init:79 ######## group_sup
2017-05-22 11:44:07.575 [info] <0.124.0>@client_sup:init:65 ######## client_sup
2017-05-22 11:44:07.576 [info] <0.31.0> Application chat started on node yangwei@brucedeiMac
2017-05-22 11:44:11.129 [info] <0.126.0>@tcp_acceptor:process_Client_Socket:181 this is the socket use to bind:#Port<0.3682>
2017-05-22 11:44:11.132 [info] <0.126.0>@tcp_acceptor:process_Client_Socket:189 success to create tcp_agent and controlling_porcess it
2017-05-22 11:44:11.132 [info] <0.128.0>@tcp_agent:wait_socket:92 the gen_tcp fsm next_state is wait_auth
2017-05-22 11:44:13.022 [info] <0.126.0>@tcp_acceptor:process_Client_Socket:181 this is the socket use to bind:#Port<0.3693>
2017-05-22 11:44:13.023 [info] <0.126.0>@tcp_acceptor:process_Client_Socket:189 success to create tcp_agent and controlling_porcess it
2017-05-22 11:44:13.023 [info] <0.129.0>@tcp_agent:wait_socket:92 the gen_tcp fsm next_state is wait_auth
2017-05-22 11:44:17.481 [info] <0.128.0>@tcp_agent:handle_info:228 ***************** receive request from socket ****************
2017-05-22 11:44:17.527 [info] <0.128.0>@tcp_agent:handle_info:231 #{<<"cmd">> => <<"2">>,<<"id">> => <<"1">>,<<"password">> => <<"iyw">>}
2017-05-22 11:44:17.527 [info] <0.128.0>@tcp_agent:handle_info:247 call wait_auth to handle login
2017-05-22 11:44:17.528 [info] <0.132.0>@client:init:66 success to create a client
2017-05-22 11:44:17.529 [info] <0.128.0>@tcp_agent:wait_auth:127 success login
2017-05-22 11:44:20.991 [info] <0.129.0>@tcp_agent:handle_info:228 ***************** receive request from socket ****************
2017-05-22 11:44:20.991 [info] <0.129.0>@tcp_agent:handle_info:231 #{<<"cmd">> => <<"2">>,<<"id">> => <<"2">>,<<"password">> => <<"ist">>}
2017-05-22 11:44:20.991 [info] <0.129.0>@tcp_agent:handle_info:247 call wait_auth to handle login
2017-05-22 11:44:20.992 [info] <0.134.0>@client:init:66 success to create a client
2017-05-22 11:44:20.992 [info] <0.129.0>@tcp_agent:wait_auth:127 success login
2017-05-22 11:44:48.883 [info] <0.31.0> Application lager started on node yangwei@brucedeiMac
2017-05-22 11:44:48.883 [info] <0.98.0>@chat_sup:init:26 ###############   Begin  ##############
2017-05-22 11:44:48.936 [info] <0.31.0> Application mnesia started on node yangwei@brucedeiMac
2017-05-22 11:44:48.943 [info] <0.99.0>@mod_mnesia:add_client:48 {client,1,"zst","iyw",[2],[1],[]}
2017-05-22 11:44:48.943 [info] <0.99.0>@mod_mnesia:add_client:54 add new client:{atomic,ok}
2017-05-22 11:44:48.943 [info] <0.99.0>@mod_mnesia:add_client:48 {client,2,"yw","ist",[1],[1],[]}
2017-05-22 11:44:48.943 [info] <0.99.0>@mod_mnesia:add_client:54 add new client:{atomic,ok}
2017-05-22 11:44:48.943 [info] <0.99.0>@mod_control_sup:init:26 load tables:ok 
2017-05-22 11:44:48.943 [info] <0.99.0>@control_sup:init:63 Initialization all resources
2017-05-22 11:44:48.944 [info] <0.121.0>@id_generator:init:31 ########### id_generator
2017-05-22 11:44:48.949 [info] <0.122.0>@group_sup:init:70 [] 
2017-05-22 11:44:48.949 [info] <0.122.0>@group_sup:init:77 [] 
2017-05-22 11:44:48.949 [info] <0.122.0>@group_sup:init:79 ######## group_sup
2017-05-22 11:44:48.950 [info] <0.124.0>@client_sup:init:65 ######## client_sup
2017-05-22 11:44:48.951 [info] <0.31.0> Application chat started on node yangwei@brucedeiMac
2017-05-22 11:44:54.752 [info] <0.126.0>@tcp_acceptor:process_Client_Socket:181 this is the socket use to bind:#Port<0.3682>
2017-05-22 11:44:54.755 [info] <0.126.0>@tcp_acceptor:process_Client_Socket:189 success to create tcp_agent and controlling_porcess it
2017-05-22 11:44:54.755 [info] <0.128.0>@tcp_agent:wait_socket:92 the gen_tcp fsm next_state is wait_auth
2017-05-22 11:45:00.218 [info] <0.126.0>@tcp_acceptor:process_Client_Socket:181 this is the socket use to bind:#Port<0.3693>
2017-05-22 11:45:00.218 [info] <0.126.0>@tcp_acceptor:process_Client_Socket:189 success to create tcp_agent and controlling_porcess it
2017-05-22 11:45:00.218 [info] <0.129.0>@tcp_agent:wait_socket:92 the gen_tcp fsm next_state is wait_auth
2017-05-22 11:45:05.083 [info] <0.128.0>@tcp_agent:handle_info:228 ***************** receive request from socket ****************
2017-05-22 11:45:05.128 [info] <0.128.0>@tcp_agent:handle_info:231 #{<<"cmd">> => <<"2">>,<<"id">> => <<"1">>,<<"password">> => <<"iyw">>}
2017-05-22 11:45:05.128 [info] <0.128.0>@tcp_agent:handle_info:247 call wait_auth to handle login
2017-05-22 11:45:05.130 [info] <0.132.0>@client:init:66 success to create a client
2017-05-22 11:45:05.131 [info] <0.128.0>@tcp_agent:wait_auth:127 success login
2017-05-22 11:45:07.929 [info] <0.129.0>@tcp_agent:handle_info:228 ***************** receive request from socket ****************
2017-05-22 11:45:07.929 [info] <0.129.0>@tcp_agent:handle_info:231 #{<<"cmd">> => <<"2">>,<<"id">> => <<"2">>,<<"password">> => <<"ist">>}
2017-05-22 11:45:07.929 [info] <0.129.0>@tcp_agent:handle_info:247 call wait_auth to handle login
2017-05-22 11:45:07.929 [info] <0.134.0>@client:init:66 success to create a client
2017-05-22 11:45:07.930 [info] <0.129.0>@tcp_agent:wait_auth:127 success login
2017-05-22 11:45:19.303 [info] <0.128.0>@tcp_agent:handle_info:228 ***************** receive request from socket ****************
2017-05-22 11:45:19.303 [info] <0.128.0>@tcp_agent:handle_info:231 #{<<"cmd">> => <<"3">>,<<"data">> => <<"wo xihuan ni">>,<<"id">> => <<"1">>,<<"to_id">> => <<"2">>,<<"to_type">> => <<"1">>}
2017-05-22 11:45:19.303 [info] <0.128.0>@tcp_agent:handle_info:261 call wait_data to handle chat
2017-05-22 11:45:19.303 [info] <0.128.0>@tcp_agent:wait_data:137 chat begin, client send chat
2017-05-22 11:45:19.303 [info] <0.132.0>@client:handle_info:192 send message to other client
2017-05-22 11:45:19.304 [info] <0.132.0>@client:handle_info:205 [{2,<0.134.0>}]
2017-05-22 11:45:19.304 [info] <0.132.0>@client:handle_info:222 error []
2017-05-22 11:47:28.081 [info] <0.31.0> Application lager started on node yangwei@brucedeiMac
2017-05-22 11:47:28.081 [info] <0.163.0>@chat_sup:init:26 ###############   Begin  ##############
2017-05-22 11:47:28.204 [info] <0.31.0> Application mnesia started on node yangwei@brucedeiMac
2017-05-22 11:47:28.212 [info] <0.164.0>@mod_mnesia:add_client:48 {client,1,"zst","iyw",[2],[1],[]}
2017-05-22 11:47:28.212 [info] <0.164.0>@mod_mnesia:add_client:54 add new client:{atomic,ok}
2017-05-22 11:47:28.212 [info] <0.164.0>@mod_mnesia:add_client:48 {client,2,"yw","ist",[1],[1],[]}
2017-05-22 11:47:28.212 [info] <0.164.0>@mod_mnesia:add_client:54 add new client:{atomic,ok}
2017-05-22 11:47:28.212 [info] <0.164.0>@mod_control_sup:init:26 load tables:ok 
2017-05-22 11:47:28.212 [info] <0.164.0>@control_sup:init:63 Initialization all resources
2017-05-22 11:47:28.213 [info] <0.187.0>@id_generator:init:31 ########### id_generator
2017-05-22 11:47:28.260 [info] <0.188.0>@group_sup:init:70 [] 
2017-05-22 11:47:28.260 [info] <0.188.0>@group_sup:init:77 [] 
2017-05-22 11:47:28.260 [info] <0.188.0>@group_sup:init:79 ######## group_sup
2017-05-22 11:47:28.269 [info] <0.190.0>@client_sup:init:65 ######## client_sup
2017-05-22 11:47:28.280 [info] <0.31.0> Application chat started on node yangwei@brucedeiMac
2017-05-22 11:47:42.913 [info] <0.192.0>@tcp_acceptor:process_Client_Socket:181 this is the socket use to bind:#Port<0.4428>
2017-05-22 11:47:42.941 [info] <0.192.0>@tcp_acceptor:process_Client_Socket:189 success to create tcp_agent and controlling_porcess it
2017-05-22 11:47:42.941 [info] <0.210.0>@tcp_agent:wait_socket:92 the gen_tcp fsm next_state is wait_auth
2017-05-22 11:47:45.480 [info] <0.192.0>@tcp_acceptor:process_Client_Socket:181 this is the socket use to bind:#Port<0.4439>
2017-05-22 11:47:45.480 [info] <0.192.0>@tcp_acceptor:process_Client_Socket:189 success to create tcp_agent and controlling_porcess it
2017-05-22 11:47:45.480 [info] <0.215.0>@tcp_agent:wait_socket:92 the gen_tcp fsm next_state is wait_auth
2017-05-22 11:47:47.924 [info] <0.210.0>@tcp_agent:handle_info:228 ***************** receive request from socket ****************
2017-05-22 11:47:48.017 [info] <0.210.0>@tcp_agent:handle_info:231 #{<<"cmd">> => <<"2">>,<<"id">> => <<"1">>,<<"password">> => <<"iyw">>}
2017-05-22 11:47:48.017 [info] <0.210.0>@tcp_agent:handle_info:247 call wait_auth to handle login
2017-05-22 11:47:48.039 [info] <0.221.0>@client:init:66 success to create a client
2017-05-22 11:47:48.039 [info] <0.210.0>@tcp_agent:wait_auth:127 success login
2017-05-22 11:47:50.118 [info] <0.215.0>@tcp_agent:handle_info:228 ***************** receive request from socket ****************
2017-05-22 11:47:50.119 [info] <0.215.0>@tcp_agent:handle_info:231 #{<<"cmd">> => <<"2">>,<<"id">> => <<"2">>,<<"password">> => <<"ist">>}
2017-05-22 11:47:50.119 [info] <0.215.0>@tcp_agent:handle_info:247 call wait_auth to handle login
2017-05-22 11:47:50.119 [info] <0.226.0>@client:init:66 success to create a client
2017-05-22 11:47:50.119 [info] <0.215.0>@tcp_agent:wait_auth:127 success login
2017-05-22 11:47:56.497 [info] <0.210.0>@tcp_agent:handle_info:228 ***************** receive request from socket ****************
2017-05-22 11:47:56.498 [info] <0.210.0>@tcp_agent:handle_info:231 #{<<"cmd">> => <<"3">>,<<"data">> => <<"wo xihuan ni">>,<<"id">> => <<"1">>,<<"to_id">> => <<"2">>,<<"to_type">> => <<"1">>}
2017-05-22 11:47:56.498 [info] <0.210.0>@tcp_agent:handle_info:261 call wait_data to handle chat
2017-05-22 11:47:56.498 [info] <0.210.0>@tcp_agent:wait_data:137 chat begin, client send chat
2017-05-22 11:47:56.498 [info] <0.221.0>@client:handle_info:192 send message to other client
2017-05-22 11:47:56.498 [info] <0.221.0>@client:handle_info:201 [[2]] false
2017-05-22 11:47:56.498 [info] <0.221.0>@client:handle_info:206 [{2,<0.226.0>}]
2017-05-22 11:47:56.498 [info] <0.221.0>@client:handle_info:223 error []
2017-05-22 11:49:01.229 [info] <0.31.0> Application lager started on node yangwei@brucedeiMac
2017-05-22 11:49:01.229 [info] <0.98.0>@chat_sup:init:26 ###############   Begin  ##############
2017-05-22 11:49:01.282 [info] <0.31.0> Application mnesia started on node yangwei@brucedeiMac
2017-05-22 11:49:01.289 [info] <0.99.0>@mod_mnesia:add_client:48 {client,1,"zst","iyw",[2],[1],[]}
2017-05-22 11:49:01.289 [info] <0.99.0>@mod_mnesia:add_client:54 add new client:{atomic,ok}
2017-05-22 11:49:01.289 [info] <0.99.0>@mod_mnesia:add_client:48 {client,2,"yw","ist",[1],[1],[]}
2017-05-22 11:49:01.289 [info] <0.99.0>@mod_mnesia:add_client:54 add new client:{atomic,ok}
2017-05-22 11:49:01.289 [info] <0.99.0>@mod_control_sup:init:26 load tables:ok 
2017-05-22 11:49:01.289 [info] <0.99.0>@control_sup:init:63 Initialization all resources
2017-05-22 11:49:01.290 [info] <0.121.0>@id_generator:init:31 ########### id_generator
2017-05-22 11:49:01.295 [info] <0.122.0>@group_sup:init:70 [] 
2017-05-22 11:49:01.295 [info] <0.122.0>@group_sup:init:77 [] 
2017-05-22 11:49:01.295 [info] <0.122.0>@group_sup:init:79 ######## group_sup
2017-05-22 11:49:01.296 [info] <0.124.0>@client_sup:init:65 ######## client_sup
2017-05-22 11:49:01.298 [info] <0.31.0> Application chat started on node yangwei@brucedeiMac
2017-05-22 11:49:04.303 [info] <0.126.0>@tcp_acceptor:process_Client_Socket:181 this is the socket use to bind:#Port<0.3682>
2017-05-22 11:49:04.306 [info] <0.126.0>@tcp_acceptor:process_Client_Socket:189 success to create tcp_agent and controlling_porcess it
2017-05-22 11:49:04.306 [info] <0.128.0>@tcp_agent:wait_socket:92 the gen_tcp fsm next_state is wait_auth
2017-05-22 11:49:06.417 [info] <0.126.0>@tcp_acceptor:process_Client_Socket:181 this is the socket use to bind:#Port<0.3693>
2017-05-22 11:49:06.417 [info] <0.126.0>@tcp_acceptor:process_Client_Socket:189 success to create tcp_agent and controlling_porcess it
2017-05-22 11:49:06.417 [info] <0.129.0>@tcp_agent:wait_socket:92 the gen_tcp fsm next_state is wait_auth
2017-05-22 11:49:09.143 [info] <0.128.0>@tcp_agent:handle_info:228 ***************** receive request from socket ****************
2017-05-22 11:49:09.147 [info] <0.128.0>@tcp_agent:handle_info:231 #{<<"cmd">> => <<"2">>,<<"id">> => <<"1">>,<<"password">> => <<"iyw">>}
2017-05-22 11:49:09.147 [info] <0.128.0>@tcp_agent:handle_info:247 call wait_auth to handle login
2017-05-22 11:49:09.149 [info] <0.132.0>@client:init:66 success to create a client
2017-05-22 11:49:09.149 [info] <0.128.0>@tcp_agent:wait_auth:127 success login
2017-05-22 11:49:11.854 [info] <0.129.0>@tcp_agent:handle_info:228 ***************** receive request from socket ****************
2017-05-22 11:49:11.854 [info] <0.129.0>@tcp_agent:handle_info:231 #{<<"cmd">> => <<"2">>,<<"id">> => <<"2">>,<<"password">> => <<"ist">>}
2017-05-22 11:49:11.854 [info] <0.129.0>@tcp_agent:handle_info:247 call wait_auth to handle login
2017-05-22 11:49:11.855 [info] <0.134.0>@client:init:66 success to create a client
2017-05-22 11:49:11.855 [info] <0.129.0>@tcp_agent:wait_auth:127 success login
2017-05-22 11:49:32.089 [info] <0.31.0> Application lager started on node yangwei@brucedeiMac
2017-05-22 11:49:32.089 [info] <0.98.0>@chat_sup:init:26 ###############   Begin  ##############
2017-05-22 11:49:32.143 [info] <0.31.0> Application mnesia started on node yangwei@brucedeiMac
2017-05-22 11:49:32.150 [info] <0.99.0>@mod_mnesia:add_client:48 {client,1,"zst","iyw",[2],[1],[]}
2017-05-22 11:49:32.150 [info] <0.99.0>@mod_mnesia:add_client:54 add new client:{atomic,ok}
2017-05-22 11:49:32.150 [info] <0.99.0>@mod_mnesia:add_client:48 {client,2,"yw","ist",[1],[1],[]}
2017-05-22 11:49:32.150 [info] <0.99.0>@mod_mnesia:add_client:54 add new client:{atomic,ok}
2017-05-22 11:49:32.150 [info] <0.99.0>@mod_control_sup:init:26 load tables:ok 
2017-05-22 11:49:32.150 [info] <0.99.0>@control_sup:init:63 Initialization all resources
2017-05-22 11:49:32.151 [info] <0.121.0>@id_generator:init:31 ########### id_generator
2017-05-22 11:49:32.158 [info] <0.122.0>@group_sup:init:70 [] 
2017-05-22 11:49:32.158 [info] <0.122.0>@group_sup:init:77 [] 
2017-05-22 11:49:32.158 [info] <0.122.0>@group_sup:init:79 ######## group_sup
2017-05-22 11:49:32.159 [info] <0.124.0>@client_sup:init:65 ######## client_sup
2017-05-22 11:49:32.160 [info] <0.31.0> Application chat started on node yangwei@brucedeiMac
2017-05-22 11:49:35.444 [info] <0.126.0>@tcp_acceptor:process_Client_Socket:181 this is the socket use to bind:#Port<0.3682>
2017-05-22 11:49:35.447 [info] <0.126.0>@tcp_acceptor:process_Client_Socket:189 success to create tcp_agent and controlling_porcess it
2017-05-22 11:49:35.447 [info] <0.128.0>@tcp_agent:wait_socket:92 the gen_tcp fsm next_state is wait_auth
2017-05-22 11:49:38.964 [info] <0.126.0>@tcp_acceptor:process_Client_Socket:181 this is the socket use to bind:#Port<0.3693>
2017-05-22 11:49:38.964 [info] <0.126.0>@tcp_acceptor:process_Client_Socket:189 success to create tcp_agent and controlling_porcess it
2017-05-22 11:49:38.964 [info] <0.129.0>@tcp_agent:wait_socket:92 the gen_tcp fsm next_state is wait_auth
2017-05-22 11:49:42.625 [info] <0.128.0>@tcp_agent:handle_info:228 ***************** receive request from socket ****************
2017-05-22 11:49:42.629 [info] <0.128.0>@tcp_agent:handle_info:231 #{<<"cmd">> => <<"2">>,<<"id">> => <<"1">>,<<"password">> => <<"iyw">>}
2017-05-22 11:49:42.629 [info] <0.128.0>@tcp_agent:handle_info:247 call wait_auth to handle login
2017-05-22 11:49:42.631 [info] <0.132.0>@client:init:66 success to create a client
2017-05-22 11:49:42.631 [info] <0.128.0>@tcp_agent:wait_auth:127 success login
2017-05-22 11:49:44.166 [info] <0.129.0>@tcp_agent:handle_info:228 ***************** receive request from socket ****************
2017-05-22 11:49:44.166 [info] <0.129.0>@tcp_agent:handle_info:231 #{<<"cmd">> => <<"2">>,<<"id">> => <<"2">>,<<"password">> => <<"ist">>}
2017-05-22 11:49:44.166 [info] <0.129.0>@tcp_agent:handle_info:247 call wait_auth to handle login
2017-05-22 11:49:44.167 [info] <0.134.0>@client:init:66 success to create a client
2017-05-22 11:49:44.167 [info] <0.129.0>@tcp_agent:wait_auth:127 success login
2017-05-22 11:49:49.724 [info] <0.128.0>@tcp_agent:handle_info:228 ***************** receive request from socket ****************
2017-05-22 11:49:49.724 [info] <0.128.0>@tcp_agent:handle_info:231 #{<<"cmd">> => <<"3">>,<<"data">> => <<"wo xihuan ni">>,<<"id">> => <<"1">>,<<"to_id">> => <<"2">>,<<"to_type">> => <<"1">>}
2017-05-22 11:49:49.724 [info] <0.128.0>@tcp_agent:handle_info:261 call wait_data to handle chat
2017-05-22 11:49:49.724 [info] <0.128.0>@tcp_agent:wait_data:137 chat begin, client send chat
2017-05-22 11:49:49.724 [info] <0.132.0>@client:handle_info:192 send message to other client
2017-05-22 11:49:49.724 [info] <0.132.0>@client:handle_info:201 [2] true
2017-05-22 11:49:49.724 [info] <0.132.0>@client:handle_info:223 <0.134.0> {client_receive_client_chat,1,"wo xihuan ni"}
2017-05-22 11:49:49.725 [info] <0.134.0>@client:handle_info:234 receive message from client and send to socket
2017-05-22 11:49:49.725 [info] <0.134.0>@client:handle_info:236 undefined
2017-05-22 11:49:49.725 [info] <0.134.0>@client:handle_info:237 "client 1 said: \nwo xihuan ni"
2017-05-22 11:49:49.725 [info] <0.134.0>@client:terminate:262 {function_clause,[{gen_tcp,send,[undefined,"client 1 said: \nwo xihuan ni"],[{file,"gen_tcp.erl"},{line,265}]},{client,handle_info,2,[{file,"src/logic/client.erl"},{line,238}]},{gen_server,try_dispatch,4,[{file,"gen_server.erl"},{line,601}]},{gen_server,handle_msg,5,[{file,"gen_server.erl"},{line,667}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,247}]}]}
2017-05-22 11:49:49.725 [error] <0.134.0> gen_server <0.134.0> terminated with reason: no function clause matching gen_tcp:send(undefined, "client 1 said: \nwo xihuan ni") line 265
2017-05-22 11:49:49.778 [error] <0.134.0> CRASH REPORT Process <0.134.0> with 0 neighbours exited with reason: no function clause matching gen_tcp:send(undefined, "client 1 said: \nwo xihuan ni") line 265 in gen_server:terminate/7 line 812
2017-05-22 11:49:49.778 [error] <0.124.0> Supervisor client_sup had child 2 started with {client,start_link,undefined} at <0.134.0> exit with reason no function clause matching gen_tcp:send(undefined, "client 1 said: \nwo xihuan ni") line 265 in context child_terminated
2017-05-22 11:52:33.889 [info] <0.31.0> Application lager started on node yangwei@brucedeiMac
2017-05-22 11:52:33.889 [info] <0.98.0>@chat_sup:init:26 ###############   Begin  ##############
2017-05-22 11:52:33.944 [info] <0.31.0> Application mnesia started on node yangwei@brucedeiMac
2017-05-22 11:52:33.951 [info] <0.99.0>@mod_mnesia:add_client:48 {client,1,"zst","iyw",[2],[1],[]}
2017-05-22 11:52:33.951 [info] <0.99.0>@mod_mnesia:add_client:54 add new client:{atomic,ok}
2017-05-22 11:52:33.951 [info] <0.99.0>@mod_mnesia:add_client:48 {client,2,"yw","ist",[1],[1],[]}
2017-05-22 11:52:33.951 [info] <0.99.0>@mod_mnesia:add_client:54 add new client:{atomic,ok}
2017-05-22 11:52:33.951 [info] <0.99.0>@mod_control_sup:init:26 load tables:ok 
2017-05-22 11:52:33.951 [info] <0.99.0>@control_sup:init:63 Initialization all resources
2017-05-22 11:52:33.952 [info] <0.121.0>@id_generator:init:31 ########### id_generator
2017-05-22 11:52:33.957 [info] <0.122.0>@group_sup:init:70 [] 
2017-05-22 11:52:33.957 [info] <0.122.0>@group_sup:init:77 [] 
2017-05-22 11:52:33.957 [info] <0.122.0>@group_sup:init:79 ######## group_sup
2017-05-22 11:52:33.958 [info] <0.124.0>@client_sup:init:65 ######## client_sup
2017-05-22 11:52:33.959 [info] <0.31.0> Application chat started on node yangwei@brucedeiMac
2017-05-22 11:52:36.904 [info] <0.126.0>@tcp_acceptor:process_Client_Socket:181 this is the socket use to bind:#Port<0.3682>
2017-05-22 11:52:36.907 [info] <0.126.0>@tcp_acceptor:process_Client_Socket:189 success to create tcp_agent and controlling_porcess it
2017-05-22 11:52:36.907 [info] <0.128.0>@tcp_agent:wait_socket:92 the gen_tcp fsm next_state is wait_auth
2017-05-22 11:52:46.029 [info] <0.126.0>@tcp_acceptor:process_Client_Socket:181 this is the socket use to bind:#Port<0.3693>
2017-05-22 11:52:46.029 [info] <0.126.0>@tcp_acceptor:process_Client_Socket:189 success to create tcp_agent and controlling_porcess it
2017-05-22 11:52:46.029 [info] <0.129.0>@tcp_agent:wait_socket:92 the gen_tcp fsm next_state is wait_auth
2017-05-22 11:52:49.251 [info] <0.128.0>@tcp_agent:handle_info:229 ***************** receive request from socket ****************
2017-05-22 11:52:49.265 [info] <0.128.0>@tcp_agent:handle_info:232 #{<<"cmd">> => <<"2">>,<<"id">> => <<"1">>,<<"password">> => <<"iyw">>}
2017-05-22 11:52:49.265 [info] <0.128.0>@tcp_agent:handle_info:248 call wait_auth to handle login
2017-05-22 11:52:49.267 [info] <0.132.0>@client:init:66 success to create a client
2017-05-22 11:52:49.267 [info] <0.128.0>@tcp_agent:wait_auth:128 success login
2017-05-22 11:52:49.267 [info] <0.132.0>@client:handle_cast:140 client state: tcp_agent_pid <0.128.0>, client_id 1, client_socket #Port<0.3682>
2017-05-22 11:52:51.703 [info] <0.129.0>@tcp_agent:handle_info:229 ***************** receive request from socket ****************
2017-05-22 11:52:51.703 [info] <0.129.0>@tcp_agent:handle_info:232 #{<<"cmd">> => <<"2">>,<<"id">> => <<"2">>,<<"password">> => <<"ist">>}
2017-05-22 11:52:51.703 [info] <0.129.0>@tcp_agent:handle_info:248 call wait_auth to handle login
2017-05-22 11:52:51.704 [info] <0.134.0>@client:init:66 success to create a client
2017-05-22 11:52:51.704 [info] <0.129.0>@tcp_agent:wait_auth:128 success login
2017-05-22 11:52:51.704 [info] <0.134.0>@client:handle_cast:140 client state: tcp_agent_pid <0.129.0>, client_id 2, client_socket #Port<0.3693>
2017-05-22 11:52:58.926 [info] <0.128.0>@tcp_agent:handle_info:229 ***************** receive request from socket ****************
2017-05-22 11:52:58.926 [info] <0.128.0>@tcp_agent:handle_info:232 #{<<"cmd">> => <<"3">>,<<"data">> => <<"wo xihuan ni">>,<<"id">> => <<"1">>,<<"to_id">> => <<"2">>,<<"to_type">> => <<"1">>}
2017-05-22 11:52:58.926 [info] <0.128.0>@tcp_agent:handle_info:262 call wait_data to handle chat
2017-05-22 11:52:58.926 [info] <0.128.0>@tcp_agent:wait_data:138 chat begin, client send chat
2017-05-22 11:52:58.926 [info] <0.132.0>@client:handle_info:192 send message to other client
2017-05-22 11:52:58.926 [info] <0.132.0>@client:handle_info:201 [2] true
2017-05-22 11:52:58.927 [info] <0.132.0>@client:handle_info:223 <0.134.0> {client_receive_client_chat,1,"wo xihuan ni"}
2017-05-22 11:52:58.927 [info] <0.134.0>@client:handle_info:234 receive message from client and send to socket
2017-05-22 11:52:58.927 [info] <0.134.0>@client:handle_info:236 #Port<0.3693>
2017-05-22 11:52:58.927 [info] <0.134.0>@client:handle_info:237 "client 1 said: \nwo xihuan ni"
2017-05-22 11:52:58.927 [info] <0.134.0>@client:handle_info:239 success send message
2017-05-22 11:53:09.041 [info] <0.129.0>@tcp_agent:handle_info:229 ***************** receive request from socket ****************
2017-05-22 11:53:09.041 [info] <0.129.0>@tcp_agent:handle_info:232 #{<<"cmd">> => <<"3">>,<<"data">> => <<" wo ye xihuan ni">>,<<"id">> => <<"2">>,<<"to_id">> => <<"1">>,<<"to_type">> => <<"1">>}
2017-05-22 11:53:09.041 [info] <0.129.0>@tcp_agent:handle_info:262 call wait_data to handle chat
2017-05-22 11:53:09.041 [info] <0.129.0>@tcp_agent:wait_data:138 chat begin, client send chat
2017-05-22 11:53:09.041 [info] <0.134.0>@client:handle_info:192 send message to other client
2017-05-22 11:53:09.041 [info] <0.134.0>@client:handle_info:201 [1] true
2017-05-22 11:53:09.041 [info] <0.134.0>@client:handle_info:223 <0.132.0> {client_receive_client_chat,2," wo ye xihuan ni"}
2017-05-22 11:53:09.041 [info] <0.132.0>@client:handle_info:234 receive message from client and send to socket
2017-05-22 11:53:09.041 [info] <0.132.0>@client:handle_info:236 #Port<0.3682>
2017-05-22 11:53:09.041 [info] <0.132.0>@client:handle_info:237 "client 2 said: \n wo ye xihuan ni"
2017-05-22 11:53:09.041 [info] <0.132.0>@client:handle_info:239 success send message
2017-05-22 12:18:14.398 [info] <0.128.0>@tcp_agent:handle_info:229 ***************** receive request from socket ****************
2017-05-22 12:18:14.398 [info] <0.128.0>@tcp_agent:handle_info:232 #{<<"cmd">> => <<"3">>,<<"data">> => <<"wo zhende xihuan ni">>,<<"id">> => <<"1">>,<<"to_id">> => <<"2">>,<<"to_type">> => <<"1">>}
2017-05-22 12:18:14.398 [info] <0.128.0>@tcp_agent:handle_info:262 call wait_data to handle chat
2017-05-22 12:18:14.398 [info] <0.128.0>@tcp_agent:wait_data:138 chat begin, client send chat
2017-05-22 12:18:14.398 [info] <0.132.0>@client:handle_info:192 send message to other client
2017-05-22 12:18:14.399 [info] <0.132.0>@client:handle_info:201 [2] true
2017-05-22 12:18:14.399 [info] <0.132.0>@client:handle_info:223 <0.134.0> {client_receive_client_chat,1,"wo zhende xihuan ni"}
2017-05-22 12:18:14.399 [info] <0.134.0>@client:handle_info:234 receive message from client and send to socket
2017-05-22 12:18:14.399 [info] <0.134.0>@client:handle_info:236 #Port<0.3693>
2017-05-22 12:18:14.399 [info] <0.134.0>@client:handle_info:237 "client 1 said: \nwo zhende xihuan ni"
2017-05-22 12:18:14.399 [info] <0.134.0>@client:handle_info:239 success send message
2017-05-22 13:46:41.855 [info] <0.128.0>@tcp_agent:handle_info:229 ***************** receive request from socket ****************
2017-05-22 13:46:41.855 [info] <0.128.0>@tcp_agent:handle_info:232 #{<<"cmd">> => <<"3">>,<<"data">> => <<"wo chaoji chaoji xihuan ni">>,<<"id">> => <<"1">>,<<"to_id">> => <<"2">>,<<"to_type">> => <<"1">>}
2017-05-22 13:46:41.855 [info] <0.128.0>@tcp_agent:handle_info:262 call wait_data to handle chat
2017-05-22 13:46:41.855 [info] <0.128.0>@tcp_agent:wait_data:138 chat begin, client send chat
2017-05-22 13:46:41.856 [info] <0.132.0>@client:handle_info:192 send message to other client
2017-05-22 13:46:41.857 [info] <0.132.0>@client:handle_info:201 [2] true
2017-05-22 13:46:41.857 [info] <0.132.0>@client:handle_info:223 <0.134.0> {client_receive_client_chat,1,"wo chaoji chaoji xihuan ni"}
2017-05-22 13:46:41.858 [info] <0.134.0>@client:handle_info:234 receive message from client and send to socket
2017-05-22 13:46:41.858 [info] <0.134.0>@client:handle_info:236 #Port<0.3693>
2017-05-22 13:46:41.858 [info] <0.134.0>@client:handle_info:237 "client 1 said: \nwo chaoji chaoji xihuan ni"
2017-05-22 13:46:41.858 [info] <0.134.0>@client:handle_info:239 success send message
2017-05-22 13:55:35.063 [info] <0.31.0> Application lager started on node yangwei@brucedeiMac
2017-05-22 13:55:35.063 [info] <0.98.0>@chat_sup:init:26 ###############   Begin  ##############
2017-05-22 13:55:35.177 [info] <0.31.0> Application mnesia started on node yangwei@brucedeiMac
2017-05-22 13:55:35.185 [info] <0.99.0>@mod_mnesia:add_client:50 add client to mnesia: {client,1,"zst","iyw",[2],[1],[]}
2017-05-22 13:55:35.185 [info] <0.99.0>@mod_mnesia:add_client:56 add new client:{atomic,ok}
2017-05-22 13:55:35.185 [info] <0.99.0>@mod_mnesia:add_client:50 add client to mnesia: {client,2,"yw","ist",[1],[1],[]}
2017-05-22 13:55:35.186 [info] <0.99.0>@mod_mnesia:add_client:56 add new client:{atomic,ok}
2017-05-22 13:55:35.186 [info] <0.99.0>@mod_mnesia:add_group:59 add group to mnesia: {group,1,[1,2]}
2017-05-22 13:55:35.186 [info] <0.99.0>@mod_mnesia:add_group:64 add new group:{atomic,ok}
2017-05-22 13:55:35.186 [info] <0.99.0>@mod_control_sup:init:27 load tables:ok 
2017-05-22 13:55:35.186 [info] <0.99.0>@control_sup:init:63 Initialization all resources
2017-05-22 13:55:35.193 [info] <0.121.0>@id_generator:init:31 ########### id_generator
2017-05-22 13:55:35.223 [info] <0.122.0>@group_sup:init:70 [1] 
2017-05-22 13:55:35.223 [info] <0.122.0>@group_sup:init:77 [{1,{group,start_link,[1]},permanent,2000,worker,[group]}] 
2017-05-22 13:55:35.223 [info] <0.122.0>@group_sup:init:79 ######## group_sup
2017-05-22 13:55:35.224 [info] <0.124.0>@group:handle_cast:104 <0.124.0>
2017-05-22 13:55:35.240 [info] <0.125.0>@client_sup:init:65 ######## client_sup
2017-05-22 13:55:35.242 [info] <0.31.0> Application chat started on node yangwei@brucedeiMac
